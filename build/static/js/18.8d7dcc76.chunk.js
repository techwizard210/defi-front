(this["webpackJsonpHiFi-DeFi"]=this["webpackJsonpHiFi-DeFi"]||[]).push([[18],{1033:function(t,e){},1098:function(t,e,n){},1099:function(t,e,n){},1158:function(t,e,n){"use strict";n.r(e);var a=n(442),i=n.p+"static/media/MoonVaultLogo.435f3339.png",r=n(22),s=n(2),o=n(15),u=n(11),c=n(10),l=n(49),d=n(40),p=n(16),h=n(17),y=n(571),m=n(1),b={shortFormatter:new Intl.NumberFormat(navigator.language,{style:"currency",currency:"USD",maximumFractionDigits:0,minimumFractionDigits:0}),formatter:new Intl.NumberFormat(navigator.language,{style:"currency",currency:"USD",maximumFractionDigits:16,minimumFractionDigits:2}),formatterNoDecimal:new Intl.NumberFormat(navigator.language,{style:"currency",currency:"USD",maximumFractionDigits:16,minimumFractionDigits:0}),formatDecimal:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:18;return new Intl.NumberFormat(navigator.language,{maximumFractionDigits:n,minimumFractionDigits:e}).format(t)},defaultUndefined:function(t,e){return void 0===t?e:t},smartFormatPercent:function(t,e,n,a){var i,r;if(t>999)return"> 999%";n&&n>(null!==(i=a)&&void 0!==i?i:2)&&(a=n);var s=e?0:2,o=this.formatDecimal(t,null!==n&&void 0!==n?n:s,null!==(r=a)&&void 0!==r?r:2);return"".concat(o,"%")},smartFormatFloat:function(t,e){var n=parseFloat(t);return n=n<1?n.toFixed(4):n>1e4?n.toFixed(1):n.toFixed(2),e&&(n=parseFloat(n)),n},smartFormatFloatDisplay:function(t,e,n,a){var i=this.smartFormatFloat(t),r=16;r=i<1?4:i>1e4?1:2;var s=e?0:r;return this.formatDecimal(t,null!==n&&void 0!==n?n:s,null!==a&&void 0!==a?a:r)},smartFormatMultiplicator:function(t,e){var n=parseFloat(t/100).toFixed(2);e&&(n=parseFloat(n));var a=e?0:2;return n=this.formatDecimal(n,a,2),"x ".concat(n)},stringKeep:function(t,e){for(var n="",a=0;a<t.length;a+=1)t[a]===e&&(n+=t[a]);return n},getHeaders:function(t){var e=new Headers;return e.append("Access-Control-Allow-Origin","*"),e.append("Access-Control-Allow-Headers","Origin, X-Origin, Content-Type"),e.append("Access-Control-Allow-Methods","".concat(t,", OPTIONS")),e},fetch:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t){return Object(o.a)(Object(s.a)().mark((function e(){return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(t));case 1:case"end":return e.stop()}}),e)})))()})),fetchJSON:function(t){var e=this;return Object(o.a)(Object(s.a)().mark((function n(){var a,i;return Object(s.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.fetch(t);case 2:return a=n.sent,n.next=5,a.text();case 5:return i=n.sent,n.prev=6,n.abrupt("return",JSON.parse(i.split("/*")[0]));case 10:throw n.prev=10,n.t0=n.catch(6),console.log("Can't parse JSON [".concat(t,"]")),n.t0;case 14:case"end":return n.stop()}}),n,null,[[6,10]])})))()},fetchFromForm:function(t,e){var n=this;return Object(o.a)(Object(s.a)().mark((function a(){return Object(s.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",fetch(t,{method:"POST",body:e,headers:n.getHeaders("POST")}));case 1:case"end":return a.stop()}}),a)})))()},fetchJSONFromForm:function(t,e){var n=this;return Object(o.a)(Object(s.a)().mark((function a(){var i,r;return Object(s.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,n.fetchFromForm(t,e);case 2:return i=a.sent,a.next=5,i.text();case 5:return r=a.sent,a.prev=6,a.abrupt("return",JSON.parse(r.split("/*")[0]));case 10:throw a.prev=10,a.t0=a.catch(6),console.log("Can't parse JSON [".concat(t,"]")),a.t0;case 14:case"end":return a.stop()}}),a,null,[[6,10]])})))()},getVersion:function(t){var e=t.split(".");return{major:parseInt(e[0],10),minor:parseInt(e.length>=2?e[1]:0,10),revision:parseInt(e.length>=3?e[2]:0,10)}},getDateTimeFromDB:function(t){if("number"!==typeof t){var e=t.split(" "),n="".concat(e[0],"T").concat(e.length>1?e[1]:"23:59:59",".000");return new Date(Date.parse(n))}return new Date(1e3*parseInt(t,10))},measureTime:function(t,e,n){return Object(o.a)(Object(s.a)().mark((function a(){var i,r,o;return Object(s.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e();case 2:n&&(i=new Date,r=new Date,o=r.getTime()-i.getTime(),console.log("".concat(t,": ").concat(o,"ms")));case 3:case"end":return a.stop()}}),a)})))()},checkRequiredVersion:function(t,e,n,a){return void 0===a&&(a=0),void 0===n&&(n=0),void 0===e&&(e=0),t.major>e||t.major===e&&t.minor>n||t.major===e&&t.minor===n&&t.revision>=a},removeTrailStart:function(t,e){return this.removeTrail(t,e,!0)},removeTrailEnd:function(t,e){return this.removeTrail(t,e,!1)},removeTrail:function(t,e,n){var a=0;if(n)for(var i=0;i<t.length&&t[i]===e;i+=1)a+=1;else for(var r=t.length-1;r>=0&&t[r]===e;r-=1)a+=1;return a>=t.length?"":n?t.substring(a):t.substring(0,t.length-a)},getHMS:function(t,e){var n="",a=parseInt(t,10)%60;t/=60;var i=parseInt(t,10)%60;t/=60;var r=parseInt(t,10);return r>0&&(n+=r.toString()+(e?"h":"")),i>0&&(""!==n&&(n+=e?" ":":"),n+=i.toString().padStart(""===n||e?1:2,"0")+(e?"m":"")),a>=0&&(""!==n&&(n+=e?" ":":"),n+=a.toString().padStart(""===n||e?1:2,"0")+(e?"s":"")),n},renderLoading:function(t,e){return t?e:Object(m.jsx)(m.Fragment,{children:Object(m.jsx)("span",{className:"loading",children:"???"})})},getCookie:function(t,e){var n=document.cookie.split(";"),a=[];n.forEach((function(t){var e=t.split("=");a.push({name:e[0].replace(" ",""),value:e[1]})}));var i=a.find((function(e){return e.name===t}));return i?i.value:e},setCookie:function(t,e,n){var a="";if(n){var i=new Date;i.setTime(i.getTime()+24*n*60*60*1e3),a="; expires=".concat(i.toUTCString())}document.cookie="".concat(t,"=").concat(e||"").concat(a,"; path=/")},setStorage:function(t,e,n){t?sessionStorage.setItem(e,n):localStorage.setItem(e,n)},getStorage:function(t,e,n){var a;return null===(a=t?sessionStorage.getItem(e):localStorage.getItem(e))||void 0===a?n:a},getStorage_bool:function(t,e,n){var a=this.getStorage(t,e,n);return a===n?a:"true"===a},getStorage_int:function(t,e,n){var a=this.getStorage(t,e,n);return a===n?a:parseInt(a,10)},getStorage_float:function(t,e,n){var a=this.getStorage(t,e,n);return a===n?a:parseFloat(a)},formatFiat:function(t){var e,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=arguments.length>2?arguments[2]:void 0;if(t=null!==(e=t)&&void 0!==e?e:0,a){var i=!1;"boolean"===typeof a.shorten&&(i=a.shorten),t=this.smartFormatFloat(t,i)}return n?t%1!==0?this.formatter.format(t):this.formatterNoDecimal.format(t):t},formatDate:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=this.getLocaleDateString(),i=a;return e&&(i="".concat(a,n?" LTS":" LT")),y(t).format(i)},formatTime:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1]?"LTS":"LT";return y(t).format(e)},getLocaleDateString:function(){var t;return(null!==(t={"af-ZA":"yyyy/MM/dd","am-ET":"d/M/yyyy","ar-AE":"dd/MM/yyyy","ar-BH":"dd/MM/yyyy","ar-DZ":"dd-MM-yyyy","ar-EG":"dd/MM/yyyy","ar-IQ":"dd/MM/yyyy","ar-JO":"dd/MM/yyyy","ar-KW":"dd/MM/yyyy","ar-LB":"dd/MM/yyyy","ar-LY":"dd/MM/yyyy","ar-MA":"dd-MM-yyyy","ar-OM":"dd/MM/yyyy","ar-QA":"dd/MM/yyyy","ar-SA":"dd/MM/yy","ar-SY":"dd/MM/yyyy","ar-TN":"dd-MM-yyyy","ar-YE":"dd/MM/yyyy","arn-CL":"dd-MM-yyyy","as-IN":"dd-MM-yyyy","az-Cyrl-AZ":"dd.MM.yyyy","az-Latn-AZ":"dd.MM.yyyy","ba-RU":"dd.MM.yy","be-BY":"dd.MM.yyyy","bg-BG":"dd.M.yyyy","bn-BD":"dd-MM-yy","bn-IN":"dd-MM-yy","bo-CN":"yyyy/M/d","br-FR":"dd/MM/yyyy","bs-Cyrl-BA":"d.M.yyyy","bs-Latn-BA":"d.M.yyyy","ca-ES":"dd/MM/yyyy","co-FR":"dd/MM/yyyy","cs-CZ":"d.M.yyyy","cy-GB":"dd/MM/yyyy","da-DK":"dd-MM-yyyy","de-AT":"dd.MM.yyyy","de-CH":"dd.MM.yyyy","de-DE":"dd.MM.yyyy","de-LI":"dd.MM.yyyy","de-LU":"dd.MM.yyyy","dsb-DE":"d. M. yyyy","dv-MV":"dd/MM/yy","el-GR":"d/M/yyyy","en-029":"MM/dd/yyyy","en-AU":"d/MM/yyyy","en-BZ":"dd/MM/yyyy","en-CA":"dd/MM/yyyy","en-GB":"dd/MM/yyyy","en-IE":"dd/MM/yyyy","en-IN":"dd-MM-yyyy","en-JM":"dd/MM/yyyy","en-MY":"d/M/yyyy","en-NZ":"d/MM/yyyy","en-PH":"M/d/yyyy","en-SG":"d/M/yyyy","en-TT":"dd/MM/yyyy","en-US":"M/d/yyyy","en-ZA":"yyyy/MM/dd","en-ZW":"M/d/yyyy","es-AR":"dd/MM/yyyy","es-BO":"dd/MM/yyyy","es-CL":"dd-MM-yyyy","es-CO":"dd/MM/yyyy","es-CR":"dd/MM/yyyy","es-DO":"dd/MM/yyyy","es-EC":"dd/MM/yyyy","es-ES":"dd/MM/yyyy","es-GT":"dd/MM/yyyy","es-HN":"dd/MM/yyyy","es-MX":"dd/MM/yyyy","es-NI":"dd/MM/yyyy","es-PA":"MM/dd/yyyy","es-PE":"dd/MM/yyyy","es-PR":"dd/MM/yyyy","es-PY":"dd/MM/yyyy","es-SV":"dd/MM/yyyy","es-US":"M/d/yyyy","es-UY":"dd/MM/yyyy","es-VE":"dd/MM/yyyy","et-EE":"d.MM.yyyy","eu-ES":"yyyy/MM/dd","fa-IR":"MM/dd/yyyy","fi-FI":"d.M.yyyy","fil-PH":"M/d/yyyy","fo-FO":"dd-MM-yyyy","fr-BE":"d/MM/yyyy","fr-CA":"yyyy-MM-dd","fr-CH":"dd.MM.yyyy","fr-FR":"dd/MM/yyyy","fr-LU":"dd/MM/yyyy","fr-MC":"dd/MM/yyyy","fy-NL":"d-M-yyyy","ga-IE":"dd/MM/yyyy","gd-GB":"dd/MM/yyyy","gl-ES":"dd/MM/yy","gsw-FR":"dd/MM/yyyy","gu-IN":"dd-MM-yy","ha-Latn-NG":"d/M/yyyy","he-IL":"dd/MM/yyyy","hi-IN":"dd-MM-yyyy","hr-BA":"d.M.yyyy.","hr-HR":"d.M.yyyy","hsb-DE":"d. M. yyyy","hu-HU":"yyyy. MM. dd.","hy-AM":"dd.MM.yyyy","id-ID":"dd/MM/yyyy","ig-NG":"d/M/yyyy","ii-CN":"yyyy/M/d","is-IS":"d.M.yyyy","it-CH":"dd.MM.yyyy","it-IT":"dd/MM/yyyy","iu-Cans-CA":"d/M/yyyy","iu-Latn-CA":"d/MM/yyyy","ja-JP":"yyyy/MM/dd","ka-GE":"dd.MM.yyyy","kk-KZ":"dd.MM.yyyy","kl-GL":"dd-MM-yyyy","km-KH":"yyyy-MM-dd","kn-IN":"dd-MM-yy","ko-KR":"yyyy. MM. dd","kok-IN":"dd-MM-yyyy","ky-KG":"dd.MM.yy","lb-LU":"dd/MM/yyyy","lo-LA":"dd/MM/yyyy","lt-LT":"yyyy.MM.dd","lv-LV":"yyyy.MM.dd.","mi-NZ":"dd/MM/yyyy","mk-MK":"dd.MM.yyyy","ml-IN":"dd-MM-yy","mn-MN":"yy.MM.dd","mn-Mong-CN":"yyyy/M/d","moh-CA":"M/d/yyyy","mr-IN":"dd-MM-yyyy","ms-BN":"dd/MM/yyyy","ms-MY":"dd/MM/yyyy","mt-MT":"dd/MM/yyyy","nb-NO":"dd.MM.yyyy","ne-NP":"M/d/yyyy","nl-BE":"d/MM/yyyy","nl-NL":"d-M-yyyy","nn-NO":"dd.MM.yyyy","nso-ZA":"yyyy/MM/dd","oc-FR":"dd/MM/yyyy","or-IN":"dd-MM-yy","pa-IN":"dd-MM-yy","pl-PL":"dd.MM.yyyy","prs-AF":"dd/MM/yy","ps-AF":"dd/MM/yy","pt-BR":"d/M/yyyy","pt-PT":"dd-MM-yyyy","qut-GT":"dd/MM/yyyy","quz-BO":"dd/MM/yyyy","quz-EC":"dd/MM/yyyy","quz-PE":"dd/MM/yyyy","rm-CH":"dd/MM/yyyy","ro-RO":"dd.MM.yyyy","ru-RU":"dd.MM.yyyy","rw-RW":"M/d/yyyy","sa-IN":"dd-MM-yyyy","sah-RU":"MM.dd.yyyy","se-FI":"d.M.yyyy","se-NO":"dd.MM.yyyy","se-SE":"yyyy-MM-dd","si-LK":"yyyy-MM-dd","sk-SK":"d. M. yyyy","sl-SI":"d.M.yyyy","sma-NO":"dd.MM.yyyy","sma-SE":"yyyy-MM-dd","smj-NO":"dd.MM.yyyy","smj-SE":"yyyy-MM-dd","smn-FI":"d.M.yyyy","sms-FI":"d.M.yyyy","sq-AL":"yyyy-MM-dd","sr-Cyrl-BA":"d.M.yyyy","sr-Cyrl-CS":"d.M.yyyy","sr-Cyrl-ME":"d.M.yyyy","sr-Cyrl-RS":"d.M.yyyy","sr-Latn-BA":"d.M.yyyy","sr-Latn-CS":"d.M.yyyy","sr-Latn-ME":"d.M.yyyy","sr-Latn-RS":"d.M.yyyy","sv-FI":"d.M.yyyy","sv-SE":"yyyy-MM-dd","sw-KE":"M/d/yyyy","syr-SY":"dd/MM/yyyy","ta-IN":"dd-MM-yyyy","te-IN":"dd-MM-yy","tg-Cyrl-TJ":"dd.MM.yy","th-TH":"d/M/yyyy","tk-TM":"dd.MM.yy","tn-ZA":"yyyy/MM/dd","tr-TR":"dd.MM.yyyy","tt-RU":"dd.MM.yyyy","tzm-Latn-DZ":"dd-MM-yyyy","ug-CN":"yyyy-M-d","uk-UA":"dd.MM.yyyy","ur-PK":"dd/MM/yyyy","uz-Cyrl-UZ":"dd.MM.yyyy","uz-Latn-UZ":"dd/MM yyyy","vi-VN":"dd/MM/yyyy","wo-SN":"dd/MM/yyyy","xh-ZA":"yyyy/MM/dd","yo-NG":"d/M/yyyy","zh-CN":"yyyy/M/d","zh-HK":"d/M/yyyy","zh-MO":"d/M/yyyy","zh-SG":"d/M/yyyy","zh-TW":"yyyy/M/d","zu-ZA":"yyyy/MM/dd"}[navigator.language])&&void 0!==t?t:"dd/MM/yyyy").toUpperCase()}},v=n(24),f=n(163),k=n.n(f),j=n(1108),w=n(1046),O=void 0,x={compareAddress:function(t,e){return t="string"!==typeof t?"":t.toLowerCase(),e="string"!==typeof e?"":e.toLowerCase(),""===t&&""===e?-1:t>e?1:t<e?-1:0},checkEqualAddress:function(t,e){return 0===this.compareAddress(t,e)},convertTokensToFloatString:function(t,e){void 0===t&&(t="0"),void 0===e&&(e=18),(t=t.toString()).length<=e&&(t=t.padStart(e+1,"0"));var n=(t="".concat(t.substring(0,t.length-e),".").concat(t.substring(t.length-e))).length-e;return t=t.substring(0,n),""===(t=b.removeTrailStart(t,"0"))?"0":("."===t[0]&&(t="0".concat(t)),t)},convertTokensToFloat:function(t,e){return parseFloat(this.convertTokensToFloatString(t,e))},formatTokens:function(t,e,n,a){void 0===t&&(t="0"),void 0===a&&(a=18),"number"!==typeof a&&(a=parseInt(a,10)),void 0===e&&(e=Math.min(8,a)),(t=t.toString()).length<=a&&(t=t.padStart(a+1,"0"));var i=(t="".concat(t.substring(0,t.length-a),".").concat(t.substring(t.length-a))).length-(a-e);return t=t.substring(0,i),t=b.removeTrailStart(t,"0"),!0===n&&(t=b.removeTrailEnd(t,"0"),t=b.removeTrailEnd(t,".")),""===t?"0":("."===t[0]&&(t="0".concat(t)),t)},smartFormatTokensDisplay:function(t,e,n){var a=this.smartFormatTokens(t,e,n);return b.smartFormatFloatDisplay(a,n,0,18)},smartFormatTokens:function(t,e,n){void 0===t&&(t="0");var a=e&&void 0!==e.decimals?e.decimals:18,i=Math.min(a,t.length<=18?8:4);return this.formatTokens(t,i,!!n,e?e.decimals:void 0)},fullFormatTokens:function(t,e,n){void 0===t&&(t="0");var a=e&&void 0!==e.decimals?e.decimals:18;return this.formatTokens(t,a,!!n,e?e.decimals:void 0)},formatFiatDisplay:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this.smartFormatFiat(t,e,!0,n)},smartFormatFiat:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];void 0===t&&(t="0");var i=this.formatTokens(t,2,!1,e?e.decimals:void 0);return a&&i<1&&(i=this.formatTokens(t,4,!1,e?e.decimals:void 0)),n&&(i=b.formatFiat(i)),i},smartFormatBigNumber:function(t){var e=t.indexOf("."),n=-1===e?t.length:e+1;return n>=7?t="".concat(t.substr(0,n-6),".").concat(t.substr(n-6,n-4),"M"):n>=4&&(t=t.substring(0,n)),t},tokensToUint256String:function(t){var e=(t=t.replace(",",".")).indexOf(".");return t=(t=-1===e?t.padEnd(t.length+18,"0"):t.padEnd(19+e,"0")).replaceAll(".",""),""===(t=b.removeTrailStart(t,"0"))&&(t="0"),t},formatAddress:function(t){return t?"".concat(t.substring(0,6)," ... ").concat(t.substring(t.length-4)):""},abiEncodeUint256:function(t){var e=window.chef.web3_data.eth.abi.encodeParameter("uint256",t);return e.substring(e.length-32)},tryCall:function(t,e,n){return Object(o.a)(Object(s.a)().mark((function e(){return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.call().catch((function(t){if(void 0!==n)return n;throw t})));case 2:case"end":return e.stop()}}),e)})))()},tryMultiCall:function(t,e,n,a,i){return Object(o.a)(Object(s.a)().mark((function n(){var a,r,o,u,c,l,d,p;return Object(s.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=[],n.prev=2,n.next=5,t.all([e]).catch((function(t){throw t}));case 5:a=n.sent,n.next=14;break;case 8:if(n.prev=8,n.t0=n.catch(2),void 0===i){n.next=13;break}return n.abrupt("return",i);case 13:throw n.t0;case 14:r=0;case 15:if(!(r<a.length)){n.next=37;break}o=a[r],u=0;case 18:if(!(u<o.length)){n.next=34;break}c=o[u],l=0,d=Object.entries(c);case 21:if(!(l<d.length)){n.next=31;break}if(p=Object(v.a)(d[l],2),void 0!==p[1]){n.next=28;break}if(void 0===i){n.next=27;break}return n.abrupt("return",i);case 27:throw new Error("MultiCall failed");case 28:l++,n.next=21;break;case 31:u+=1,n.next=18;break;case 34:r+=1,n.next=15;break;case 37:return n.abrupt("return",a);case 38:case"end":return n.stop()}}),n,null,[[2,8]])})))()},trySend:function(t,e,n,a,i,r,u,c,l){return Object(o.a)(Object(s.a)().mark((function n(){var o;return Object(s.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o={from:e},void 0!==l&&(o.value=l),n.abrupt("return",t.send(o).once("transactionHash",(function(t){i&&i(t)})).once("receipt",(function(t){r&&r(t)})).once("confirmation",(function(t,e){u&&u(t,e)})).on("error",(function(t){c&&c(t)})).catch((function(t){if(void 0!==a)return a;throw t})));case 4:case"end":return n.stop()}}),n)})))()},scanEvent:function(t,e,n,a){return Object(o.a)(Object(s.a)().mark((function i(){var r,o;return Object(s.a)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return void 0===n&&(n=window.chef.currentBlock-5e3),void 0===a&&(a="latest"),r=null,o={fromBlock:n,toBlock:a},i.prev=4,i.next=7,t.getPastEvents(e,o);case 7:r=i.sent,i.next=12;break;case 10:i.prev=10,i.t0=i.catch(4);case 12:return i.abrupt("return",r);case 13:case"end":return i.stop()}}),i,null,[[4,10]])})))()},web3Data:{connections:[],multiCalls:[],web3RPCs:[]},initWeb3Data:function(t){this.web3Data=t},createWeb3Connection:function(t){null===this.findWeb3Connection(t)&&this.web3Data.connections.push({id:t,web3:null,currentRPC:"",chain:-1})},createAndConnectWeb3Connection:function(t,e){var n=this;return Object(o.a)(Object(s.a)().mark((function a(){return Object(s.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return null===n.findWeb3Connection(t)&&n.web3Data.connections.push({id:t,web3:null,currentRPC:"",chain:-1}),a.abrupt("return",n.connectWeb3(t,e));case 2:case"end":return a.stop()}}),a)})))()},findWeb3Connection:function(t){for(var e=0;e<this.web3Data.connections.length;e+=1){var n=this.web3Data.connections[e];if(n.id===t)return n}return null},findWeb3RPCs:function(t){for(var e=0;e<this.web3Data.web3RPCs.length;e+=1){var n=this.web3Data.web3RPCs[e];if(n.chain===t)return n.nodes}return[]},findMultiCall:function(t){for(var e=0;e<this.web3Data.multiCalls.length;e+=1){var n=this.web3Data.multiCalls[e];if(n.chain===t)return n.multiCall}return null},selectProvider:function(t){var e=this;return Object(o.a)(Object(s.a)().mark((function n(){var a,i;return Object(s.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if("MetaMask"!==t){n.next=4;break}k.a.currentProvider=new k.a.providers.HttpProvider("http://localhost:7545"),n.next=8;break;case 4:if("WalletConnect"!==t){n.next=8;break}return k.a.currentProvider=new j.a({infuraId:"27e484dcd9e3efcfd25a83a78777cdf1"}),n.next=8,k.a.currentProvider.enable();case 8:for(a=0;a<e.web3Data.web3RPCs.length;a+=1)""===(i=e.web3Data.web3RPCs[a]).currentRPC&&e.connectWeb3(i.id);case 9:case"end":return n.stop()}}),n)})))()},disconnectWeb3:function(){var t=Object(o.a)(Object(s.a)().mark((function t(e){return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!==O.findWeb3Connection(e)){t.next=3;break}return t.abrupt("return",!1);case 3:return t.abrupt("return",!0);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),connectWeb3:function(t,e){var n=this;return Object(o.a)(Object(s.a)().mark((function a(){var i,r;return Object(s.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(void 0===e&&(e=-1),null!==(i=n.findWeb3Connection(t))){a.next=4;break}return a.abrupt("return",null);case 4:if(-1!==e){a.next=12;break}if(!k.a.currentProvider&&!k.a.givenProvider){a.next=10;break}return i.web3=new k.a(k.a.currentProvider||k.a.givenProvider),a.next=9,i.web3.eth.net.getId();case 9:i.chain=a.sent;case 10:a.next=20;break;case 12:if(0!==(r=n.findWeb3RPCs(e)).length){a.next=15;break}return a.abrupt("return",null);case 15:return i.web3=new k.a(new k.a.providers.HttpProvider(r[0])),a.next=18,i.web3.eth.net.getId();case 18:i.chain=a.sent,i.currentRPC=r[0];case 20:return a.abrupt("return",i.web3);case 21:case"end":return a.stop()}}),a)})))()},switchRPCWeb3:function(t){var e=this;return Object(o.a)(Object(s.a)().mark((function n(){var a,i,r;return Object(s.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(null!==(a=e.findWeb3Connection(t))){n.next=3;break}return n.abrupt("return",null);case 3:if(!((i=e.findWeb3RPCs(a.chain)).length<=1)){n.next=6;break}return n.abrupt("return",null);case 6:if(-1!==(r=i.indexOf(a.currentRPC))){n.next=9;break}return n.abrupt("return",null);case 9:return a.currentRPC=i[(r+1)%i.length],a.web3=new k.a(new k.a.providers.HttpProvider(a.currentRPC)),n.abrupt("return",a.web3);case 12:case"end":return n.stop()}}),n)})))()},makeMultiCall:function(t){var e=this.findWeb3Connection(t);if(null===e)return null;var n=this.findMultiCall(e.chain);return null===n?null:new w.MultiCall(e.web3,n)},switchChain:function(t){var e=this;return Object(o.a)(Object(s.a)().mark((function n(){var a,i,r;return Object(s.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a=null,0!==(i=e.findWeb3RPCs(t)).length){n.next=4;break}return n.abrupt("return");case 4:r=i[0],n.t0=t,n.next=25===n.t0?8:56===n.t0?10:137===n.t0?12:250===n.t0?14:16666e5===n.t0?16:18;break;case 8:return a={chainId:"0x".concat(parseInt("25",10).toString(16)),chainName:"Cronos Mainnet",nativeCurrency:{name:"Cronos Coin",symbol:"CRO",decimals:18},rpcUrls:[r],blockExplorerUrls:["https://cronos.crypto.org/explorer"]},n.abrupt("break",19);case 10:return a={chainId:"0x".concat(parseInt("56",10).toString(16)),chainName:"Binance Smart Chain Mainnet",nativeCurrency:{name:"Binance Coin",symbol:"BNB",decimals:18},rpcUrls:[r],blockExplorerUrls:["https://bscscan.com"]},n.abrupt("break",19);case 12:return a={chainId:"0x".concat(parseInt("137",10).toString(16)),chainName:"Polygon Mainnet",nativeCurrency:{name:"Polygon",symbol:"MATIC",decimals:18},rpcUrls:[r],blockExplorerUrls:["https://polygonscan.com"]},n.abrupt("break",19);case 14:return a={chainId:"0x".concat(parseInt("250",10).toString(16)),chainName:"Fantom Mainnet",nativeCurrency:{name:"Fantom",symbol:"FTM",decimals:18},rpcUrls:[r],blockExplorerUrls:["https://ftmscan.com"]},n.abrupt("break",19);case 16:return a={chainId:"0x".concat(parseInt("1666600000",10).toString(16)),chainName:"Harmony Mainnet",nativeCurrency:{name:"Harmony",symbol:"ONE",decimals:18},rpcUrls:[r],blockExplorerUrls:["https://explorer.harmony.one"]},n.abrupt("break",19);case 18:return n.abrupt("return");case 19:return n.next=21,window.ethereum.request({method:"wallet_addEthereumChain",params:[a]});case 21:case"end":return n.stop()}}),n)})))()}},g=[{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"_vid",type:"uint256"},{indexed:!0,internalType:"address",name:"_user",type:"address"}],name:"Compound",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"string",name:"_key",type:"string"},{indexed:!0,internalType:"address",name:"_sender",type:"address"},{indexed:!1,internalType:"uint256",name:"_value",type:"uint256"}],name:"ConfigChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"_vid",type:"uint256"},{indexed:!0,internalType:"address",name:"_user",type:"address"},{indexed:!1,internalType:"uint256",name:"_amount",type:"uint256"}],name:"Deposit",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"_vid",type:"uint256"},{indexed:!0,internalType:"address",name:"_user",type:"address"}],name:"EmergencyWithdraw",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_user",type:"address"},{indexed:!1,internalType:"bool",name:"_deposit",type:"bool"},{indexed:!1,internalType:"bool",name:"_withdraw",type:"bool"},{indexed:!1,internalType:"bool",name:"_compound",type:"bool"}],name:"Pause",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_user",type:"address"},{indexed:!0,internalType:"address",name:"_referrer",type:"address"}],name:"SetReferrer",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"_old",type:"address"},{indexed:!1,internalType:"address",name:"_new",type:"address"}],name:"SuperAdminTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_user",type:"address"},{indexed:!1,internalType:"bool",name:"_deposit",type:"bool"},{indexed:!1,internalType:"bool",name:"_withdraw",type:"bool"},{indexed:!1,internalType:"bool",name:"_compound",type:"bool"}],name:"Unpause",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"_vid",type:"uint256"},{indexed:!0,internalType:"address",name:"_user",type:"address"},{indexed:!1,internalType:"uint256",name:"_amount",type:"uint256"}],name:"Withdraw",type:"event"},{inputs:[{internalType:"contract IVault",name:"_vault",type:"address"}],name:"addVault",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_vid",type:"uint256"}],name:"compound",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_vid",type:"uint256"},{internalType:"uint256",name:"_amount",type:"uint256"}],name:"deposit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_vid",type:"uint256"}],name:"emergencyWithdraw",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract IToken",name:"_token",type:"address"}],name:"inCaseTokensGetStuck",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bool",name:"_pauseDeposit",type:"bool"},{internalType:"bool",name:"_pauseWithdraw",type:"bool"},{internalType:"bool",name:"_pauseCompound",type:"bool"}],name:"pause",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bool",name:"_allow",type:"bool"}],name:"setAllowUserCompound",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_fee",type:"uint256"}],name:"setCompoundRewardFee",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bool",name:"_native",type:"bool"}],name:"setCompundRewardNative",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_address",type:"address"}],name:"setNativeLiquidityAddress",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_fee",type:"uint256"}],name:"setNativeLiquidityFee",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_fee",type:"uint256"}],name:"setNativePoolFee",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_referrer",type:"address"}],name:"setReferrer",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_address",type:"address"}],name:"setTokenPool",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_vid",type:"uint256"},{internalType:"contract IVault",name:"_vault",type:"address"}],name:"setVault",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_vid",type:"uint256"},{internalType:"bool",name:"_enabled",type:"bool"}],name:"setVaultStatus",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_newSuperAdmin",type:"address"}],name:"transferSuperAdmin",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bool",name:"_unpauseDeposit",type:"bool"},{internalType:"bool",name:"_unpauseWithdraw",type:"bool"},{internalType:"bool",name:"_unpauseCompound",type:"bool"}],name:"unpause",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_vid",type:"uint256"},{internalType:"uint256",name:"_amount",type:"uint256"}],name:"withdraw",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract IToken",name:"_wrappedCoin",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"allowUserCompound",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_vid",type:"uint256"},{internalType:"address",name:"_user",type:"address"}],name:"checkVaultApproved",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"compoundRewardFee",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"compoundRewardNative",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_user",type:"address"}],name:"getReferralInfo",outputs:[{internalType:"address",name:"",type:"address"},{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_vid",type:"uint256"}],name:"getVault",outputs:[{internalType:"contract IVault",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_user",type:"address"}],name:"isAdmin",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"MAX_LIQUIDITY_FEE",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"MAX_POOL_FEE",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"MAX_REWARD_FEE",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"MAX_TOTAL_FEE",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"MAX_WITHDRAW_FEE",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"nativeLiquidityAddress",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"nativeLiquidityFee",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"nativePoolAddress",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"nativePoolFee",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"pauseCompound",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"pauseDeposit",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"pauseWithdraw",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"PERCENT_FACTOR",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_user",type:"address"}],name:"requireAdmin",outputs:[],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_user",type:"address"}],name:"requireCompounder",outputs:[],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_user",type:"address"}],name:"requireDeployer",outputs:[],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_user",type:"address"}],name:"requireManager",outputs:[],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_user",type:"address"}],name:"requireSecurityAdmin",outputs:[],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_user",type:"address"}],name:"requireSecurityMod",outputs:[],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_user",type:"address"}],name:"requireWhitelistedContract",outputs:[],stateMutability:"view",type:"function"},{inputs:[],name:"ROLE_ADMIN",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"ROLE_COMPOUNDER",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"ROLE_DEPLOYER",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"ROLE_MANAGER",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"ROLE_SECURITY_ADMIN",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"ROLE_SECURITY_MOD",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"ROLE_SUPER_ADMIN",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"ROLE_WHITELISTED_CONTRACT",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"superAdmin",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"userInfo",outputs:[{internalType:"address",name:"referrer",type:"address"},{internalType:"uint256",name:"referrals",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"vaultInfo",outputs:[{internalType:"contract IVault",name:"vault",type:"address"},{internalType:"bool",name:"enabled",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"vaultLength",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"vaultMap",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"VERSION",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"withdrawalFee",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"wrappedCoin",outputs:[{internalType:"contract IToken",name:"",type:"address"}],stateMutability:"view",type:"function"}],C=function(){function t(e,n){Object(u.a)(this,t),this.address=e,this.initialized=!1,this.versionString="0.0",this.version=b.getVersion(this.versionString),this.percentFactor=1e5,this.compoundRewardFee=0,this.nativeLiquidityFee=0,this.nativePoolFee=0,this.totalProfitFee=0,this.depositFee=0,this.withdrawFee=0,this.referredBy="",this.referrals=0,this.role_superAdmin="0x0d6cceaa37e5e7618474d8eb3448c6d3f2360829c16d7bd3a0564a84b4ba3d58",this.role_admin="0x2172861495e7b85edac73e3cd5fbb42dd675baadf627720e687bcfdaca025096",this.role_manager="0xf206625bad3d9112d5609b8d356e6fbd514cd1f69980d4ce2b3e6e68e1789ace",this.hasRole_superAdmin=!1,this.hasRole_admin=!1,this.hasRole_manager=!1,this.dailyAPR=0,this.db={syncBlock:0},this.last={syncBlock:0},this.vaultinator3000=n}return Object(c.a)(t,[{key:"debugErrorString",value:function(t){return"VaultChef failed at: ".concat(t)}},{key:"getContract",value:function(t){return new(this.vaultinator3000.selectWeb3Connection(t).eth.Contract)(g,this.address)}},{key:"init",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(){var e,n,a,i,r,o,u;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.initialized){t.next=2;break}return t.abrupt("return");case 2:return e=this.vaultinator3000.makeMultiCall(!1),n=this.getContract(),a=[{versionString:n.methods.VERSION(),percentFactor:n.methods.PERCENT_FACTOR(),compoundRewardFee:n.methods.compoundRewardFee(),nativeLiquidityFee:n.methods.nativeLiquidityFee(),nativePoolFee:n.methods.nativePoolFee(),withdrawFee:n.methods.withdrawalFee()}],t.next=7,x.tryMultiCall(e,a,this.debugErrorString("init"),"VaultChef: init");case 7:i=t.sent,r=Object(v.a)(i,1),o=r[0],u=o[0],this.versionString=u.versionString,this.percentFactor=parseInt(u.percentFactor,10),this.compoundRewardFee=parseFloat(u.compoundRewardFee)/this.percentFactor,this.nativeLiquidityFee=parseFloat(u.nativeLiquidityFee)/this.percentFactor,this.nativePoolFee=parseFloat(u.nativePoolFee)/this.percentFactor,this.withdrawFee=parseFloat(u.withdrawFee)/this.percentFactor,this.version=b.getVersion(this.versionString),this.totalProfitFee=this.compoundRewardFee+this.nativeLiquidityFee+this.nativePoolFee,this.initialized=!0;case 20:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"reloadUserData",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(){var e,n,a,i,r,o,u;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.init();case 2:if(this.initialized&&null!==this.vaultinator3000.account){t.next=4;break}return t.abrupt("return");case 4:return e=this.vaultinator3000.makeMultiCall(!0),n=this.getContract(!0),a=[{referralInfo:n.methods.getReferralInfo(this.vaultinator3000.account),hasRole_superAdmin:n.methods.hasRole(this.role_superAdmin,this.vaultinator3000.account),hasRole_admin:n.methods.hasRole(this.role_admin,this.vaultinator3000.account),hasRole_manager:n.methods.hasRole(this.role_manager,this.vaultinator3000.account)}],t.next=9,x.tryMultiCall(e,a,this.debugErrorString("userData"),"VaultChef: userData");case 9:i=t.sent,r=Object(v.a)(i,1),o=r[0],u=o[0],this.referredBy=u.referralInfo[0],this.referrals=parseInt(u.referralInfo[1],10),this.hasRole_superAdmin=u.hasRole_superAdmin,this.hasRole_admin=u.hasRole_admin,this.hasRole_manager=u.hasRole_manager;case 18:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"checkRole_SuperAdmin",value:function(){return this.hasRole_superAdmin}},{key:"checkRole_Admin",value:function(){return this.checkRole_SuperAdmin()||this.hasRole_admin}},{key:"checkRole_Manager",value:function(){return this.checkRole_Admin()||this.hasRole_manager}},{key:"check_isTeam",value:function(){return this.checkRole_Manager()}},{key:"checkVaultApproved",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(e){var n;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.getContract(!0),t.next=3,x.tryCall(n.methods.checkVaultApproved(e,this.vaultinator3000.account),this.debugErrorString("checkApproved"),!1);case 3:return t.t0=t.sent,t.abrupt("return",!1!==t.t0);case 5:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"compound",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(e,n){var a;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=this.getContract(!0),t.next=3,this.vaultinator3000.trySend(a.methods.compound(e),this.vaultinator3000.account,this.debugErrorString("compound"),void 0,n);case 3:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"withdrawAll",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(e,n){return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.withdraw(e,this.vaultinator3000.web3_data.eth.abi.encodeParameter("int256","-1"),n);case 2:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"withdraw",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(e,n,a){var i;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=this.getContract(!0),t.next=3,this.vaultinator3000.trySend(i.methods.withdraw(e,n),this.vaultinator3000.account,this.debugErrorString("withdraw"),void 0,a);case 3:case"end":return t.stop()}}),t,this)})));return function(e,n,a){return t.apply(this,arguments)}}()},{key:"deposit",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(e,n,a){var i;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=this.getContract(!0),t.next=3,this.vaultinator3000.trySend(i.methods.deposit(e,n),this.vaultinator3000.account,this.debugErrorString("deposit"),void 0,a);case 3:case"end":return t.stop()}}),t,this)})));return function(e,n,a){return t.apply(this,arguments)}}()},{key:"setReferrer",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(e){var n;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.getContract(!0),t.next=3,this.vaultinator3000.trySend(n.methods.setReferrer(e),this.vaultinator3000.account,this.debugErrorString("setReferrer"),void 0,"Set ".concat(e," as referrer"));case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"scanEvent",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(e,n,a){return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",x.scanEvent(this.getContract(),e,n,a));case 1:case"end":return t.stop()}}),t,this)})));return function(e,n,a){return t.apply(this,arguments)}}()},{key:"scanEvent_SetReferrer",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(e,n){return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.scanEvent("SetReferrer",e,n));case 1:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"db_setSyncBlock",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(e){var n;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n="".concat(this.vaultinator3000.api_url,"?module=protocol&action=setSyncBlock"),n+="&chain=".concat(this.vaultinator3000.currentChain.id),n+="&block=".concat(e),t.next=6,b.fetch(n);case 6:t.next=10;break;case 8:t.prev=8,t.t0=t.catch(0);case 10:case"end":return t.stop()}}),t,this,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()},{key:"db_getSyncBlock",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(){var e,n;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e="".concat(this.vaultinator3000.api_url,"?module=protocol&action=getSyncBlock"),e+="&chain=".concat(this.vaultinator3000.currentChain.id),t.next=5,b.fetchJSON(e);case 5:void 0!==(n=t.sent).result&&(this.last.syncBlock=this.db.syncBlock,this.db.syncBlock=parseInt(n.result,10)),t.next=11;break;case 9:t.prev=9,t.t0=t.catch(0);case 11:return t.abrupt("return",this.db.syncBlock);case 12:case"end":return t.stop()}}),t,this,[[0,9]])})));return function(){return t.apply(this,arguments)}}()},{key:"db_addReferral",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(e){var n,a,i,r,o,u;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.blockNumber,t.next=3,this.vaultinator3000.selectWeb3Connection(!1).eth.getBlock(n);case 3:return a=t.sent.timestamp,i=new Date(1e3*a),r=e.returnValues[0],o=e.returnValues[1],u="".concat(this.vaultinator3000.api_url,"?module=wallet&action=setReferrer"),u+="&wallet=".concat(r),u+="&referrer=".concat(o),u+="&timestamp=".concat(a),t.next=13,b.fetch(u);case 13:return t.abrupt("return",{datetime:i,block:n});case 14:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"syncToBlockchain",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(e,n){var a,i,r,o,u,c,l;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=this.vaultinator3000.currentBlock,t.t0=parseInt,t.t1=Math,t.next=5,this.db_getSyncBlock();case 5:if(t.t2=t.sent,t.t3=this.vaultinator3000.currentChain.originBlock,t.t4=t.t1.max.call(t.t1,t.t2,t.t3),i=(0,t.t0)(t.t4,10),r=parseInt(Math.min(i+e,a),10),!(i>=r)){t.next=12;break}return t.abrupt("return");case 12:return t.next=14,this.scanEvent_SetReferrer(i,r);case 14:if(null!==(o=t.sent)){t.next=17;break}return t.abrupt("return");case 17:u=0;case 18:if(!(u<o.length)){t.next=27;break}return c=o[u],t.next=22,this.db_addReferral(c);case 22:l=t.sent,n&&void 0!==l&&n("[REFERRER] @ [".concat(l.block,"] ").concat(l.datetime.toLocaleDateString()," ").concat(l.datetime.toLocaleTimeString()));case 24:u+=1,t.next=18;break;case 27:return t.next=29,this.db_setSyncBlock(r);case 29:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()}]),t}(),T=C,M=function(){function t(e,n){Object(u.a)(this,t),this.cachedData=null,this.cacheDuration=n||60,this.reloadCallback=e,this.lastReload=null}return Object(c.a)(t,[{key:"getData",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(e,n){return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===n&&(n=!1),!(n||null===this.lastReload||((new Date).getTime()-this.lastReload)/1e3<this.cacheDuration)){t.next=6;break}return t.next=4,this.reloadCallback(e);case 4:this.cachedData=t.sent,this.lastReload=new Date;case 6:return t.abrupt("return",this.cachedData);case 7:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()}]),t}(),D=M,_=[{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[],name:"getReserves",outputs:[{internalType:"uint112",name:"",type:"uint112"},{internalType:"uint112",name:"",type:"uint112"},{internalType:"uint32",name:"",type:"uint32"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"token0",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"token1",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"recipient",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"sender",type:"address"},{internalType:"address",name:"recipient",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"}],S=function(){function t(e,n){var a=this;if(Object(u.a)(this,t),this.getPriceShare=function(t,e){var n=a.vaultinator3000.toBN(t),i=a.vaultinator3000.toBN(a.vaultinator3000.vaultChef.percentFactor),r=a.vaultinator3000.toBN(parseInt(e*a.vaultinator3000.vaultChef.percentFactor,10));return n.mul(r).div(i)},this.vaultinator3000=n,this.initialized=!1,this.initializedPrice=!1,this.initPair=e.initPair||!1,this.address=e.contract||"",this.symbol=e.symbol||"",e.icon){var i="".concat(this.vaultinator3000.baseUrl).concat(e.icon.substring(1));this.icon=i}this.linkSwap=e.linkSwap||"",this.router=e.router||"",this.decimals=void 0===e.decimals?18:e.decimals,this.one=this.vaultinator3000.toBN(10).pow(this.vaultinator3000.toBN(this.decimals)),this.token0=e.token0||null,this.token1=e.token1||null,this.oracleType=e.oracleType||"",this.oracleParameter=e.oracleParameter||"",this.unitPriceUSD="0",this.liquidityValue="0",this.liquidityAmount="0",this.token0Reserve="0",this.token1Reserve="0",this.totalSupply="0",this.lastPriceUpdate=null,this.cache_tokenPriceHistory=new D(function(){var t=Object(o.a)(Object(s.a)().mark((function t(e){return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",a.db_getHistoricPrice(e,!0));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),300),this.cache_tokenLPFeeHistory=new D(function(){var t=Object(o.a)(Object(s.a)().mark((function t(e){return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",a.db_getHistoricLPFee(e,!0));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),300),this.userBalance="0",this.userBalanceUSD="0"}return Object(c.a)(t,[{key:"debugErrorString",value:function(t){return"Token [".concat(this.symbol,"] failed at: ").concat(t)}},{key:"getContract",value:function(t){return new(this.vaultinator3000.selectWeb3Connection(t).eth.Contract)(_,this.address)}},{key:"makeRequest_init",value:function(){var t=this.getContract(),e={name:t.methods.name(),decimals:t.methods.decimals()};return""===this.symbol&&(e.symbol=t.methods.symbol()),this.initPair&&(e.token0=t.methods.token0(),e.token1=t.methods.token1()),(this.initPair||this.isLPToken())&&(e.reserves=t.methods.getReserves(),e.totalSupply=t.methods.totalSupply()),e}},{key:"processRequest_init",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(e){return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.name=e.name,this.decimals=e.decimals,""===this.symbol&&(this.symbol=e.symbol),this.initPair&&(this.token0=e.token0,this.token1=e.token1),(this.initPair||this.isLPToken())&&(this.totalSupply=e.totalSupply,this.token0Reserve=e.reserves[0],this.token1Reserve=e.reserves[1]),this.one=this.vaultinator3000.toBN(10).pow(this.vaultinator3000.toBN(this.decimals)),this.initialized=!0;case 7:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"init",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(){var e,n,a;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.initialized&&""!==this.address){t.next=2;break}return t.abrupt("return");case 2:return t.t0=x,t.t1=this.vaultinator3000.makeMultiCall(!1),t.next=6,this.makeRequest_init();case 6:return t.t2=t.sent,t.t3=[t.t2],t.t4=this.debugErrorString("init"),t.next=11,t.t0.tryMultiCall.call(t.t0,t.t1,t.t3,t.t4,"Token: init");case 11:return e=t.sent,n=Object(v.a)(e,1),a=n[0],t.next=16,this.processRequest_init(a[0]);case 16:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"makeRequest_pairInfo",value:function(){var t=this.getContract();return{reserves:t.methods.getReserves(),totalSupply:t.methods.totalSupply()}}},{key:"processRequest_pairInfo",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(e){return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.totalSupply=e.totalSupply,this.token0Reserve=e.reserves[0],this.token1Reserve=e.reserves[1],document.dispatchEvent(new CustomEvent("token_pairInfo",{detail:{address:this.address}}));case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"reloadPairInfo",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(){var e,n,a;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.init();case 2:if(this.initialized&&this.isLPToken()){t.next=4;break}return t.abrupt("return");case 4:return t.next=6,x.tryMultiCall(this.vaultinator3000.makeMultiCall(!1),[this.makeRequest_pairInfo()],this.debugErrorString("pairInfo"),"Token: pairInfo");case 6:return e=t.sent,n=Object(v.a)(e,1),a=n[0],t.next=11,this.processRequest_pairInfo(a[0]);case 11:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"makeRequest_userData",value:function(){return{userBalance:this.getContract(!0).methods.balanceOf(this.vaultinator3000.account)}}},{key:"processRequest_userData",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(e){return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.userBalance=e.userBalance,this.userBalanceUSD=this.getPriceUSDForAmount(this.userBalance),document.dispatchEvent(new CustomEvent("token_userInfo",{detail:{address:this.address}}));case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"reloadUserData",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(){var e,n,a;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.init();case 2:if(this.initialized){t.next=4;break}return t.abrupt("return");case 4:return t.t0=x,t.t1=this.vaultinator3000.makeMultiCall(!0),t.next=8,this.makeRequest_userData();case 8:return t.t2=t.sent,t.t3=[t.t2],t.t4=this.debugErrorString("userInfo"),t.next=13,t.t0.tryMultiCall.call(t.t0,t.t1,t.t3,t.t4,"Token: userData");case 13:return e=t.sent,n=Object(v.a)(e,1),a=n[0],t.next=18,this.processRequest_userData(a[0]);case 18:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"reloadPrice",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(){return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.vaultinator3000.oracle.reloadPriceData(this);case 2:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"addToWallet",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(){var e,n,a,i,r,o;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e=null!==this.token1?"LP Token":this.name,(n=this.icon||"").length>1&&"."===n[0]&&(n="".concat(window.location.origin,"/").concat(n.substring(1))),a=this.address,i=this.symbol.length<=11?this.symbol:e,r=this.decimals<0?18:this.decimals,o=n,t.next=10,window.ethereum.request({method:"wallet_watchAsset",params:{type:"ERC20",options:{address:a,symbol:i,decimals:r,image:o}}});case 10:t.next=14;break;case 12:t.prev=12,t.t0=t.catch(0);case 14:case"end":return t.stop()}}),t,this,[[0,12]])})));return function(){return t.apply(this,arguments)}}()},{key:"getPriceUSDForAmount",value:function(t){var e=this.vaultinator3000.toBN(this.liquidityValue),n=this.vaultinator3000.toBN(this.liquidityAmount);if(0===n.cmp(this.vaultinator3000.toBN(0)))return"0";var a=this.vaultinator3000.toBN(t);return e.mul(a).div(n).toString(10)}},{key:"isLPToken",value:function(){return!!this.token0&&!!this.token1}},{key:"isStable",value:function(){return"Stable"===this.oracleType}},{key:"hasStable",value:function(){if(this.isLPToken()){var t=this.vaultinator3000.findToken(this.token0),e=this.vaultinator3000.findToken(this.token1);return t.isStable()||e.isStable()}return!1}},{key:"getFullName",value:function(){if(this.isLPToken()){var t=this.vaultinator3000.findToken(this.token0),e=this.vaultinator3000.findToken(this.token1);return"".concat((null===t||void 0===t?void 0:t.symbol)||"???","-").concat((null===e||void 0===e?void 0:e.symbol)||"???")}return this.symbol}},{key:"priceUpdated",value:function(){document.dispatchEvent(new CustomEvent("token_priceInfo",{detail:{address:this.address}}))}},{key:"approve",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(e){var n;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.getContract(!0),t.next=3,this.vaultinator3000.trySend(n.methods.approve(e,this.vaultinator3000.web3_data.eth.abi.encodeParameter("int256","-1")),this.vaultinator3000.account,this.debugErrorString("approve"),void 0,"Approve ".concat(this.symbol));case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"checkApproved",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(e){var n;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.tryCall(this.getContract(!0).methods.allowance(this.vaultinator3000.account,e),this.debugErrorString("checkApproved"));case 2:return n=t.sent,t.abrupt("return","0"!==n);case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"balanceOf",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(e){var n;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.getContract(!1),t.abrupt("return",x.tryCall(n.methods.balanceOf(e),"balanceOf"));case 2:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"db_getHistoricPrice",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(e,n){var a,i;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=e||{},!n){t.next=15;break}return t.prev=2,i="".concat(this.vaultinator3000.api_url,"?module=token&action=getTokenPriceHistory"),i+="&chain=".concat(this.vaultinator3000.currentChain.id),i+="&token=".concat(this.address),i+="&days=".concat(e.days||30),t.next=9,b.fetchJSON(i);case 9:a=t.sent,t.next=14;break;case 12:t.prev=12,t.t0=t.catch(2);case 14:return t.abrupt("return",a);case 15:return t.abrupt("return",this.cache_tokenPriceHistory.getData(e));case 16:case"end":return t.stop()}}),t,this,[[2,12]])})));return function(e,n){return t.apply(this,arguments)}}()},{key:"db_getHistoricLPFee",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(e,n){var a,i;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=e||{},!n){t.next=15;break}return t.prev=2,i="".concat(this.vaultinator3000.api_url,"?module=token&action=getTokenLPFeeHistory"),i+="&chain=".concat(this.vaultinator3000.currentChain.id),i+="&token=".concat(this.address),i+="&days=".concat(e.days||30),t.next=9,b.fetchJSON(i);case 9:a=t.sent,t.next=14;break;case 12:t.prev=12,t.t0=t.catch(2);case 14:return t.abrupt("return",a);case 15:return t.abrupt("return",this.cache_tokenLPFeeHistory.getData(e));case 16:case"end":return t.stop()}}),t,this,[[2,12]])})));return function(e,n){return t.apply(this,arguments)}}()},{key:"db_setPrice",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(){var e,n,a,i,r;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this.vaultinator3000.toBN(0),n=this.vaultinator3000.toBN(this.liquidityAmount),a=this.vaultinator3000.toBN(this.liquidityValue),0!==n.cmp(this.vaultinator3000.toBN(0))&&(e=a.mul(this.one).div(n)),0===(i=parseFloat(x.fullFormatTokens(e.toString(10),this.vaultinator3000.stableToken)))){t.next=17;break}return r="".concat(this.vaultinator3000.api_url,"?module=token&action=setTokenPrice"),r+="&chain=".concat(this.vaultinator3000.currentChain.id),r+="&token=".concat(this.address),r+="&timestamp=".concat(parseInt((new Date).getTime()/1e3,10)),r+="&price=".concat(i.toFixed(8)),r+="&totalSupply=".concat(x.abiEncodeUint256(this.vaultinator3000.toBN(this.totalSupply))),r+="&liquidityAmount=".concat(x.abiEncodeUint256(n)),r+="&liquidityValue=".concat(x.abiEncodeUint256(a)),this.isLPToken()&&(r+="&token0Reserve=".concat(x.abiEncodeUint256(this.vaultinator3000.toBN(this.token0Reserve))),r+="&token1Reserve=".concat(x.abiEncodeUint256(this.vaultinator3000.toBN(this.token1Reserve)))),t.next=17,b.fetch(r);case 17:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()}],[{key:"batchInit",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(e,n){var a,i,r,o,u,c,l,d,p;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=[],i=[],e.forEach((function(t){t.initialized||""===t.address||(a.push(t),i.push(t.makeRequest_init()))})),0===a.length){t.next=19;break}return r=n.makeMultiCall(!1),t.next=7,x.tryMultiCall(r,i,"[Token] batch init","Token: init");case 7:o=t.sent,u=Object(v.a)(o,1),c=u[0],l=0;case 11:if(!(l<a.length)){t.next=19;break}return d=a[l],p=c[l],t.next=16,d.processRequest_init(p);case 16:l+=1,t.next=11;break;case 19:return t.abrupt("return",e.filter((function(t){return t.initialized})));case 20:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"batchLoadPairInfo",value:function(){var e=Object(o.a)(Object(s.a)().mark((function e(n,a){var i,r,o,u,c,l,d,p,h;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=[],r=[],e.next=4,t.batchInit(n,a);case 4:if(e.sent.forEach((function(t){t.isLPToken()&&(i.push(t),r.push(t.makeRequest_pairInfo()))})),0!==i.length){e.next=8;break}return e.abrupt("return");case 8:return o=a.makeMultiCall(!1),e.next=11,x.tryMultiCall(o,r,"[Token] batch pairInfo","Token: pairInfo");case 11:u=e.sent,c=Object(v.a)(u,1),l=c[0],d=0;case 15:if(!(d<i.length)){e.next=23;break}return p=i[d],h=l[d],e.next=20,p.processRequest_pairInfo(h);case 20:d+=1,e.next=15;break;case 23:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"batchLoadUserData",value:function(){var e=Object(o.a)(Object(s.a)().mark((function e(n,a){var i,r,o,u,c,l,d,p,h;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=[],r=[],e.next=4,t.batchInit(n,a);case 4:if(e.sent.forEach((function(t){i.push(t),r.push(t.makeRequest_userData())})),0!==i.length){e.next=8;break}return e.abrupt("return");case 8:return o=a.makeMultiCall(!0),e.next=11,x.tryMultiCall(o,r,"[Token] batch userInfo","Token: userData");case 11:u=e.sent,c=Object(v.a)(u,1),l=c[0],d=0;case 15:if(!(d<i.length)){e.next=23;break}return p=i[d],h=l[d],e.next=20,p.processRequest_userData(h);case 20:d+=1,e.next=15;break;case 23:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"batchReloadPrice",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(e){var n,a;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=0;case 1:if(!(n<e.length)){t.next=8;break}return a=e[n],t.next=5,a.reloadPrice();case 5:n+=1,t.next=1;break;case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}]),t}(),P=S,L=[{inputs:[{internalType:"contract IMoonToken",name:"_moonToken",type:"address"},{internalType:"uint256",name:"_minBuyPrice",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_user",type:"address"},{indexed:!1,internalType:"uint256",name:"_amount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"_balance",type:"uint256"},{indexed:!1,internalType:"uint256",name:"_circulatingSupply",type:"uint256"}],name:"AddLiquidity",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_user",type:"address"},{indexed:!1,internalType:"uint256",name:"_amount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"_value",type:"uint256"},{indexed:!1,internalType:"uint256",name:"_price",type:"uint256"},{indexed:!1,internalType:"uint256",name:"_fee",type:"uint256"}],name:"Buy",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"string",name:"_key",type:"string"},{indexed:!1,internalType:"uint256",name:"_value",type:"uint256"}],name:"ConfigChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_user",type:"address"},{indexed:!1,internalType:"uint256",name:"_amount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"_balance",type:"uint256"},{indexed:!1,internalType:"uint256",name:"_circulatingSupply",type:"uint256"}],name:"RemoveLiquidity",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_user",type:"address"},{indexed:!1,internalType:"uint256",name:"_amount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"_value",type:"uint256"}],name:"Sell",type:"event"},{inputs:[],name:"PERCENT_FACTOR",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"ROLE_ADMIN",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"ROLE_MANAGER",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"ROLE_MINTER",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"ROLE_SECURITY_ADMIN",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"ROLE_SECURITY_MOD",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"ROLE_SUPER_ADMIN",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"VERSION",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_amount",type:"uint256"}],name:"addLiquidity",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"availableSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"burnedSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_amount",type:"uint256"}],name:"buy",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"buyPriceFee",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"buyPriceMultiplicator",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"circulatingSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"deadAddress",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"emissionPerDay",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"feeAddress",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"contract IToken",name:"_token",type:"address"}],name:"inCaseTokensGetStuck",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"minBuyPrice",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"mintableSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"mintedEmission",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"moonToken",outputs:[{internalType:"contract IMoonToken",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"peggedToken",outputs:[{internalType:"contract IToken",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"router",outputs:[{internalType:"contract IUniRouterV2",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_amount",type:"uint256"}],name:"sell",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_fee",type:"uint256"}],name:"setBuyPriceFee",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_multiplicator",type:"uint256"}],name:"setBuyPriceMultiplicator",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_emission",type:"uint256"}],name:"setEmissionPerDay",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_feeAddress",type:"address"}],name:"setFeeAddress",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract IUniRouterV2",name:"_router",type:"address"}],name:"setRouter",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"startTime",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"contract IToken",name:"_token",type:"address"}],name:"swapForLiquidity",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"tokenPrice",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_amount",type:"uint256"}],name:"tokenPriceForAmount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"tokenValue",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_amount",type:"uint256"}],name:"tokenValueForAmount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalBalance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalMinted",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"wrappedBalance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"wrappedCoin",outputs:[{internalType:"contract IToken",name:"",type:"address"}],stateMutability:"view",type:"function"}],A=function(){function t(e){var n=this;Object(u.a)(this,t),this.initialized=!1,this.vaultinator3000=e,this.chainID=this.vaultinator3000.moonConfig.moonChain,this.address=this.vaultinator3000.moonConfig.moonChef,this.versionString="0.0",this.version=b.getVersion(this.versionString),this.percentFactor=1e6,this.moonToken=null,this.peggedToken=null,this.moonTokenAddress="",this.peggedTokenAddress="",this.minBuyPrice="0",this.buyPriceMultiplicator=0,this.buyPriceFee=0,this.feeAddress="",this.mintableSupply="0",this.totalMinted="0",this.emissionPerDay="0",this.totalSupply="0",this.burnedSupply="0",this.circulatingSupply="0",this.availableSupply="0",this.burnedSupply="0",this.totalBalance="0",this.tokenValue="0",this.tokenPrice="0",this.wrappedBalance="0",this.wrappedBalanceUSD="0",this.isValidChain()||(this.moonToken=new P({symbol:"MOON",icon:"./assets/tokens/MOON.png"},e)),this.cache_liquidityData=new D(function(){var t=Object(o.a)(Object(s.a)().mark((function t(e){return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",n.db_getLiquidityData(e,!0));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),60),this.db={syncBlock:0,originBlock:0},this.last={syncBlock:0}}return Object(c.a)(t,[{key:"debugErrorString",value:function(t){return"MoonChef failed at: ".concat(t)}},{key:"getContract",value:function(t){return new(this.vaultinator3000.selectWeb3Connection(t).eth.Contract)(L,this.address)}},{key:"isValidChain",value:function(){var t;return(null===(t=this.vaultinator3000.currentChain)||void 0===t?void 0:t.id)===this.chainID}},{key:"init",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(){var e,n,a,i,r,o,u;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.initialized&&this.isValidChain()){t.next=2;break}return t.abrupt("return");case 2:return e=this.vaultinator3000.makeMultiCall(!1),n=this.getContract(),a=[{percentFactor:n.methods.PERCENT_FACTOR(),versionString:n.methods.VERSION(),moonTokenAddress:n.methods.moonToken(),peggedTokenAddress:n.methods.peggedToken(),minBuyPrice:n.methods.minBuyPrice(),feeAddress:n.methods.feeAddress(),emissionPerDay:n.methods.emissionPerDay(),buyPriceFee:n.methods.buyPriceFee(),buyPriceMultiplicator:n.methods.buyPriceMultiplicator()}],t.next=7,x.tryMultiCall(e,a,this.debugErrorString("init"),"MoonChef: init");case 7:i=t.sent,r=Object(v.a)(i,1),o=r[0],u=o[0],this.percentFactor=parseInt(u.percentFactor,10),this.versionString=u.versionString,this.moonTokenAddress=u.moonTokenAddress,this.peggedTokenAddress=u.peggedTokenAddress,this.minBuyPrice=u.minBuyPrice,this.buyPriceMultiplicator=parseFloat(u.buyPriceMultiplicator)/this.percentFactor,this.buyPriceFee=parseFloat(u.buyPriceFee)/this.percentFactor,this.feeAddress=u.feeAddress,this.emissionPerDay=u.emissionPerDay,this.version=b.getVersion(this.versionString),this.moonToken=new P({symbol:"MOON",contract:this.moonTokenAddress,icon:"./assets/tokens/MOON.png"},this.vaultinator3000),this.peggedToken=this.vaultinator3000.findToken(this.peggedTokenAddress),this.vaultinator3000.addDepositToken(this.peggedToken),this.vaultinator3000.addDepositToken(this.moonToken),null===this.vaultinator3000.findToken(this.moonToken.address)&&this.vaultinator3000.tokens.push(this.moonToken),this.initialized=!0;case 27:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"reloadData",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(){var e,n,a,i,r,o,u;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.init(),this.initialized&&this.isValidChain()){t.next=3;break}return t.abrupt("return");case 3:return e=this.vaultinator3000.makeMultiCall(!1),n=this.getContract(),a=[{totalSupply:n.methods.totalSupply(),circulatingSupply:n.methods.circulatingSupply(),availableSupply:n.methods.availableSupply(),burnedSupply:n.methods.burnedSupply(),mintableSupply:n.methods.mintableSupply(),totalBalance:n.methods.totalBalance(),wrappedBalance:n.methods.wrappedBalance(),tokenValue:n.methods.tokenValue(),tokenPrice:n.methods.tokenPrice(),totalMinted:n.methods.totalMinted()}],t.next=8,x.tryMultiCall(e,a,this.debugErrorString("reloadData"),"MoonChef: reloadData");case 8:return i=t.sent,r=Object(v.a)(i,1),o=r[0],u=o[0],this.totalSupply=u.totalSupply,this.circulatingSupply=u.circulatingSupply,this.availableSupply=u.availableSupply,this.burnedSupply=u.burnedSupply,this.totalBalance=u.totalBalance,this.wrappedBalance=u.wrappedBalance,this.tokenValue=u.tokenValue,this.tokenPrice=u.tokenPrice,this.mintableSupply=u.mintableSupply,this.totalMinted=u.totalMinted,t.next=24,this.vaultinator3000.wrappedCoin.getPriceUSDForAmount(this.wrappedBalance);case 24:this.wrappedBalanceUSD=t.sent,document.dispatchEvent(new CustomEvent("moonChef_info"));case 26:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"checkApprovedMoon",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(){return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.moonToken.checkApproved(this.address));case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"checkApprovedPegged",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(){return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.peggedToken.checkApproved(this.address));case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"buy",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(e){var n;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.getContract(!0),t.next=3,this.vaultinator3000.trySend(n.methods.buy(e),this.vaultinator3000.account,this.debugErrorString("buy"));case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"sell",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(e){var n;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.getContract(!0),t.next=3,this.vaultinator3000.trySend(n.methods.sell(e),this.vaultinator3000.account,this.debugErrorString("sell"));case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"swapForLiquidity",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(e){var n;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.getContract(!0),t.next=3,this.vaultinator3000.trySend(n.methods.swapForLiquidity(e.address),this.vaultinator3000.account,this.debugErrorString("swapForLiquidity"));case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"getPriceUSDForAmount",value:function(t){var e=this.vaultinator3000.toBN(t),n=this.vaultinator3000.toBN(this.circulatingSupply),a=this.vaultinator3000.toBN(this.totalBalance),i=this.vaultinator3000.toBN(0);return 0!==n.cmp(this.vaultinator3000.toBN(0))&&(i=a.mul(e).div(n)),i.toString(10)}},{key:"getBalanceUSD",value:function(){return this.getPriceUSDForAmount(this.moonToken.userBalance)}},{key:"scanEvent",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(e,n,a){var i,r;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===n&&(n=this.vaultinator3000.currentBlock-5e3),void 0===a&&(a="latest"),i=null,r={fromBlock:n,toBlock:a},t.prev=4,t.next=7,this.getContract().getPastEvents(e,r);case 7:i=t.sent,t.next=12;break;case 10:t.prev=10,t.t0=t.catch(4);case 12:return t.abrupt("return",i);case 13:case"end":return t.stop()}}),t,this,[[4,10]])})));return function(e,n,a){return t.apply(this,arguments)}}()},{key:"scanEvent_AddLiquidity",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(e,n){return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.scanEvent("AddLiquidity",e,n));case 1:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"scanEvent_RemoveLiquidity",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(e,n){return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.scanEvent("RemoveLiquidity",e,n));case 1:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"db_getLiquidityData",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(e,n){var a,i;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=e||{},!n){t.next=13;break}return t.prev=2,i="".concat(this.vaultinator3000.api_url,"?module=token&action=getTokenLiquidity"),i+="&days=".concat(e.days||30),t.next=7,b.fetchJSON(i);case 7:a=t.sent,t.next=12;break;case 10:t.prev=10,t.t0=t.catch(2);case 12:return t.abrupt("return",a);case 13:return t.abrupt("return",this.cache_liquidityData.getData(e));case 14:case"end":return t.stop()}}),t,this,[[2,10]])})));return function(e,n){return t.apply(this,arguments)}}()},{key:"db_getSyncBlock",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(){var e,n;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e="".concat(this.vaultinator3000.api_url,"?module=token&action=getTokenLiquiditySyncBlock"),t.next=4,b.fetchJSON(e);case 4:void 0!==(n=t.sent).block&&(this.db.syncBlock=parseInt(n.block,10),this.last.syncBlock=this.db.syncBlock),t.next=10;break;case 8:t.prev=8,t.t0=t.catch(0);case 10:return t.abrupt("return",this.db.syncBlock);case 11:case"end":return t.stop()}}),t,this,[[0,8]])})));return function(){return t.apply(this,arguments)}}()},{key:"db_getOriginBlock",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(){var e,n;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0!==this.db.originBlock){t.next=11;break}return t.prev=1,e="".concat(this.vaultinator3000.api_url,"?module=token&action=getTokenLiquidityOriginBlock"),t.next=5,b.fetchJSON(e);case 5:void 0!==(n=t.sent).block&&(this.db.originBlock=parseInt(n.block,10)),t.next=11;break;case 9:t.prev=9,t.t0=t.catch(1);case 11:return t.abrupt("return",this.db.originBlock);case 12:case"end":return t.stop()}}),t,this,[[1,9]])})));return function(){return t.apply(this,arguments)}}()},{key:"db_setSyncBlock",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(e){var n;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n="".concat(this.vaultinator3000.api_url,"?module=token&action=setTokenLiquiditySyncBlock"),n+="&block=".concat(e),t.next=5,b.fetchJSON(n);case 5:t.next=9;break;case 7:t.prev=7,t.t0=t.catch(0);case 9:case"end":return t.stop()}}),t,this,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},{key:"db_modifyLiquidity",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(e,n){var a,i,r,o,u,c,l,d,p,h,y,m,v,f;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.blockNumber,i=e.transactionIndex,r=e.logIndex,t.next=5,this.vaultinator3000.selectWeb3Connection(!1).eth.getBlock(a);case 5:return o=t.sent.timestamp,u=new Date(1e3*o),c=e.returnValues[0],l=e.returnValues[1],d=e.returnValues[2],p=e.returnValues[3],h=this.vaultinator3000.toBN(d),y=this.vaultinator3000.toBN(p),m=this.vaultinator3000.toBN(0),0!==y.cmp(this.vaultinator3000.toBN(0))&&(m=h.mul(this.vaultinator3000.moonChef.moonToken.one).div(y)),v=parseFloat(x.fullFormatTokens(m.toString(10),this.vaultinator3000.moonChef.peggedToken)),f="".concat(this.vaultinator3000.api_url,"?module=token&action=").concat(n?"add":"remove","TokenLiquidity"),f+="&block=".concat(a),f+="&transactionIndex=".concat(i),f+="&logIndex=".concat(r),f+="&timestamp=".concat(o),f+="&wallet=".concat(c),f+="&amount=".concat(x.abiEncodeUint256(l)),f+="&peggedBalance=".concat(x.abiEncodeUint256(d)),f+="&circulatingSupply=".concat(x.abiEncodeUint256(p)),f+="&unitPrice=".concat(v.toFixed(8)),t.next=28,b.fetch(f);case 28:return t.abrupt("return",{timestamp:o,datetime:u,block:a});case 29:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"db_addLiquidity",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(e){return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.db_modifyLiquidity(e,!0));case 1:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"db_removeLiquidity",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(e){return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.db_modifyLiquidity(e,!1));case 1:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"syncToBlockchain",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(e,n){var a,i,r,o,u,c,l,d,p,h,y;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=this.vaultinator3000.currentBlock,t.t0=parseInt,t.t1=Math,t.next=5,this.db_getSyncBlock();case 5:return t.t2=t.sent,t.next=8,this.db_getOriginBlock();case 8:if(t.t3=t.sent,t.t4=this.last.syncBlock,t.t5=t.t1.max.call(t.t1,t.t2,t.t3,t.t4),i=(0,t.t0)(t.t5,10),r=parseInt(Math.min(i+e,a),10),!(i>=r)){t.next=15;break}return t.abrupt("return");case 15:return t.next=17,this.scanEvent_AddLiquidity(i,r);case 17:if(null===(o=t.sent)){t.next=29;break}u=0;case 20:if(!(u<o.length)){t.next=29;break}return c=o[u],t.next=24,this.db_addLiquidity(c);case 24:l=t.sent,n&&void 0!==l&&n("[Token] add @ [".concat(l.block,"] ").concat(l.datetime.toLocaleDateString()," ").concat(l.datetime.toLocaleTimeString()));case 26:u+=1,t.next=20;break;case 29:return t.next=31,this.scanEvent_RemoveLiquidity(i,r);case 31:if(null===(d=t.sent)){t.next=43;break}p=0;case 34:if(!(p<d.length)){t.next=43;break}return h=d[p],t.next=38,this.db_removeLiquidity(h);case 38:y=t.sent,n&&void 0!==y&&n("[Token] remove @ [".concat(y.block,"] ").concat(y.datetime.toLocaleDateString()," ").concat(y.datetime.toLocaleTimeString()));case 40:p+=1,t.next=34;break;case 43:this.last.syncBlock=r,this.db_setSyncBlock(r);case 45:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()}]),t}(),F=A,R=[{anonymous:!1,inputs:[{indexed:!0,internalType:"string",name:"_key",type:"string"},{indexed:!1,internalType:"uint256",name:"_value",type:"uint256"}],name:"ConfigChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_user",type:"address"},{indexed:!1,internalType:"bool",name:"_deposit",type:"bool"},{indexed:!1,internalType:"bool",name:"_withdraw",type:"bool"},{indexed:!1,internalType:"bool",name:"_compound",type:"bool"}],name:"Pause",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_user",type:"address"},{indexed:!1,internalType:"bool",name:"_deposit",type:"bool"},{indexed:!1,internalType:"bool",name:"_withdraw",type:"bool"},{indexed:!1,internalType:"bool",name:"_compound",type:"bool"}],name:"Unpause",type:"event"},{inputs:[],name:"BASE_VERSION",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"PERCENT_FACTOR",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"ROLE_ADMIN",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"ROLE_COMPOUNDER",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"ROLE_DEPLOYER",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"ROLE_MANAGER",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"ROLE_SECURITY_ADMIN",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"ROLE_SECURITY_MOD",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"ROLE_SUPER_ADMIN",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"VERSION",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"additionalRewardToken",outputs:[{internalType:"contract IToken",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"autoCompoundBeforeDeposit",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"autoCompoundBeforeWithdraw",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"autoConvertDust",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"balanceOfDust",outputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"balanceOfPool",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"balanceOfReward",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"balanceOfStrategy",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"beforeDeposit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"beforeWithdraw",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_user",type:"address"},{internalType:"bool",name:"_revertOnFail",type:"bool"}],name:"compound",outputs:[{internalType:"bool",name:"",type:"bool"},{internalType:"uint256",name:"",type:"uint256"},{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"convertDustToReward",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"deposit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"depositToken",outputs:[{internalType:"contract IToken",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"dustAmountSinceLastCompound",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"isPoolFarmable",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"lastHarvestBlock",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"lpToken0",outputs:[{internalType:"contract IToken",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"lpToken1",outputs:[{internalType:"contract IToken",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"masterChef",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"minAdditionalRewardToReward",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"minDustToken0",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"minDustToken1",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"minRewardToDeposit",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"panic",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bool",name:"_pauseDeposit",type:"bool"},{internalType:"bool",name:"_pauseWithdraw",type:"bool"},{internalType:"bool",name:"_pauseCompound",type:"bool"}],name:"pause",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"pauseCompound",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"pauseDeposit",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"pauseWithdraw",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"poolAllocPoints",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"poolCompoundReward",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"poolDepositFee",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"poolEndBlock",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"poolEndTime",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"poolHarvestLockDelay",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"poolHarvestLockUntil",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"poolID",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"poolPending",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"poolStartBlock",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"poolWithdrawFee",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"retireStrategy",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"rewardToken",outputs:[{internalType:"contract IToken",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"router",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bool",name:"_autoConvertDust",type:"bool"},{internalType:"bool",name:"_autoCompoundBeforeDeposit",type:"bool"},{internalType:"bool",name:"_autoCompoundBeforeWithdraw",type:"bool"}],name:"setAutoActions",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_minDust0",type:"uint256"},{internalType:"uint256",name:"_minDust1",type:"uint256"}],name:"setMinDustAmount",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_minReward",type:"uint256"},{internalType:"uint256",name:"_minAdditionalReward",type:"uint256"}],name:"setMinRewardAmount",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bool",name:"_unpauseDeposit",type:"bool"},{internalType:"bool",name:"_unpauseWithdraw",type:"bool"},{internalType:"bool",name:"_unpauseCompound",type:"bool"}],name:"unpause",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"vault",outputs:[{internalType:"contract IVault",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"vaultChef",outputs:[{internalType:"contract IVaultChef",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_amount",type:"uint256"}],name:"withdraw",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"wrappedCoin",outputs:[{internalType:"contract IToken",name:"",type:"address"}],stateMutability:"view",type:"function"}],N=function(){function t(e){Object(u.a)(this,t),this.debugErrorString=function(t){return"VaultStrategy failed at: ".concat(t)},this.initialized=!1,this.address=e,this.versionString="0.0",this.version=b.getVersion(this.versionString),this.baseVersionString="0.0",this.baseVersion=b.getVersion(this.baseVersionString),this.rewardTokenAddress="",this.additionalRewardTokenAddress="",this.minAdditionalRewardToReward="0",this.minRewardToDeposit="0",this.minDustToken0="0",this.minDustToken1="0",this.autoConvertDust=!1,this.autoCompoundBeforeDeposit=!1,this.autoCompoundBeforeWithdraw=!1}return Object(c.a)(t,[{key:"getContract",value:function(t){return new(window.chef.selectWeb3Connection(t).eth.Contract)(R,this.address)}},{key:"reloadData",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(){var e,n,a,i,r,o,u;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=window.chef.makeMultiCall(!1),n=this.getContract(),a=[{versionString:n.methods.VERSION(),baseVersionString:n.methods.BASE_VERSION(),rewardToken:n.methods.rewardToken(),additionalRewardToken:n.methods.additionalRewardToken(),autoConvertDust:n.methods.autoConvertDust(),autoCompoundBeforeDeposit:n.methods.autoCompoundBeforeDeposit(),autoCompoundBeforeWithdraw:n.methods.autoCompoundBeforeWithdraw(),minRewardToDeposit:n.methods.minRewardToDeposit(),minAdditionalRewardToReward:n.methods.minAdditionalRewardToReward(),minDustToken0:n.methods.minDustToken0(),minDustToken1:n.methods.minDustToken0()}],t.next=5,x.tryMultiCall(e,a,this.debugErrorString("reloadData"),"VaultStrategy: reloadData");case 5:i=t.sent,r=Object(v.a)(i,1),o=r[0],u=o[0],this.versionString=u.versionString,this.baseVersionString=u.baseVersionString,this.rewardTokenAddress=u.rewardTokenAddress,this.additionalRewardTokenAddress=u.additionalRewardTokenAddress,this.autoConvertDust=u.autoConvertDust,this.autoCompoundBeforeDeposit=u.autoCompoundBeforeDeposit,this.autoCompoundBeforeWithdraw=u.autoCompoundBeforeWithdraw,this.minRewardToDeposit=u.minRewardToDeposit,this.minAdditionalRewardToReward=u.minAdditionalRewardToReward,this.minDustToken0=u.minDustToken0,this.minDustToken1=u.minDustToken1,this.version=b.getVersion(this.versionString),this.baseVersion=b.getVersion(this.baseVersionString),this.initialized=!0,document.dispatchEvent(new CustomEvent("vaultStrategy_info",{detail:{address:this.address}}));case 24:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"convertDustToReward",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(){var e;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.getContract(!0),t.next=3,x.trySend(e.methods.convertDustToReward(),window.chef.account,this.debugErrorString("convertDustToReward"));case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"setAutoActions",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(e,n,a){var i;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=this.getContract(!0),t.next=3,window.chef.trySend(i.methods.setAutoActions(e,n,a),window.chef.account,this.debugErrorString("setAutoActions"),void 0,"setAutoActions");case 3:case"end":return t.stop()}}),t,this)})));return function(e,n,a){return t.apply(this,arguments)}}()},{key:"setMinRewardAmount",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(e,n){var a;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=this.getContract(!0),t.next=3,window.chef.trySend(a.methods.setMinRewardAmount(e,n),window.chef.account,this.debugErrorString("setMinRewardAmount"),void 0,"setMinRewardAmount");case 3:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"setMinDustAmount",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(e,n){var a;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=this.getContract(!0),t.next=3,window.chef.trySend(a.methods.setMinDustAmount(e,n),window.chef.account,this.debugErrorString("setMinDustAmount"),void 0,"setMinDustAmount");case 3:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()}]),t}(),B=N,I=[{inputs:[{internalType:"contract IVaultChef",name:"_vaultChef",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_user",type:"address"},{indexed:!1,internalType:"uint256",name:"_totalDepositBefore",type:"uint256"},{indexed:!1,internalType:"uint256",name:"_totalDepositAfter",type:"uint256"},{indexed:!1,internalType:"uint256",name:"_reward",type:"uint256"},{indexed:!1,internalType:"uint256",name:"_dust",type:"uint256"}],name:"Compound",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_user",type:"address"},{indexed:!1,internalType:"uint256",name:"_amount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"_depositedAmount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"_userDepositBefore",type:"uint256"},{indexed:!1,internalType:"uint256",name:"_userDepositAfter",type:"uint256"},{indexed:!1,internalType:"uint256",name:"_totalDepositAfter",type:"uint256"}],name:"Deposit",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"contract IVaultStrategy",name:"_implementation",type:"address"}],name:"NewStrategyCandidate",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_user",type:"address"},{indexed:!1,internalType:"bool",name:"_deposit",type:"bool"},{indexed:!1,internalType:"bool",name:"_withdraw",type:"bool"},{indexed:!1,internalType:"bool",name:"_compound",type:"bool"}],name:"Pause",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_user",type:"address"},{indexed:!1,internalType:"bool",name:"_deposit",type:"bool"},{indexed:!1,internalType:"bool",name:"_withdraw",type:"bool"},{indexed:!1,internalType:"bool",name:"_compound",type:"bool"}],name:"Unpause",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"contract IVaultStrategy",name:"_implementation",type:"address"}],name:"UpgradeStrategy",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_user",type:"address"},{indexed:!1,internalType:"uint256",name:"_amount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"_withdrawnAmount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"_userDepositBefore",type:"uint256"},{indexed:!1,internalType:"uint256",name:"_userDepositAfter",type:"uint256"},{indexed:!1,internalType:"uint256",name:"_totalDepositAfter",type:"uint256"}],name:"Withdraw",type:"event"},{inputs:[],name:"ROLE_ADMIN",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"ROLE_COMPOUNDER",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"ROLE_DEPLOYER",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"ROLE_MANAGER",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"ROLE_SECURITY_ADMIN",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"ROLE_SECURITY_MOD",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"ROLE_SUPER_ADMIN",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"STRATEGY_APPROVAL_DELAY",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"VERSION",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"balance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_user",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"balanceOfStrategy",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"balanceOfVault",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_user",type:"address"}],name:"checkApproved",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_user",type:"address"}],name:"compound",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_user",type:"address"},{internalType:"uint256",name:"_amount",type:"uint256"}],name:"deposit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_user",type:"address"}],name:"depositAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"depositToken",outputs:[{internalType:"contract IToken",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"contract IToken",name:"_token",type:"address"}],name:"inCaseTokensGetStuck",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"isPoolFarmable",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"lastCompound",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"panic",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bool",name:"_pauseDeposit",type:"bool"},{internalType:"bool",name:"_pauseWithdraw",type:"bool"},{internalType:"bool",name:"_pauseCompound",type:"bool"}],name:"pause",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"poolAllocPoints",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"poolCompoundReward",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"poolDepositFee",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"poolEndBlock",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"poolEndTime",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"poolHarvestLockDelay",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"poolHarvestLockUntil",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"poolPending",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"poolStartBlock",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"poolWithdrawFee",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"contract IVaultStrategy",name:"_implementation",type:"address"}],name:"proposeStrategy",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"rewardToken",outputs:[{internalType:"contract IToken",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"strategy",outputs:[{internalType:"contract IVaultStrategy",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"strategyCandidate",outputs:[{internalType:"contract IVaultStrategy",name:"implementation",type:"address"},{internalType:"uint256",name:"proposedTime",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalShares",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bool",name:"_unpauseDeposit",type:"bool"},{internalType:"bool",name:"_unpauseWithdraw",type:"bool"},{internalType:"bool",name:"_unpauseCompound",type:"bool"}],name:"unpause",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"upgradeStrat",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"userMap",outputs:[{internalType:"uint256",name:"shares",type:"uint256"},{internalType:"uint256",name:"lastDepositOrWithdrawBlock",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_user",type:"address"}],name:"userPending",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"vaultChef",outputs:[{internalType:"contract IVaultChef",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_user",type:"address"},{internalType:"uint256",name:"_amount",type:"uint256"}],name:"withdraw",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_user",type:"address"}],name:"withdrawAll",outputs:[],stateMutability:"nonpayable",type:"function"}],E=function(){function t(e,n,a){var i=this;Object(u.a)(this,t),this.initialized=!1,this.initializedInfo=!1,this.initializedUser=!1,this.initializedDB=!1,this.vaultinator3000=a,this.api_url=this.vaultinator3000.api_url,this.id=e.id,this.address=e.contract,this.name=e.name,this.platform=n,this.originBlock=e.originBlock||0,this.icon=e.icon||"",this.depositTokenAddress=e.depositToken,this.rewardTokenAddress=e.rewardToken,this.strategyAddress="",this.strategy=null,this.additionalDepositTax=(e.additionalDepositTax||0)/100,this.additionalWithdrawTax=(e.additionalWithdrawTax||0)/100,this.versionString="0.0",this.version=b.getVersion(this.versionString),this.router="",this.depositFee=0,this.withdrawFee=0,this.totalDepositFeeTaxFactor=1,this.totalWithdrawFeeTaxFactor=1,this.calculateFees(),this.totalDeposit="0",this.totalPending="0",this.userDeposit="0",this.userPending="0",this.userProfitLoss=0,this.apr=0,this.dailyAPR=0,this.dailyLPFeeAPR=0,this.lpFeeAPR=0,this.compoundedDailyAPR=0,this.compounds24h=1,this.compoundedAPY=0,this.combinedAPY=0,this.combinedDailyAPR=0,this.lastCompound=null,this.isFarmable=!1,this.allocPoints=1,this.startBlock=0,this.endBlock=0,this.endTime=null,this.harvestLockUntil=null,this.isApproved=!1,this.proposedStrategy="0",this.proposedTime=0,this.totalDepositUSD="0",this.totalPendingUSD="0",this.userDepositUSD="0",this.userPendingUSD="0",this.compoundRewardUSD="0",this.roiDailyAPR=0,this.roiWeeklyAPR=0,this.roiMonthlyAPR=0,this.roiYearlyAPR=0,this.roiDailyAPY=0,this.roiWeeklyAPY=0,this.roiMonthlyAPY=0,this.roiYearlyAPY=0,this.cache_vaultCompoundHistory=new D(function(){var t=Object(o.a)(Object(s.a)().mark((function t(e){return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",i.db_getHistoricCompounds(e,!0));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),60),this.dailyAPR=0,this.db={syncBlock:0,processBlock:0,lastCompound:0,lastCompoundUTC:new Date(0)},this.last={syncBlock:0,processBlock:0},this.lastUserTransaction=null,this.depositToken=this.vaultinator3000.findToken(this.depositTokenAddress),this.rewardToken=this.vaultinator3000.findToken(this.rewardTokenAddress),this.vaultinator3000.addDepositToken(this.depositToken)}return Object(c.a)(t,[{key:"debugErrorString",value:function(t){return"Vault [".concat(this.id,"] failed at: ").concat(t)}},{key:"getContract",value:function(t){return new(this.vaultinator3000.selectWeb3Connection(t).eth.Contract)(I,this.address)}},{key:"getStrategy",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(){return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!==this.strategy){t.next=3;break}return t.next=3,this.reloadVaultInfo();case 3:return t.abrupt("return",this.strategy);case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"makeRequest_init",value:function(){var t=this.getContract();return{versionString:t.methods.VERSION(),depositToken:t.methods.depositToken(),rewardToken:t.methods.rewardToken(),depositFee:t.methods.poolDepositFee(),withdrawFee:t.methods.poolWithdrawFee(),allocPoints:t.methods.poolAllocPoints(),startBlock:t.methods.poolStartBlock(),endBlock:t.methods.poolEndBlock(),endTime:t.methods.poolEndTime(),isFarmable:t.methods.isPoolFarmable(),lastCompound:t.methods.lastCompound(),harvestLockUntil:t.methods.poolHarvestLockUntil(),strategyAddress:t.methods.strategy()}}},{key:"processRequest_init",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(e){return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.versionString=e.versionString,this.depositFee=parseFloat(e.depositFee)/this.vaultinator3000.vaultChef.percentFactor,this.withdrawFee=parseFloat(e.withdrawFee)/this.vaultinator3000.vaultChef.percentFactor,this.allocPoints=parseInt(e.allocPoints,10),this.startBlock=parseInt(e.startBlock,10),this.endBlock=parseInt(e.endBlock,10),this.endTime=0===parseInt(e.endTime,10)?null:new Date(1e3*parseInt(e.endTime,10)),this.isFarmable=e.isFarmable,this.lastCompound=0===parseInt(e.lastCompound,10)?null:new Date(1e3*parseInt(e.lastCompound,10)),this.harvestLockUntil=0===parseInt(e.harvestLockUntil,10)?null:new Date(1e3*parseInt(e.harvestLockUntil,10)),this.strategyAddress=e.strategyAddress,this.version=b.getVersion(this.versionString),this.strategy=new B(this.strategyAddress),this.calculateFees(),this.initialized=!0;case 15:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"init",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(){var e,n,a;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.initialized){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,x.tryMultiCall(this.vaultinator3000.makeMultiCall(!1),[this.makeRequest_init()],this.debugErrorString("init"),"Vault: init");case 4:e=t.sent,n=Object(v.a)(e,1),a=n[0],this.processRequest_init(a[0]);case 8:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"makeRequest_vaultInfo",value:function(){var t=this.getContract();return{totalDeposit:t.methods.balance(),totalPending:t.methods.poolPending(),isFarmable:t.methods.isPoolFarmable(),lastCompound:t.methods.lastCompound(),harvestLockUntil:t.methods.poolHarvestLockUntil(),strategyCandidate:t.methods.strategyCandidate()}}},{key:"processRequest_vaultInfo",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(e){return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.totalDeposit=e.totalDeposit,this.totalPending=e.totalPending,this.isFarmable=e.isFarmable,this.lastCompound=0===e.lastCompound?null:new Date(1e3*parseInt(e.lastCompound,10)),this.harvestLockUntil=0===e.lastCompound?null:new Date(1e3*parseInt(e.harvestLockUntil,10)),this.proposedStrategy=e.strategyCandidate[0],this.proposedTime=parseInt(e.strategyCandidate[1],10),this.totalDepositUSD=this.depositToken.getPriceUSDForAmount(this.totalDeposit),this.totalPendingUSD=this.depositToken.getPriceShare(this.rewardToken.getPriceUSDForAmount(this.totalPending),1-this.vaultinator3000.vaultChef.totalProfitFee),this.compoundRewardUSD=this.depositToken.getPriceShare(this.rewardToken.getPriceUSDForAmount(this.totalPending),this.vaultinator3000.vaultChef.compoundRewardFee),this.initializedInfo=!0,document.dispatchEvent(new CustomEvent("vault_vaultInfo",{detail:{address:this.address}}));case 12:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"reloadVaultInfo",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(){var e,n,a;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.init();case 2:if(this.initialized){t.next=4;break}return t.abrupt("return");case 4:return t.next=6,x.tryMultiCall(this.vaultinator3000.makeMultiCall(!1),[this.makeRequest_vaultInfo()],this.debugErrorString("vaultInfo"),"Vault: vaultInfo");case 6:e=t.sent,n=Object(v.a)(e,1),a=n[0],this.processRequest_vaultInfo(a[0]);case 10:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"makeRequest_userInfo",value:function(){var t=this.getContract(!0);return{userDeposit:t.methods.balanceOf(this.vaultinator3000.account),userPending:t.methods.userPending(this.vaultinator3000.account),isApproved:t.methods.checkApproved(this.vaultinator3000.account)}}},{key:"processRequest_userInfo",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(e){return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.userDeposit=e.userDeposit,this.userPending=e.userPending,this.isApproved=e.isApproved,this.userDepositUSD=this.depositToken.getPriceUSDForAmount(this.userDeposit),this.userPendingUSD=this.depositToken.getPriceShare(this.rewardToken.getPriceUSDForAmount(this.userPending),1-this.vaultinator3000.vaultChef.totalProfitFee),t.next=7,this.calcUserProfitLoss();case 7:this.userProfitLoss=t.sent,this.calculateEarnings(),this.initializedUser=!0,document.dispatchEvent(new CustomEvent("vault_userInfo",{detail:{address:this.address}}));case 11:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"reloadUserInfo",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(){var e,n,a;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.init();case 2:if(this.initialized){t.next=4;break}return t.abrupt("return");case 4:return t.next=6,x.tryMultiCall(this.vaultinator3000.makeMultiCall(!0),[this.makeRequest_userInfo()],this.debugErrorString("userInfo"),"Vault: userInfo");case 6:e=t.sent,n=Object(v.a)(e,1),a=n[0],this.processRequest_userInfo(a[0]);case 10:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"reloadDBInfo",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(){return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.db_getDailyAPR();case 2:if(null===this.vaultinator3000.account){t.next=6;break}return t.next=5,this.calcUserProfitLoss();case 5:this.userProfitLoss=t.sent;case 6:this.initializedDB=!0,document.dispatchEvent(new CustomEvent("vault_userInfo",{detail:{address:this.address}}));case 8:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"upgradeStrat",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(){var e;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.getContract(!0),t.next=3,this.vaultinator3000.trySend(e.methods.upgradeStrat(),this.vaultinator3000.account,this.debugErrorString("upgradeStrat"),void 0,"Upgrade Strategy ".concat(this.id));case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"checkApproved",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(){return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.vaultinator3000.vaultChef.checkVaultApproved(this.id));case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"approve",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(){return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.depositToken.approve(this.address);case 2:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"compound",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(){return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.vaultinator3000.vaultChef.compound(this.id,"Compound Vault ".concat(this.depositToken.getFullName()));case 2:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"deposit",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(e){var n;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=x.smartFormatTokens(this.vaultinator3000.toBN(e),this.depositToken,!0),t.next=3,this.vaultinator3000.vaultChef.deposit(this.id,e,"Deposit ".concat(n," ").concat(this.depositToken.getFullName()));case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"withdraw",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(e){var n;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=x.smartFormatTokens(this.vaultinator3000.toBN(e),this.depositToken,!0),t.next=3,this.vaultinator3000.vaultChef.withdraw(this.id,e,"Withdraw ".concat(n," ").concat(this.depositToken.getFullName()));case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"withdrawAll",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(){return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.vaultinator3000.vaultChef.withdrawAll(this.id,"Withdraw all ".concat(this.depositToken.getFullName()));case 2:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"isFarm",value:function(){return this.depositToken.isLPToken()}},{key:"hasStable",value:function(){return this.depositToken.isStable()||this.depositToken.hasStable()}},{key:"userHasBalance",value:function(){return"0"!==this.depositToken.userBalance}},{key:"userHasDeposit",value:function(){return"0"!==this.userDeposit}},{key:"hasDepositAsset",value:function(t){return this.depositToken.isLPToken()?x.checkEqualAddress(this.depositToken.token0,t)||x.checkEqualAddress(this.depositToken.token1,t):x.checkEqualAddress(this.depositToken.address,t)}},{key:"calculateFees",value:function(){this.totalDepositFeeTaxFactor=(1-this.additionalDepositTax)*(1-this.depositFee),this.totalWithdrawFeeTaxFactor=1/(1-this.additionalWithdrawTax)/(1-this.withdrawFee)/(1-this.vaultinator3000.vaultChef.withdrawFee)}},{key:"calculateAPR",value:function(){1===this.compounds24h?this.compoundedDailyAPR=this.dailyAPR:this.compoundedDailyAPR=Math.pow(this.dailyAPR/this.compounds24h+1,this.compounds24h)-1,this.apr=365*this.compoundedDailyAPR,this.compoundedAPY=Math.pow(this.dailyAPR/this.compounds24h+1,365*this.compounds24h)-1,this.lpFeeAPR=365*this.dailyLPFeeAPR,this.combinedAPY=this.compoundedAPY+this.lpFeeAPR,this.combinedDailyAPR=this.dailyAPR+this.dailyLPFeeAPR}},{key:"calculateEarnings",value:function(){var t=x.smartFormatFiat(this.userDepositUSD,this.vaultinator3000.stableToken),e=t*this.dailyAPR;this.roiDailyAPR=e,this.roiWeeklyAPR=7*e,this.roiMonthlyAPR=30*e,this.roiYearlyAPR=365*e,this.roiDailyAPY=e,this.roiWeeklyAPY=t*(1+Math.pow(this.dailyAPR,7)-1),this.roiMonthlyAPY=t*(1+Math.pow(this.dailyAPR,30)-1),this.roiYearlyAPY=t*(1+Math.pow(this.dailyAPR,365)-1)}},{key:"calcUserProfitLoss",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(){var e,n;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!==(e=this.lastUserTransaction)){t.next=3;break}return t.abrupt("return",0);case 3:return n=this.calculateProfitLoss(this.vaultinator3000.toBN(this.userDeposit),this.vaultinator3000.toBN("0x".concat(e.userDepositSum)),this.vaultinator3000.toBN("0x".concat(e.userWithdrawSum)),this.vaultinator3000.toBN("0x".concat(e.userReinvestedSum))),t.abrupt("return",n);case 5:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"calculateProfitLoss",value:function(t,e,n,a){if(0===e.cmp(this.vaultinator3000.toBN(0)))return 0;var i=this.vaultinator3000.toBN(this.vaultinator3000.vaultChef.percentFactor),r=this.calcProfitLossAmount(t,e,n),s=this.calcRealInvestment(e,a),o=r.mul(i).div(s);return parseFloat(parseInt(o.toString(10),10))/this.vaultinator3000.vaultChef.percentFactor}},{key:"calcProfitLossAmount",value:function(t,e,n){return t.add(n).sub(e)}},{key:"calcRealInvestment",value:function(t,e){return t.sub(e)}},{key:"scanEvent",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(e,n,a){return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",x.scanEvent(this.getContract(),e,n,a));case 1:case"end":return t.stop()}}),t,this)})));return function(e,n,a){return t.apply(this,arguments)}}()},{key:"scanEvent_Compound",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(e,n){return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.scanEvent("Compound",e,n));case 1:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"scanEvent_Deposit",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(e,n){return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.scanEvent("Deposit",e,n));case 1:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"scanEvent_Withdraw",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(e,n){return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.scanEvent("Withdraw",e,n));case 1:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"db_getHistoricCompounds",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(e,n){var a,i;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=e||{},!n){t.next=15;break}return t.prev=2,i="".concat(this.api_url,"?module=vaultCompound&action=getVaultCompoundsPast"),i+="&chain=".concat(this.vaultinator3000.currentChain.id),i+="&vault=".concat(this.id),i+="&days=".concat(e.days||30),t.next=9,b.fetchJSON(i);case 9:a=t.sent,t.next=14;break;case 12:t.prev=12,t.t0=t.catch(2);case 14:return t.abrupt("return",a);case 15:return t.abrupt("return",this.cache_vaultCompoundHistory.getData(e));case 16:case"end":return t.stop()}}),t,this,[[2,12]])})));return function(e,n){return t.apply(this,arguments)}}()},{key:"db_getDailyAPR",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(){var e,n;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e="".concat(this.api_url,"?module=vault&action=getVaultAPR"),e+="&chain=".concat(this.vaultinator3000.currentChain.id),e+="&vault=".concat(this.id),t.next=6,b.fetchJSON(e);case 6:0!==(n=t.sent).block&&(this.compounds24h=n.compounds24h||1,this.dailyAPR=parseFloat(n.dailyAPR)/100),t.next=12;break;case 10:t.prev=10,t.t0=t.catch(0);case 12:this.calculateAPR(),this.calculateEarnings();case 14:case"end":return t.stop()}}),t,this,[[0,10]])})));return function(){return t.apply(this,arguments)}}()},{key:"db_setSyncBlock",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(e){var n;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n="".concat(this.api_url,"?module=vault&action=setVaultSyncBlock"),n+="&chain=".concat(this.vaultinator3000.currentChain.id),n+="&vault=".concat(this.id),n+="&block=".concat(e),t.next=7,b.fetch(n);case 7:t.next=11;break;case 9:t.prev=9,t.t0=t.catch(0);case 11:case"end":return t.stop()}}),t,this,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()},{key:"db_setProcessBlock",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(e){var n;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n="".concat(this.api_url,"?module=vault&action=setVaultProcessBlock"),n+="&chain=".concat(this.vaultinator3000.currentChain.id),n+="&vault=".concat(this.id),n+="&block=".concat(e),t.next=7,b.fetch(n);case 7:t.next=11;break;case 9:t.prev=9,t.t0=t.catch(0);case 11:case"end":return t.stop()}}),t,this,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()},{key:"db_getLastCompound",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(e,n,a){var i,r;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,i="".concat(this.api_url,"?module=vaultCompound&action=getLastCompound"),i+="&chain=".concat(this.vaultinator3000.currentChain.id),i+="&vault=".concat(this.id),i+="&block=".concat(e),i+="&transactionIndex=".concat(n),i+="&logIndex=".concat(a),t.next=9,b.fetchJSON(i);case 9:0!==(r=t.sent).block&&(this.db.lastCompound=parseInt(r.dateTime,10),this.db.lastCompoundUTC=new Date(1e3*this.db.lastCompound)),t.next=15;break;case 13:t.prev=13,t.t0=t.catch(0);case 15:return t.abrupt("return",this.db.lastCompound);case 16:case"end":return t.stop()}}),t,this,[[0,13]])})));return function(e,n,a){return t.apply(this,arguments)}}()},{key:"db_getSyncBlock",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(){var e,n;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e="".concat(this.api_url,"?module=vault&action=getVaultSyncBlock"),e+="&chain=".concat(this.vaultinator3000.currentChain.id),e+="&vault=".concat(this.id),t.next=6,b.fetchJSON(e);case 6:void 0!==(n=t.sent).result&&(this.last.syncBlock=this.db.syncBlock,this.db.syncBlock=parseInt(n.result,10)),t.next=12;break;case 10:t.prev=10,t.t0=t.catch(0);case 12:return t.abrupt("return",this.db.syncBlock);case 13:case"end":return t.stop()}}),t,this,[[0,10]])})));return function(){return t.apply(this,arguments)}}()},{key:"db_getProcessBlock",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(){var e,n;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e="".concat(this.api_url,"?module=vault&action=getVaultProcessBlock"),e+="&chain=".concat(this.vaultinator3000.currentChain.id),e+="&vault=".concat(this.id),t.next=6,b.fetchJSON(e);case 6:void 0!==(n=t.sent).result&&(this.last.processBlock=this.db.processBlock,this.db.processBlock=parseInt(n.result,10)),t.next=12;break;case 10:t.prev=10,t.t0=t.catch(0);case 12:return t.abrupt("return",this.db.processBlock);case 13:case"end":return t.stop()}}),t,this,[[0,10]])})));return function(){return t.apply(this,arguments)}}()},{key:"db_getLastUserTransaction",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(){var e,n;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e="".concat(this.api_url,"?module=vaultTransaction&action=getLastVaultUserTransaction"),e+="&chain=".concat(this.vaultinator3000.currentChain.id),e+="&vault=".concat(this.id),e+="&wallet=".concat(this.vaultinator3000.account),t.next=7,b.fetchJSON(e);case 7:if(void 0===(n=t.sent).current){t.next=11;break}return this.lastUserTransaction=n.current,t.abrupt("return",n.current);case 11:t.next=15;break;case 13:t.prev=13,t.t0=t.catch(0);case 15:return t.abrupt("return",null);case 16:case"end":return t.stop()}}),t,this,[[0,13]])})));return function(){return t.apply(this,arguments)}}()},{key:"db_addVaultWithdrawOrDeposit",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(e,n){var a,i,r,o,u,c,l,d,p,h,y;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.blockNumber,i=e.transactionIndex,r=e.logIndex,t.next=5,this.vaultinator3000.selectWeb3Connection(!1).eth.getBlock(a);case 5:return o=t.sent.timestamp,u=new Date(1e3*o),c=e.returnValues[0],l=e.returnValues[1],d=e.returnValues[2],p=e.returnValues[3],h=e.returnValues[4],y="".concat(this.api_url,"?module=vaultTransaction&action=addVault").concat(n?"Deposit":"Withdraw"),y+="&chain=".concat(this.vaultinator3000.currentChain.id),y+="&vault=".concat(this.id),y+="&block=".concat(a),y+="&transactionIndex=".concat(i),y+="&logIndex=".concat(r),y+="&timestamp=".concat(o),y+="&wallet=".concat(c),y+="&amount=".concat(x.abiEncodeUint256(l)),y+="&realAmount=".concat(x.abiEncodeUint256(d)),y+="&depositBefore=".concat(x.abiEncodeUint256(p)),y+="&depositAfter=".concat(x.abiEncodeUint256(h)),t.next=26,b.fetch(y);case 26:return t.abrupt("return",{timestamp:o,datetime:u,block:a});case 27:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"db_addVaultWithdraw",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(e){return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.db_addVaultWithdrawOrDeposit(e,!1));case 1:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"db_addVaultDeposit",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(e){return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.db_addVaultWithdrawOrDeposit(e,!0));case 1:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"db_addVaultCompound",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(e){var n,a,i,r,o,u,c,l,d,p,h;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.blockNumber,a=e.transactionIndex,i=e.logIndex,t.next=5,this.vaultinator3000.selectWeb3Connection(!1).eth.getBlock(n);case 5:return r=t.sent.timestamp,o=new Date(1e3*r),u=e.returnValues[0],c=e.returnValues[1],l=e.returnValues[2],d=e.returnValues[3],p=e.returnValues[4],h="".concat(this.api_url,"?module=vaultCompound&action=addVaultCompound"),h+="&chain=".concat(this.vaultinator3000.currentChain.id),h+="&vault=".concat(this.id),h+="&block=".concat(n),h+="&transactionIndex=".concat(a),h+="&logIndex=".concat(i),h+="&timestamp=".concat(r),h+="&wallet=".concat(u),h+="&tvlBefore=".concat(x.abiEncodeUint256(c)),h+="&tvlAfter=".concat(x.abiEncodeUint256(l)),h+="&reward=".concat(x.abiEncodeUint256(d)),h+="&dust=".concat(x.abiEncodeUint256(p)),t.next=26,b.fetch(h);case 26:return t.abrupt("return",{datetime:o,tvlBefore:c,tvlAfter:l,block:n});case 27:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"db_processVaultCompound",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(e){var n,a,i,r,o,u,c,l,d,p,h,y,m,v,f,k,j,w,O,x,g,C,T,M,D,_,S,P,L,A,F,R;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=null,t.prev=1,a="".concat(this.api_url,"?module=vaultCompound&action=getVaultCompound"),a+="&id=".concat(e),t.next=6,b.fetchJSON(a);case 6:n=t.sent,t.next=12;break;case 9:return t.prev=9,t.t0=t.catch(1),t.abrupt("return");case 12:if(i=n.current.block,r=n.current.transactionIndex,o=n.current.logIndex,u=parseInt(n.current.datetime,10),c=new Date(1e3*u),l="0x".concat(n.current.tvlBefore),d="0x".concat(n.current.tvlAfter),p=this.vaultinator3000.toBN(l),h=this.vaultinator3000.toBN(d),y="0x".concat(n.current.reward),m="0x".concat(n.current.dust),v=this.vaultinator3000.toBN(y),f=this.vaultinator3000.toBN(m),k=0,j=0,w=0,O=0,l===d){t.next=50;break}return x=this.vaultinator3000.toBN(86400),g=this.vaultinator3000.toBN(this.vaultinator3000.vaultChef.percentFactor),t.next=34,this.db_getLastCompound(i,r,o);case 34:C=t.sent,T=h.sub(p),M=T.mul(g).div(p),k=parseFloat(100*parseInt(M.toString(10),10)/this.vaultinator3000.vaultChef.percentFactor),D=this.vaultinator3000.toBN(0),0!==(_=v.add(f)).cmp(this.vaultinator3000.toBN(0))&&(D=f.mul(g).div(_)),O=parseFloat(100*parseInt(D.toString(10),10)/this.vaultinator3000.vaultChef.percentFactor),S=T.mul(v).div(_),P=S.mul(g).div(p),j=parseFloat(100*parseInt(P.toString(10),10)/this.vaultinator3000.vaultChef.percentFactor),L=this.vaultinator3000.toBN(u-C),A=this.vaultinator3000.toBN(0),0!==L.cmp(this.vaultinator3000.toBN(0))&&(A=S.mul(x).div(L)),F=A.mul(g).div(p),w=parseFloat(100*parseInt(F.toString(10),10)/this.vaultinator3000.vaultChef.percentFactor);case 50:return R="".concat(this.api_url,"?module=vaultCompound&action=setVaultCompoundData"),R+="&id=".concat(n.current.id),R+="&cAPR=".concat(k.toFixed(4)),R+="&rAPR=".concat(j.toFixed(4)),R+="&dAPR=".concat(w.toFixed(4)),R+="&dustPercent=".concat(O.toFixed(4)),t.next=58,b.fetch(R);case 58:return t.abrupt("return",{id:n.current.id,datetime:c,block:i});case 59:case"end":return t.stop()}}),t,this,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()},{key:"db_processVaultTransaction",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(e){var n,a,i,r,o,u,c,l,d,p,h,y,m,v,f,k,j,w;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=null,t.prev=1,a="".concat(this.api_url,"?module=vaultTransaction&action=getVaultTransaction"),a+="&id=".concat(e),t.next=6,b.fetchJSON(a);case 6:n=t.sent,t.next=12;break;case 9:return t.prev=9,t.t0=t.catch(1),t.abrupt("return");case 12:return i=n.current.block,r=new Date(1e3*n.current.dateTime),o=n.current.wallet,u=n.current.isDeposit.isDeposit,c=this.vaultinator3000.toBN("0x".concat(n.current.amount)),l=this.vaultinator3000.toBN("0x".concat(n.current.realAmount)),d=this.vaultinator3000.toBN("0x".concat(n.current.depositAfter)),p=this.vaultinator3000.toBN(0),h=this.vaultinator3000.toBN(0),y=this.vaultinator3000.toBN(0),null!==n.last&&(p=this.vaultinator3000.toBN("0x".concat(n.last.userDepositSum)),h=this.vaultinator3000.toBN("0x".concat(n.last.userWithdrawSum)),y=this.vaultinator3000.toBN("0x".concat(n.last.userReinvestedSum))),m=p,v=h,f=y,u?(m=p.add(c),k=this.calcProfitLossAmount(d,m,v),f=m.sub(d.sub(k))):v=h.add(l),j=100*this.calculateProfitLoss(d,m,v,f),w="".concat(this.api_url,"?module=vaultTransaction&action=setVaultTransactionData"),w+="&id=".concat(n.current.id),w+="&userDepositSum=".concat(x.abiEncodeUint256(m)),w+="&userWithdrawSum=".concat(x.abiEncodeUint256(v)),w+="&userReinvestedSum=".concat(x.abiEncodeUint256(f)),w+="&profitLoss=".concat(j.toFixed(4)),t.next=36,b.fetch(w);case 36:return t.abrupt("return",{id:e,datetime:r,block:i,wallet:o});case 37:case"end":return t.stop()}}),t,this,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()},{key:"syncToBlockchain",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(e,n){var a,i,r,o,u,c,l,d,p,h,y,m,b,v,f;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=this.vaultinator3000.currentBlock,t.t0=parseInt,t.t1=Math,t.next=5,this.db_getSyncBlock();case 5:if(t.t2=t.sent,t.t3=this.vaultinator3000.currentChain.originBlock,t.t4=this.originBlock,t.t5=t.t1.max.call(t.t1,t.t2,t.t3,t.t4),i=(0,t.t0)(t.t5,10),r=parseInt(Math.min(i+e,a),10),!(i>=r)){t.next=13;break}return t.abrupt("return");case 13:return t.next=15,this.scanEvent_Compound(i,r);case 15:if(null!==(o=t.sent)){t.next=18;break}return t.abrupt("return");case 18:u=0;case 19:if(!(u<o.length)){t.next=28;break}return c=o[u],t.next=23,this.db_addVaultCompound(c);case 23:l=t.sent,n&&void 0!==l&&n("[SYNC] Vault #".concat(this.id," compound @ [").concat(l.block,"] ").concat(l.datetime.toLocaleDateString()," ").concat(l.datetime.toLocaleTimeString()));case 25:u+=1,t.next=19;break;case 28:return t.next=30,this.scanEvent_Deposit(i,r);case 30:if(null!==(d=t.sent)){t.next=33;break}return t.abrupt("return");case 33:p=0;case 34:if(!(p<d.length)){t.next=43;break}return h=d[p],t.next=38,this.db_addVaultDeposit(h);case 38:y=t.sent,n&&void 0!==y&&n("[SYNC] Vault #".concat(this.id," deposit @ [").concat(y.block,"] ").concat(y.datetime.toLocaleDateString()," ").concat(y.datetime.toLocaleTimeString()));case 40:p+=1,t.next=34;break;case 43:return t.next=45,this.scanEvent_Withdraw(i,r);case 45:if(null!==(m=t.sent)){t.next=48;break}return t.abrupt("return");case 48:b=0;case 49:if(!(b<m.length)){t.next=58;break}return v=m[b],t.next=53,this.db_addVaultWithdraw(v);case 53:f=t.sent,n&&void 0!==f&&n("[SYNC] Vault #".concat(this.id," withdraw @ [").concat(f.block,"] ").concat(f.datetime.toLocaleDateString()," ").concat(f.datetime.toLocaleTimeString()));case 55:b+=1,t.next=49;break;case 58:return t.next=60,this.db_setSyncBlock(r);case 60:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"processData",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(e,n){var a,i,r,o,u,c,l,d,p,h,y,m,v,f;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=this.vaultinator3000.currentBlock,t.next=3,this.db_getSyncBlock();case 3:return i=t.sent,t.t0=parseInt,t.t1=Math,t.next=8,this.db_getProcessBlock();case 8:if(t.t2=t.sent,t.t3=this.vaultinator3000.currentChain.originBlock,t.t4=this.originBlock,t.t5=t.t1.max.call(t.t1,t.t2,t.t3,t.t4),r=(0,t.t0)(t.t5,10),o=parseInt(Math.min(r+e,a,i),10),!(r>=o)){t.next=16;break}return t.abrupt("return");case 16:return u=[],t.prev=17,c="".concat(this.api_url,"?module=vaultCompound&action=getVaultCompounds"),c+="&chain=".concat(this.vaultinator3000.currentChain.id),c+="&vault=".concat(this.id),c+="&fromBlock=".concat(r),c+="&toBlock=".concat(o),t.next=25,b.fetchJSON(c);case 25:u=t.sent,t.next=31;break;case 28:return t.prev=28,t.t6=t.catch(17),t.abrupt("return");case 31:l=0;case 32:if(!(l<u.length)){t.next=41;break}return d=u[l],t.next=36,this.db_processVaultCompound(d);case 36:p=t.sent,n&&n("[PROCESS] Vault #".concat(this.id," compound @ [").concat(p.block,"] ").concat(p.datetime.toLocaleDateString()," ").concat(p.datetime.toLocaleTimeString()));case 38:l+=1,t.next=32;break;case 41:return h=[],t.prev=42,y="".concat(this.api_url,"?module=vaultTransaction&action=getVaultTransactions"),y+="&chain=".concat(this.vaultinator3000.currentChain.id),y+="&vault=".concat(this.id),y+="&fromBlock=".concat(r),y+="&toBlock=".concat(o),t.next=50,b.fetchJSON(y);case 50:h=t.sent,t.next=56;break;case 53:return t.prev=53,t.t7=t.catch(42),t.abrupt("return");case 56:m=0;case 57:if(!(m<h.length)){t.next=66;break}return v=h[m],t.next=61,this.db_processVaultTransaction(v);case 61:f=t.sent,n&&n("[PROCESS] Vault #".concat(this.id," transfer @ [").concat(f.block,"] ").concat(f.datetime.toLocaleDateString()," ").concat(f.datetime.toLocaleTimeString()));case 63:m+=1,t.next=57;break;case 66:return t.next=68,this.db_setProcessBlock(o);case 68:case"end":return t.stop()}}),t,this,[[17,28],[42,53]])})));return function(e,n){return t.apply(this,arguments)}}()}],[{key:"batchInit",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(e,n){var a,i,r,o,u,c,l,d,p;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=[],i=[],e.forEach((function(t){t.initialized||""===t.address||(a.push(t),i.push(t.makeRequest_init()))})),0===a.length){t.next=19;break}return r=n.makeMultiCall(!1),t.next=7,x.tryMultiCall(r,i,"[Vault] batch init","Vault: init");case 7:o=t.sent,u=Object(v.a)(o,1),c=u[0],l=0;case 11:if(!(l<a.length)){t.next=19;break}return d=a[l],p=c[l],t.next=16,d.processRequest_init(p);case 16:l+=1,t.next=11;break;case 19:return t.abrupt("return",e.filter((function(t){return t.initialized})));case 20:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"batchLoadVaultInfo",value:function(){var e=Object(o.a)(Object(s.a)().mark((function e(n,a){var i,r,o,u,c,l,d,p,h;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=[],r=[],e.next=4,t.batchInit(n,a);case 4:if(e.sent.forEach((function(t){i.push(t),r.push(t.makeRequest_vaultInfo())})),0!==i.length){e.next=8;break}return e.abrupt("return");case 8:return o=a.makeMultiCall(!1),e.next=11,x.tryMultiCall(o,r,"[Vault] batch vaultInfo","Vault: vaultInfo");case 11:u=e.sent,c=Object(v.a)(u,1),l=c[0],d=0;case 15:if(!(d<i.length)){e.next=23;break}return p=i[d],h=l[d],e.next=20,p.processRequest_vaultInfo(h);case 20:d+=1,e.next=15;break;case 23:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"batchLoadUserInfo",value:function(){var e=Object(o.a)(Object(s.a)().mark((function e(n,a){var i,r,o,u,c,l,d,p,h;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=[],r=[],e.next=4,t.batchInit(n,a);case 4:if(e.sent.forEach((function(t){i.push(t),r.push(t.makeRequest_userInfo())})),0!==i.length){e.next=8;break}return e.abrupt("return");case 8:return o=a.makeMultiCall(!0),e.next=11,x.tryMultiCall(o,r,"[Vault] batch userInfo","Vault: userInfo");case 11:u=e.sent,c=Object(v.a)(u,1),l=c[0],d=0;case 15:if(!(d<i.length)){e.next=23;break}return p=i[d],h=l[d],e.next=20,p.processRequest_userInfo(h);case 20:d+=1,e.next=15;break;case 23:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"batchReloadDBInfo",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(e){var n,a,i,r,o;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=[],t.prev=1,a="".concat(e.api_url,"?module=vault&action=getVaultsInfo"),a+="&chain=".concat(e.currentChain.id),a+="&wallet=".concat(e.account||""),t.next=7,b.fetchJSON(a);case 7:n=t.sent,t.next=12;break;case 10:t.prev=10,t.t0=t.catch(1);case 12:i=0;case 13:if(!(i<n.length)){t.next=25;break}if(r=n[i],null!==(o=e.findVault(r.id))){t.next=18;break}return t.abrupt("continue",22);case 18:null!==r.dateTime&&(o.compounds24h=r.compounds24h||1,o.dailyAPR=parseFloat(r.dailyAPR)/100,o.dailyLPFeeAPR=parseFloat(r.dailyLPFeeAPR)/100,o.calculateAPR(),o.calculateEarnings()),o.lastUserTransaction=r,o.initializedDB=!0,document.dispatchEvent(new CustomEvent("vault_userInfo",{detail:{address:o.address}}));case 22:i+=1,t.next=13;break;case 25:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}()}]),t}(),V=E,U=n(20),z=n(0),H=n.n(z),q=n(116),W={alwaysUseUserWeb3:!0},Z={connections:[],multiCalls:[{chain:25,multiCall:"0x13aD51a6664973EbD0749a7c84939d973F247921"},{chain:56,multiCall:"0xB94858b0bB5437498F5453A16039337e5Fdc269C"},{chain:137,multiCall:"0xC3821F0b56FA4F4794d5d760f94B812DE261361B"},{chain:250,multiCall:"0xC9F6b1B53E056fd04bE5a197ce4B2423d456B982"},{chain:1285,multiCall:"0x55f46144bC62e9Af4bAdB71842B62162e2194E90"},{chain:43114,multiCall:"0x6FfF95AC47b586bDDEea244b3c2fe9c4B07b9F76"},{chain:16666e5,multiCall:"0xBa5041B1c06e8c9cFb5dDB4b82BdC52E41EA5FC5"}],web3RPCs:[{chain:25,nodes:["https://evm-cronos.crypto.org"]},{chain:56,nodes:["https://bsc-dataseed.binance.org/","https://bsc-dataseed1.defibit.io/","https://bsc-dataseed1.ninicoin.io/"]},{chain:137,nodes:["https://polygon-rpc.com/","https://matic-mainnet.chainstacklabs.com/","https://rpc-mainnet.matic.network/","https://rpc-mainnet.maticvigil.com/"]},{chain:250,nodes:["https://rpc.ftm.tools/"]},{chain:16666e5,nodes:["https://api.s0.t.hmny.io/","https://api.harmony.one/"]}]},Y=[{inputs:[],name:"WETH",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"address",name:"tokenA",type:"address"},{internalType:"address",name:"tokenB",type:"address"},{internalType:"uint256",name:"amountADesired",type:"uint256"},{internalType:"uint256",name:"amountBDesired",type:"uint256"},{internalType:"uint256",name:"amountAMin",type:"uint256"},{internalType:"uint256",name:"amountBMin",type:"uint256"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"deadline",type:"uint256"}],name:"addLiquidity",outputs:[{internalType:"uint256",name:"amountA",type:"uint256"},{internalType:"uint256",name:"amountB",type:"uint256"},{internalType:"uint256",name:"liquidity",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amountTokenDesired",type:"uint256"},{internalType:"uint256",name:"amountTokenMin",type:"uint256"},{internalType:"uint256",name:"amountETHMin",type:"uint256"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"deadline",type:"uint256"}],name:"addLiquidityETH",outputs:[{internalType:"uint256",name:"amountToken",type:"uint256"},{internalType:"uint256",name:"amountETH",type:"uint256"},{internalType:"uint256",name:"liquidity",type:"uint256"}],stateMutability:"payable",type:"function"},{inputs:[],name:"factory",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"uint256",name:"amountOut",type:"uint256"},{internalType:"uint256",name:"reserveIn",type:"uint256"},{internalType:"uint256",name:"reserveOut",type:"uint256"}],name:"getAmountIn",outputs:[{internalType:"uint256",name:"amountIn",type:"uint256"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"uint256",name:"amountIn",type:"uint256"},{internalType:"uint256",name:"reserveIn",type:"uint256"},{internalType:"uint256",name:"reserveOut",type:"uint256"}],name:"getAmountOut",outputs:[{internalType:"uint256",name:"amountOut",type:"uint256"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"uint256",name:"amountOut",type:"uint256"},{internalType:"address[]",name:"path",type:"address[]"}],name:"getAmountsIn",outputs:[{internalType:"uint256[]",name:"amounts",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amountIn",type:"uint256"},{internalType:"address[]",name:"path",type:"address[]"}],name:"getAmountsOut",outputs:[{internalType:"uint256[]",name:"amounts",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amountA",type:"uint256"},{internalType:"uint256",name:"reserveA",type:"uint256"},{internalType:"uint256",name:"reserveB",type:"uint256"}],name:"quote",outputs:[{internalType:"uint256",name:"amountB",type:"uint256"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"address",name:"tokenA",type:"address"},{internalType:"address",name:"tokenB",type:"address"},{internalType:"uint256",name:"liquidity",type:"uint256"},{internalType:"uint256",name:"amountAMin",type:"uint256"},{internalType:"uint256",name:"amountBMin",type:"uint256"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"deadline",type:"uint256"}],name:"removeLiquidity",outputs:[{internalType:"uint256",name:"amountA",type:"uint256"},{internalType:"uint256",name:"amountB",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"liquidity",type:"uint256"},{internalType:"uint256",name:"amountTokenMin",type:"uint256"},{internalType:"uint256",name:"amountETHMin",type:"uint256"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"deadline",type:"uint256"}],name:"removeLiquidityETH",outputs:[{internalType:"uint256",name:"amountToken",type:"uint256"},{internalType:"uint256",name:"amountETH",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"liquidity",type:"uint256"},{internalType:"uint256",name:"amountTokenMin",type:"uint256"},{internalType:"uint256",name:"amountETHMin",type:"uint256"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"deadline",type:"uint256"}],name:"removeLiquidityETHSupportingFeeOnTransferTokens",outputs:[{internalType:"uint256",name:"amountETH",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"liquidity",type:"uint256"},{internalType:"uint256",name:"amountTokenMin",type:"uint256"},{internalType:"uint256",name:"amountETHMin",type:"uint256"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"deadline",type:"uint256"},{internalType:"bool",name:"approveMax",type:"bool"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],name:"removeLiquidityETHWithPermit",outputs:[{internalType:"uint256",name:"amountToken",type:"uint256"},{internalType:"uint256",name:"amountETH",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"liquidity",type:"uint256"},{internalType:"uint256",name:"amountTokenMin",type:"uint256"},{internalType:"uint256",name:"amountETHMin",type:"uint256"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"deadline",type:"uint256"},{internalType:"bool",name:"approveMax",type:"bool"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],name:"removeLiquidityETHWithPermitSupportingFeeOnTransferTokens",outputs:[{internalType:"uint256",name:"amountETH",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"tokenA",type:"address"},{internalType:"address",name:"tokenB",type:"address"},{internalType:"uint256",name:"liquidity",type:"uint256"},{internalType:"uint256",name:"amountAMin",type:"uint256"},{internalType:"uint256",name:"amountBMin",type:"uint256"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"deadline",type:"uint256"},{internalType:"bool",name:"approveMax",type:"bool"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],name:"removeLiquidityWithPermit",outputs:[{internalType:"uint256",name:"amountA",type:"uint256"},{internalType:"uint256",name:"amountB",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"amountOut",type:"uint256"},{internalType:"address[]",name:"path",type:"address[]"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"deadline",type:"uint256"}],name:"swapETHForExactTokens",outputs:[{internalType:"uint256[]",name:"amounts",type:"uint256[]"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"amountOutMin",type:"uint256"},{internalType:"address[]",name:"path",type:"address[]"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"deadline",type:"uint256"}],name:"swapExactETHForTokens",outputs:[{internalType:"uint256[]",name:"amounts",type:"uint256[]"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"amountOutMin",type:"uint256"},{internalType:"address[]",name:"path",type:"address[]"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"deadline",type:"uint256"}],name:"swapExactETHForTokensSupportingFeeOnTransferTokens",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"amountIn",type:"uint256"},{internalType:"uint256",name:"amountOutMin",type:"uint256"},{internalType:"address[]",name:"path",type:"address[]"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"deadline",type:"uint256"}],name:"swapExactTokensForETH",outputs:[{internalType:"uint256[]",name:"amounts",type:"uint256[]"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"amountIn",type:"uint256"},{internalType:"uint256",name:"amountOutMin",type:"uint256"},{internalType:"address[]",name:"path",type:"address[]"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"deadline",type:"uint256"}],name:"swapExactTokensForETHSupportingFeeOnTransferTokens",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"amountIn",type:"uint256"},{internalType:"uint256",name:"amountOutMin",type:"uint256"},{internalType:"address[]",name:"path",type:"address[]"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"deadline",type:"uint256"}],name:"swapExactTokensForTokens",outputs:[{internalType:"uint256[]",name:"amounts",type:"uint256[]"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"amountIn",type:"uint256"},{internalType:"uint256",name:"amountOutMin",type:"uint256"},{internalType:"address[]",name:"path",type:"address[]"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"deadline",type:"uint256"}],name:"swapExactTokensForTokensSupportingFeeOnTransferTokens",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"amountOut",type:"uint256"},{internalType:"uint256",name:"amountInMax",type:"uint256"},{internalType:"address[]",name:"path",type:"address[]"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"deadline",type:"uint256"}],name:"swapTokensForExactETH",outputs:[{internalType:"uint256[]",name:"amounts",type:"uint256[]"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"amountOut",type:"uint256"},{internalType:"uint256",name:"amountInMax",type:"uint256"},{internalType:"address[]",name:"path",type:"address[]"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"deadline",type:"uint256"}],name:"swapTokensForExactTokens",outputs:[{internalType:"uint256[]",name:"amounts",type:"uint256[]"}],stateMutability:"nonpayable",type:"function"}],G=[{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"allPairs",outputs:[{internalType:"address",name:"pair",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"allPairsLength",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"tokenA",type:"address"},{internalType:"address",name:"tokenB",type:"address"}],name:"createPair",outputs:[{internalType:"address",name:"pair",type:"address"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"feeTo",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"feeToSetter",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"tokenA",type:"address"},{internalType:"address",name:"tokenB",type:"address"}],name:"getPair",outputs:[{internalType:"address",name:"pair",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"setFeeTo",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"setFeeToSetter",outputs:[],stateMutability:"nonpayable",type:"function"}],J=function(){function t(e,n){Object(u.a)(this,t),this.initialized=!1,this.vaultinator3000=n,this.id=e.id,this.address=e.contract,this.linkSwap=e.linkSwap,this.linkAddLiquidity=e.linkAddLiquidity,this.linkRemoveLiquidity=e.linkRemoveLiquidity,this.factoryAddress="",this.factoryContract=null,this.pairs=[]}return Object(c.a)(t,[{key:"debugErrorString",value:function(t){return"Router [".concat(this.id,"] failed at: ").concat(t)}},{key:"getContract",value:function(t){return new(this.vaultinator3000.selectWeb3Connection(t).eth.Contract)(Y,this.address)}},{key:"makeRequest_init",value:function(){return{factoryAddress:this.getContract().methods.factory()}}},{key:"processRequest_init",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(e){var n,a;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.factoryAddress=e.factoryAddress,n=x.findWeb3Connection("data"),a=n.web3,this.factoryContract=new a.eth.Contract(G,this.factoryAddress),this.initialized=!0;case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"init",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(){var e,n,a;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.initialized){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,x.tryMultiCall(this.vaultinator3000.makeMultiCall(!1),[this.makeRequest_init()],this.debugErrorString("init"),"Router: init");case 4:e=t.sent,n=Object(v.a)(e,1),a=n[0],this.processRequest_init(a[0]);case 8:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"lookupPair",value:function(t,e){var n=-1===x.compareAddress(t.address,e.address)?t:e,a=-1===x.compareAddress(t.address,e.address)?e:t,i=this.pairs.find((function(t){return x.checkEqualAddress(t.token0.address,n.address)&&x.checkEqualAddress(t.token1.address,a.address)}));return i?i.pairToken:null}},{key:"makeRequest_findPair",value:function(t,e){return{pair:this.factoryContract.methods.getPair(t.address,e.address)}}},{key:"processRequest_findPair",value:function(t,e,n){var a=-1===x.compareAddress(e.address,n.address)?e:n,i=-1===x.compareAddress(e.address,n.address)?n:e;if(0===this.vaultinator3000.toBN(t).cmp(this.vaultinator3000.toBN(0)))return console.error(this.debugErrorString("findOrCreatePair: no pair found [".concat(e.symbol,"-").concat(n.symbol,"]"))),null;var r=this.vaultinator3000.findToken(t);return null===r&&(r=new P({contract:t,router:this.id,initPair:!0,oracleType:"LP"},this.vaultinator3000),this.vaultinator3000.tokens.push(r)),this.pairs.push({token0:a,token1:i,pairToken:r}),r}},{key:"findPair",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(e,n){var a,i,r;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.init();case 2:if(this.initialized){t.next=4;break}return t.abrupt("return",null);case 4:if(null===(a=this.lookupPair(e,n))){t.next=7;break}return t.abrupt("return",a);case 7:return t.next=9,x.tryCall(this.makeRequest_findPair(e.address,n.address).pair,"findOrCreatePair");case 9:if(i=t.sent,null!==(r=this.processRequest_findPair(i,e,n))){t.next=13;break}return t.abrupt("return",null);case 13:return t.prev=13,t.next=16,r.init();case 16:t.next=20;break;case 18:t.prev=18,t.t0=t.catch(13);case 20:return t.abrupt("return",r);case 21:case"end":return t.stop()}}),t,this,[[13,18]])})));return function(e,n){return t.apply(this,arguments)}}()}],[{key:"batchInit",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(e,n){var a,i,r,o,u,c,l,d,p;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=[],i=[],e.forEach((function(t){t.initialized||""===t.address||(a.push(t),i.push(t.makeRequest_init()))})),0===a.length){t.next=19;break}return r=n.makeMultiCall(!1),t.next=7,x.tryMultiCall(r,i,"[Router] batch init","Router: init");case 7:o=t.sent,u=Object(v.a)(o,1),c=u[0],l=0;case 11:if(!(l<a.length)){t.next=19;break}return d=a[l],p=c[l],t.next=16,d.processRequest_init(p);case 16:l+=1,t.next=11;break;case 19:return t.abrupt("return",e.filter((function(t){return t.initialized})));case 20:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"batchFindPairs",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(e,n){var a,i,r,o,u,c,l,d,p,h;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=[],i=[],e.forEach((function(t){a.push(t),i.push(t.router.makeRequest_findPair(t.token0,t.token1))})),r=[],0===a.length){t.next=12;break}return o=n.makeMultiCall(!1),t.next=8,x.tryMultiCall(o,i,"[Router] batch findPair","Router: findPair");case 8:for(u=t.sent,c=Object(v.a)(u,1),l=c[0],d=0;d<a.length;d+=1)p=a[d],h=l[d],r.push(p.router.processRequest_findPair(h.pair,p.token0,p.token1));case 12:return t.abrupt("return",r);case 13:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),t}(),K=J,X=function(){function t(e){Object(u.a)(this,t),this.debug=!1,this.pairs=[],this.vaultinator3000=e}return Object(c.a)(t,[{key:"debugErrorString",value:function(t){return"Oracle failed at: ".concat(t)}},{key:"reloadPriceData",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(e){return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(null!==e.lastPriceUpdate&&((new Date).getTime()-e.lastPriceUpdate)/1e3<60)){t.next=2;break}return t.abrupt("return",null);case 2:t.t0=e.oracleType,t.next="Stable"===t.t0?5:"LP"===t.t0?6:"Alias"===t.t0?7:"LPStable"===t.t0?8:"LPCoin"===t.t0?9:"LPMirror"===t.t0?10:11;break;case 5:return t.abrupt("return",this.reloadPriceData_Stable(e));case 6:return t.abrupt("return",this.reloadPriceData_LP(e));case 7:return t.abrupt("return",this.reloadPriceData_Alias(e));case 8:return t.abrupt("return",this.reloadPriceData_LPStable(e));case 9:return t.abrupt("return",this.reloadPriceData_LPCoin(e));case 10:return t.abrupt("return",null);case 11:return console.error(this.debugErrorString("getPrice [".concat(e.getFullName(),"]"))),t.abrupt("return",0);case 13:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"reloadPriceData_Stable",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(e){return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.unitPriceUSD=this.vaultinator3000.stableToken.one.toString(10),e.liquidityValue=this.vaultinator3000.stableToken.one.toString(10),e.liquidityAmount=e.one.toString(10),e.lastPriceUpdate=new Date,e.initializedPrice=!0,e.priceUpdated(),this.logUnitPrice(e),t.abrupt("return",e.unitPriceUSD);case 8:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"reloadPriceData_LP",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(e){var n,a,i,r,o,u,c,l,d,p,h;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=this.vaultinator3000.findToken(e.token0),a=this.vaultinator3000.findToken(e.token1),n.initializedPrice&&a.initializedPrice){t.next=4;break}return t.abrupt("return","0");case 4:if(i=this.vaultinator3000.toBN(n.unitPriceUSD),r=this.vaultinator3000.toBN(e.token0Reserve),o=i.mul(r).div(n.one),u=this.vaultinator3000.toBN(a.unitPriceUSD),c=this.vaultinator3000.toBN(e.token1Reserve),l=u.mul(c).div(a.one),d=o.add(l),p=this.vaultinator3000.toBN(e.totalSupply),0!==(h=d.mul(e.one).div(p)).cmp(this.vaultinator3000.toBN(0))){t.next=15;break}return t.abrupt("return","0");case 15:return e.unitPriceUSD=h.toString(10),e.liquidityValue=d.toString(10),e.liquidityAmount=p.toString(10),e.lastPriceUpdate=new Date,e.initializedPrice=!0,e.priceUpdated(),this.logUnitPrice(e),t.abrupt("return",e.unitPriceUSD);case 23:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"reloadPriceData_Alias",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(e){var n;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!==(n=this.vaultinator3000.findToken(e.oracleParameter))&&n.initialized){t.next=4;break}return console.error(this.debugErrorString("getPrice_Alias [".concat(e.getFullName(),"]"))),t.abrupt("return","0");case 4:if(0!==this.vaultinator3000.toBN(n.unitPriceUSD).cmp(this.vaultinator3000.toBN(0))){t.next=7;break}return t.abrupt("return","0");case 7:return e.unitPriceUSD=n.unitPriceUSD,e.liquidityValue=n.liquidityValue,e.liquidityAmount=n.liquidityAmount,e.lastPriceUpdate=new Date,e.initializedPrice=!0,e.priceUpdated(),this.logUnitPrice(e),t.abrupt("return",e.unitPriceUSD);case 15:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"reloadPriceData_LPStable",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(e){var n,a,i,r,o,u;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.vaultinator3000.stableToken,t.next=3,this.findPair(e,n);case 3:if(null!==(a=t.sent)&&a.initialized){t.next=7;break}return console.error(this.debugErrorString("getPrice_LPStable [".concat(e.getFullName(),"]"))),t.abrupt("return","0");case 7:if(i=this.getTokenLPReserves(a,e),0!==(r=i.tokenReserve).cmp(this.vaultinator3000.toBN(0))){t.next=11;break}return t.abrupt("return","0");case 11:if(o=i.partnerReserve,0!==(u=o.mul(e.one).div(r)).cmp(this.vaultinator3000.toBN(0))){t.next=15;break}return t.abrupt("return","0");case 15:return e.unitPriceUSD=u.toString(10),e.liquidityValue=o.toString(10),e.liquidityAmount=r.toString(10),e.lastPriceUpdate=new Date,e.initializedPrice=!0,e.priceUpdated(),this.logUnitPrice(e),t.abrupt("return",e.unitPriceUSD);case 23:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"reloadPriceData_LPCoin",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(e){var n,a,i,r,o,u,c;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.vaultinator3000.wrappedCoin,t.next=3,this.findPair(e,n);case 3:if(null!==(a=t.sent)&&a.initialized){t.next=7;break}return console.error(this.debugErrorString("getPrice_LPCoin [".concat(e.getFullName(),"]"))),t.abrupt("return","0");case 7:if(i=this.getTokenLPReserves(a,e),0!==(r=i.tokenReserve).cmp(this.vaultinator3000.toBN(0))){t.next=11;break}return t.abrupt("return","0");case 11:if(o=i.partnerReserve,u=this.vaultinator3000.toBN(n.getPriceUSDForAmount(o)),0!==(c=u.mul(e.one).div(r)).cmp(this.vaultinator3000.toBN(0))){t.next=16;break}return t.abrupt("return","0");case 16:return e.unitPriceUSD=c.toString(10),e.liquidityValue=u.toString(10),e.liquidityAmount=r.toString(10),e.lastPriceUpdate=new Date,e.initializedPrice=!0,e.priceUpdated(),this.logUnitPrice(e),t.abrupt("return",e.unitPriceUSD);case 24:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"getTokenLPReserves",value:function(t,e){var n,a,i=this.vaultinator3000.toBN(t.token0Reserve),r=this.vaultinator3000.toBN(t.token1Reserve);return x.checkEqualAddress(e.address,t.token0)?(n=i,a=r):(n=r,a=i),{tokenReserve:n,partnerReserve:a}}},{key:"findPair",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(e,n){var a;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!==(a=this.vaultinator3000.findRouter(e.router))){t.next=3;break}return t.abrupt("return",null);case 3:return t.abrupt("return",a.lookupPair(e,n));case 4:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"logUnitPrice",value:function(t){this.debug&&console.log("Oracle Unit Price [".concat(t.getFullName()," @ ").concat(t.oracleType,"] = ").concat(x.smartFormatFiat(t.unitPriceUSD,this.vaultinator3000.stableToken)))}}],[{key:"getPricePairsToLoad",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(e,n){var a,i,r,o,u;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,K.batchInit(n.routers,n);case 2:a=[],i=0;case 4:if(!(i<e.length)){t.next=26;break}if(r=e[i],null!==(o=n.findRouter(r.router))&&o.initialized){t.next=9;break}return t.abrupt("continue",23);case 9:if(u=null,"LPCoin"!==r.oracleType){t.next=14;break}u=n.wrappedCoin,t.next=19;break;case 14:if("LPStable"!==r.oracleType){t.next=18;break}u=n.stableToken,t.next=19;break;case 18:return t.abrupt("continue",23);case 19:if(null===o.lookupPair(r,u)){t.next=22;break}return t.abrupt("continue",23);case 22:a.push({router:o,token0:r,token1:u});case 23:i+=1,t.next=4;break;case 26:return t.abrupt("return",a);case 27:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"batchLoadPricePairs",value:function(){var e=Object(o.a)(Object(s.a)().mark((function e(n,a){var i,r;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getPricePairsToLoad(n,a);case 2:return i=e.sent,e.next=5,K.batchFindPairs(i,a);case 5:return r=e.sent,e.next=8,P.batchInit(r,a);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),t}(),Q=X;function $(t,e){for(var n=t.className,a=t.children,i="Group ".concat(n||""),s={},o=0,u=Object.keys(t);o<u.length;o+=1){var c=u[o],l=t[c];"className"!==c&&"children"!==c&&(s[c]=l)}return Object(m.jsx)("div",Object(r.a)(Object(r.a)({ref:e,className:i},s),{},{children:a}))}var tt=Object(z.forwardRef)($),et=function(t){var e=t.size,n=t.weight,a=t.italic,i=t.color,r=t.className,s=t.children,o="Text ".concat(function(){var t="";switch(parseInt(e||0,10)){case-3:t+="sizeSuperSmall";break;case-2:t+="sizeVerySmall";break;case-1:t+="sizeSmall";break;case 1:t+="sizeBig";break;case 2:t+="sizeVeryBig";break;default:t+="sizeNormal"}switch(t+=" ",parseInt(n||0,10)){case-1:t+="weightLight";break;case 1:t+="weightBold";break;default:t+="weightNormal"}if(t+=" ","true"===a&&(t+="font-italic "),void 0===i||"number"===typeof i)switch(parseInt(i||1,10)){case 0:t+="colorDisabled";break;case 2:t+="colorSecondary";break;default:t+="colorPrimary"}return t+=" "}()).concat(r||""),u={};return"number"!==typeof i&&(u={color:i}),Object(m.jsx)("span",{className:o,style:u,children:s})},nt=n(1049),at=n.n(nt),it=function(t){Object(p.a)(n,t);var e=Object(h.a)(n);function n(t){var a;return Object(u.a)(this,n),(a=e.call(this,t)).state={onClick:t.onClick},a}return Object(c.a)(n,[{key:"buildPropsClassName",value:function(){var t=this.props,e=t.disabled,n=t.buttonStyle,a="";if(1===parseInt(n||0,10))a+="stylePrimary";else a+="styleNormal";return a+=" ",!0===e&&(a+="disabled "),a}},{key:"render",value:function(){var t=this.props,e=t.className,n=t.href,a=t.title,i=t.children,r=t.target,s=this.state.onClick,o="Button ".concat(this.buildPropsClassName()).concat(e||"");return void 0===n?Object(m.jsx)("button",{type:"button",className:o,onClick:s,title:a,children:i}):Object(m.jsx)("a",{className:o,href:n,target:r,title:a,children:i})}}]),n}(H.a.Component),rt=function(t){var e=t.onClose,n=t.raw,a=t.children,i=t.header,r=t.footer,s=t.show,o=t.className,u=Object(m.jsx)(m.Fragment,{});e&&(u=Object(m.jsx)(it,{className:"close",buttonStyle:"1",onClick:function(){return e()},children:"X"}));var c=a;return n||(c=Object(m.jsxs)(tt,{className:"ModalContainer",children:[Object(m.jsxs)(tt,{className:"Header",children:[i,u]}),Object(m.jsx)(tt,{className:"Content",children:a}),Object(m.jsx)(tt,{className:"Footer",children:r})]})),Object(m.jsx)(at.a,{isOpen:s,contentLabel:"SwitchNetwork",className:"ModalContent ".concat(o),overlayClassName:"ModalOverlay",ariaHideApp:!1,children:c})},st=function(t){Object(p.a)(n,t);var e=Object(h.a)(n);function n(t){var a,i,r;Object(u.a)(this,n),r=e.call(this,t);var s=t.token,o=t.vaultinator3000,c="",l="";(s&&s.icon&&(c=t.token.icon),null!==(a=t.token)&&void 0!==a&&a.token0&&""===c)&&(c=o.findToken(t.token.token0).icon);null!==(i=t.token)&&void 0!==i&&i.token1&&(l=o.findToken(t.token.token1).icon);return r.state={icon1:c,icon2:l,height:t.height,width:t.width},r}return Object(c.a)(n,[{key:"render",value:function(){var t,e,n=this.state,a=n.icon1,i=n.icon2,r=n.height,s=n.width;""!==a&&(t=Object(m.jsx)("img",{className:"icon1".concat(""!==i?" iconLP":""),src:a,alt:""})),""!==i&&(e=Object(m.jsx)("img",{className:"icon2 iconLP",src:i,alt:""}));var o={};return r&&(o.height="".concat(r,"px")),s&&(o.width="".concat(s,"px")),Object(m.jsxs)(tt,{className:"TokenIcon icons",style:o,children:[t,e]})}}]),n}(H.a.Component),ot=function(t){Object(p.a)(n,t);var e=Object(h.a)(n);function n(t){var a;return Object(u.a)(this,n),(a=e.call(this,t)).state={onChange:t.onChange||null,onBlur:t.onBlur||null},a.refInput=H.a.createRef(),a}return Object(c.a)(n,[{key:"onChange",value:function(t){var e=this.state.onChange;null!==e&&e(t)}},{key:"onBlur",value:function(t){var e=this.state.onBlur;null!==e&&e(t)}},{key:"getValue",value:function(){return this.refInput.current.value}},{key:"setValue",value:function(t){this.refInput.current.value=t}},{key:"focus",value:function(){this.refInput.current.focus();var t=this.refInput.current.value.length;this.refInput.current.setSelectionRange(t,t)}},{key:"render",value:function(){var t=this,e=this.props,n=e.className,a=e.id,i=e.type,r=e.name,s=e.min,o=e.max,u=e.inputMode,c=e.pattern,l=e.title,d=e.step,p=e.value,h=e.style,y=e.placeholder,b=e.readOnly,v="Input ".concat(n||"");return Object(m.jsx)("input",{className:v,id:a,ref:this.refInput,type:i||"text",name:r,min:s,max:o,inputMode:u,pattern:c,title:l,step:d,value:p,style:h,placeholder:y,onChange:function(e){return t.onChange(e)},onBlur:function(e){return t.onBlur(e)},readOnly:b||!1})}}]),n}(H.a.Component),ut=function(t){var e=t.className,n=t.src,a="Image ".concat(e||"");return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)("img",{className:a,src:n,alt:""})})},ct=function(t){Object(p.a)(n,t);var e=Object(h.a)(n);function n(t){var a;return Object(u.a)(this,n),(a=e.call(this,t)).token=t.token,a.icon1="",a.icon2="",a.vaultinator3000=t.vaultinator3000,a.initIcons(),a}return Object(c.a)(n,[{key:"onClick_addToken",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(){return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.token.addToWallet();case 2:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"initIcons",value:function(){var t,e;if(null!==this.token&&this.token.icon&&(this.icon1=this.token.icon),null!==(null===(t=this.token)||void 0===t?void 0:t.token0)&&""===this.icon1){var n=this.vaultinator3000.findToken(this.token.token0);this.icon1=n.icon}if(null!==(null===(e=this.token)||void 0===e?void 0:e.token1)){var a=this.vaultinator3000.findToken(this.token.token1);this.icon2=a.icon}}},{key:"renderIcon",value:function(){return""===this.icon2?Object(m.jsx)(tt,{className:"TokenIcon tokenIconSingle",children:Object(m.jsx)(ut,{className:"icon1",src:this.icon1})}):Object(m.jsxs)(tt,{className:"TokenIcon tokenIconDual",children:[Object(m.jsx)(ut,{className:"icon1",src:this.icon1}),Object(m.jsx)(ut,{className:"icon2",src:this.icon2})]})}},{key:"render",value:function(){var t=this,e=this.props,n=e.mode,a=e.token;if("text"===n){var i=a.symbol;null!==a.token0&&(i="LP");var r="show ".concat(i," in wallet");return Object(m.jsx)("button",{type:"button",onClick:function(e){return t.onClick_addToken(e)},children:r})}return Object(m.jsxs)(it,{buttonStyle:"0",className:"ButtonAddToken",onClick:function(){return t.onClick_addToken()},children:[this.renderIcon(),"show in wallet"]})}}]),n}(H.a.Component),lt=ct,dt=function(t){Object(p.a)(n,t);var e=Object(h.a)(n);function n(t){var a;return Object(u.a)(this,n),(a=e.call(this,t)).state={id:t.id||"dialog_tokenInput",onChange:t.onChange||null,onChangeToken:t.onChangeToken||null,token:t.token,max:t.max,showIcon:t.showIcon&&!0},a.checkUpdate_app=a.checkUpdate_app.bind(Object(U.a)(a)),a.checkUpdate_token=a.checkUpdate_token.bind(Object(U.a)(a)),a.ref_input=H.a.createRef(),a.vaultinator3000=t.vaultinator3000,a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){document.addEventListener("app_reload",this.checkUpdate_app),document.addEventListener("token_userInfo",this.checkUpdate_token)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("app_reload",this.checkUpdate_app),document.removeEventListener("token_userInfo",this.checkUpdate_token)}},{key:"onClick_max",value:function(){var t=this.state,e=t.max,n=t.token,a=t.onChange;this.ref_input.current.setValue(x.fullFormatTokens(e,n||this.vaultinator3000.wrappedCoin,!0)),a&&a()}},{key:"getAsUint256",value:function(){var t=x.tokensToUint256String(this.ref_input.current.getValue());return this.vaultinator3000.web3_data.eth.abi.encodeParameter("uint256",t)}},{key:"checkUpdate_app",value:function(){this.state.token||this.setState({max:this.vaultinator3000.userCoinBalance})}},{key:"checkUpdate_token",value:function(t){var e=this.state,n=e.token,a=e.onChangeToken;x.checkEqualAddress(t.detail.address,null===n||void 0===n?void 0:n.address)&&(a?this.setState({max:a()}):this.setState({max:n.userBalance}))}},{key:"render",value:function(){var t,e=this,n=["InputTokenAmount"],a=this.props,i=a.balanceLabel,r=a.label,s=this.state,o=s.max,u=s.token,c=s.showIcon,l=s.onChange,d=s.id,p=i||"Balance",h=Object(m.jsxs)(tt,{className:"available",children:[p,":"," ",x.smartFormatTokensDisplay(o,u||this.vaultinator3000.wrappedCoin,!0)]}),y=(null===u||void 0===u?void 0:u.symbol)||(null===(t=this.vaultinator3000.currentChain)||void 0===t?void 0:t.coin)||"";u&&null!==u.token0&&(y="LP");var b=Object(m.jsx)(m.Fragment,{});r&&(b=Object(m.jsx)(et,{size:"1",className:"Label",children:r}));var v=Object(m.jsx)(m.Fragment,{});c&&(v=Object(m.jsx)(st,{token:u,height:"60",width:"60",vaultinator3000:this.vaultinator3000}),n.push("Icon"));var f=Object(m.jsx)(m.Fragment,{});return u&&(f=Object(m.jsx)(lt,{token:u,mode:"text",vaultinator3000:this.vaultinator3000})),Object(m.jsx)(tt,{className:n.join(" "),children:Object(m.jsxs)(tt,{children:[h,Object(m.jsxs)(tt,{className:"inputContainer",children:[Object(m.jsx)(tt,{className:"LabelContainer",children:b}),v,Object(m.jsx)(ot,{id:d,ref:this.ref_input,onChange:l,type:"number",min:"0",placeholder:"0"}),Object(m.jsxs)(tt,{className:"info",children:[Object(m.jsx)(et,{size:y.length>4?-1:0,children:y}),Object(m.jsx)(it,{buttonStyle:"1",onClick:function(){return e.onClick_max()},children:"Max"})]})]}),Object(m.jsx)(tt,{className:"AddButton",children:f})]})})}}]),n}(H.a.Component),pt=function(t){Object(p.a)(n,t);var e=Object(h.a)(n);function n(t){var a;return Object(u.a)(this,n),(a=e.call(this,t)).state=Object(r.a)(Object(r.a)({},a.state),{},{onChangeMoonChef:t.onChangeMoonChef||null,onChangeVault:t.onChangeVault||null,onChangePool:t.onChangePool||null,vault:t.vault,pool:t.pool}),a.checkUpdate_moonChef=a.checkUpdate_moonChef.bind(Object(U.a)(a)),a.checkUpdate_vault=a.checkUpdate_vault.bind(Object(U.a)(a)),a.checkUpdate_pool=a.checkUpdate_pool.bind(Object(U.a)(a)),a.checkUpdate_token=a.checkUpdate_token.bind(Object(U.a)(a)),a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){Object(l.a)(Object(d.a)(n.prototype),"componentDidMount",this).call(this),document.addEventListener("moonChef_info",this.checkUpdate_moonChef),document.addEventListener("vault_userInfo",this.checkUpdate_vault),document.addEventListener("pool_userInfo",this.checkUpdate_pool)}},{key:"componentWillUnmount",value:function(){Object(l.a)(Object(d.a)(n.prototype),"componentWillUnmount",this).call(this),document.removeEventListener("moonChef_info",this.checkUpdate_moonChef),document.removeEventListener("vault_userInfo",this.checkUpdate_vault),document.removeEventListener("pool_userInfo",this.checkUpdate_pool)}},{key:"checkUpdate_token",value:function(t){var e;x.checkEqualAddress(t.detail.address,null===(e=this.state.token)||void 0===e?void 0:e.address)&&(this.state.onChangeMoonChef||this.state.onChangeVault||this.state.onChangePool||Object(l.a)(Object(d.a)(n.prototype),"checkUpdate_token",this).call(this,t))}},{key:"checkUpdate_vault",value:function(t){var e;this.props.vault&&x.checkEqualAddress(t.detail.address,null===(e=this.props.vault)||void 0===e?void 0:e.address)&&this.state.onChangeVault&&this.setState({max:this.state.onChangeVault()})}},{key:"checkUpdate_pool",value:function(t){var e;this.props.pool&&x.checkEqualAddress(t.detail.address,null===(e=this.props.pool)||void 0===e?void 0:e.address)&&this.state.onChangePool&&this.setState({max:this.state.onChangePool()})}},{key:"checkUpdate_moonChef",value:function(){this.state.onChangeMoonChef&&this.setState({max:this.state.onChangeMoonChef()})}}]),n}(dt),ht={display:"flex"},yt={calculator:function(t,e){return Object(m.jsxs)("svg",{className:t,onClick:e,viewBox:"0 0 24 24",width:"18px",children:[Object(m.jsx)("path",{d:"M19 3H5C3.9 3 3 3.9 3 5V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19V5C21 3.9 20.1 3 19 3ZM19 19H5V5H19V19Z"}),Object(m.jsx)("path",{d:"M11.25 7.72H6.25V9.22H11.25V7.72Z"}),Object(m.jsx)("path",{d:"M18 15.75H13V17.25H18V15.75Z"}),Object(m.jsx)("path",{d:"M18 13.25H13V14.75H18V13.25Z"}),Object(m.jsx)("path",{d:"M8 18H9.5V16H11.5V14.5H9.5V12.5H8V14.5H6V16H8V18Z"}),Object(m.jsx)("path",{d:"M14.09 10.95L15.5 9.54L16.91 10.95L17.97 9.89L16.56 8.47L17.97 7.06L16.91 6L15.5 7.41L14.09 6L13.03 7.06L14.44 8.47L13.03 9.89L14.09 10.95Z"})]})},exclamation:function(t,e){return Object(m.jsxs)("svg",{className:t,onClick:e,viewBox:"0 0 512 512",children:[Object(m.jsx)("path",{d:"M 256 8 C 119.043 8 8 119.083 8 256 C 8 392.997 119.043 504 256 504 C 392.957 504 504 392.997 504 256 C 504 119.083 392.957 8 256 8 Z M 256 456 C 145.468 456 56 366.569 56 256 C 56 145.505 145.472 56 256 56 C 366.491 56 456 145.471 456 256 C 456 366.53 366.569 456 256 456 Z"}),Object(m.jsx)("path",{d:"M 298 368 C 298 391.159 279.159 410 256 410 C 232.841 410 214 391.159 214 368 C 214 344.841 232.841 326 256 326 C 279.159 326 298 344.841 298 368 Z"}),Object(m.jsx)("path",{d:"M 204.538 122.406 L 218.138 285.558 C 218.777 298.331 229.319 308.359 242.108 308.359 L 271.778 308.359 C 284.567 308.359 295.109 298.331 295.748 285.558 L 309.348 122.406 C 310.033 108.697 299.104 97.207 285.378 97.207 L 228.508 97.207 C 214.782 97.207 203.853 108.697 204.538 122.406 Z"})]})},info:function(t,e){return Object(m.jsxs)("svg",{className:t,onClick:e,viewBox:"0 0 16 16",children:[Object(m.jsx)("path",{d:"M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"}),Object(m.jsx)("path",{d:"m8.93 6.588-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533L8.93 6.588zM9 4.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0z"})]})},refresh:function(t,e){return Object(m.jsx)("svg",{className:t,onClick:e,viewBox:"0 0 64 64",children:Object(m.jsx)("path",{d:"M39.777 28.593l12.26 11.273L62 26l-4.63-3.103-3.332 4.11A26.995 26.995 0 0 0 28 6C13.48 6 2 18.488 2 33a25.791 25.791 0 0 0 26 26 26.924 26.924 0 0 0 18.953-7.719l-4.244-4.241A20.967 20.967 0 0 1 28 53 19.786 19.786 0 0 1 8 33c0-11.203 8.788-21 20-21a20.979 20.979 0 0 1 20.126 16.12l-4.288-3.943z"})})},question:function(t,e,n,a){return Object(m.jsx)("div",{title:n,style:ht,ref:a,children:Object(m.jsx)("svg",{className:t,onClick:e,viewBox:"0 0 24 24",children:Object(m.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 12 2ZM12 20C7.59 20 4 16.41 4 12C4 7.59 7.59 4 12 4C16.41 4 20 7.59 20 12C20 16.41 16.41 20 12 20ZM11 16H13V18H11V16ZM12.61 6.04C10.55 5.74 8.73 7.01 8.18 8.83C8 9.41 8.44 10 9.05 10H9.25C9.66 10 9.99 9.71 10.13 9.33C10.45 8.44 11.4 7.83 12.43 8.05C13.38 8.25 14.08 9.18 14 10.15C13.9 11.49 12.38 11.78 11.55 13.03C11.55 13.04 11.54 13.04 11.54 13.05C11.53 13.07 11.52 13.08 11.51 13.1C11.42 13.25 11.33 13.42 11.26 13.6C11.25 13.63 11.23 13.65 11.22 13.68C11.21 13.7 11.21 13.72 11.2 13.75C11.08 14.09 11 14.5 11 15H13C13 14.58 13.11 14.23 13.28 13.93C13.3 13.9 13.31 13.87 13.33 13.84C13.41 13.7 13.51 13.57 13.61 13.45C13.62 13.44 13.63 13.42 13.64 13.41C13.74 13.29 13.85 13.18 13.97 13.07C14.93 12.16 16.23 11.42 15.96 9.51C15.72 7.77 14.35 6.3 12.61 6.04Z"})})})},check:function(t,e){return Object(m.jsx)("svg",{className:t,onClick:e,viewBox:"0 0 24 24",width:"18px",children:Object(m.jsx)("path",{d:"M23 12L20.56 9.21L20.9 5.52L17.29 4.7L15.4 1.5L12 2.96L8.6 1.5L6.71 4.69L3.1 5.5L3.44 9.2L1 12L3.44 14.79L3.1 18.49L6.71 19.31L8.6 22.5L12 21.03L15.4 22.49L17.29 19.3L20.9 18.48L20.56 14.79L23 12ZM9.38 16.01L7 13.61C6.61 13.22 6.61 12.59 7 12.2L7.07 12.13C7.46 11.74 8.1 11.74 8.49 12.13L10.1 13.75L15.25 8.59C15.64 8.2 16.28 8.2 16.67 8.59L16.74 8.66C17.13 9.05 17.13 9.68 16.74 10.07L10.82 16.01C10.41 16.4 9.78 16.4 9.38 16.01Z"})})},link:function(t,e,n){return Object(m.jsx)("div",{title:n,style:ht,children:Object(m.jsx)("svg",{className:t,onClick:e,viewBox:"0 0 24 24",children:Object(m.jsx)("path",{d:"M18 19H6C5.45 19 5 18.55 5 18V6C5 5.45 5.45 5 6 5H11C11.55 5 12 4.55 12 4C12 3.45 11.55 3 11 3H5C3.89 3 3 3.9 3 5V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19V13C21 12.45 20.55 12 20 12C19.45 12 19 12.45 19 13V18C19 18.55 18.55 19 18 19ZM14 4C14 4.55 14.45 5 15 5H17.59L8.46 14.13C8.07 14.52 8.07 15.15 8.46 15.54C8.85 15.93 9.48 15.93 9.87 15.54L19 6.41V9C19 9.55 19.45 10 20 10C20.55 10 21 9.55 21 9V4C21 3.45 20.55 3 20 3H15C14.45 3 14 3.45 14 4Z"})})})},gitbook:function(t,e){return Object(m.jsx)("svg",{className:t,onClick:e,viewBox:"0 0 1067 769",width:"32px",height:"32px",preserveAspectRatio:"xMidYMid meet",stroke:"none",children:Object(m.jsx)("g",{children:Object(m.jsx)("path",{fillRule:"evenodd",d:"M480.026 640.677c17.205 0 31.2 13.997 31.2 31.194s-13.995 31.193-31.2 31.193c-17.197 0-31.193-13.996-31.193-31.193 0-17.197 13.996-31.194 31.193-31.194m489.93-193.226c-17.203 0-31.2-13.998-31.2-31.195 0-17.204 13.997-31.2 31.2-31.2 17.198 0 31.194 13.996 31.194 31.2 0 17.197-13.996 31.195-31.193 31.195m0-127.804c-53.269 0-96.609 43.34-96.609 96.609 0 10.373 1.723 20.702 5.123 30.741L559.328 616.879c-18.132-26.128-47.521-41.617-79.302-41.617-36.821 0-70.391 21.065-86.63 54.003L106.68 478.109c-30.288-15.927-52.965-65.817-50.56-111.223 1.248-23.687 9.438-42.071 21.897-49.17 7.916-4.493 17.436-4.099 27.526 1.188l1.916 1.01c75.96 40.022 324.6 170.981 335.063 175.844 16.157 7.47 25.14 10.5 52.659-2.547l513.958-267.3c7.53-2.844 16.315-10.062 16.315-21.023 0-15.205-15.72-21.199-15.765-21.199-29.218-14.018-74.163-35.054-117.987-55.57C798.033 84.26 691.861 34.547 645.23 10.132c-40.253-21.072-72.655-3.311-78.432.282l-11.227 5.555C345.727 119.743 64.898 258.826 48.911 268.553 20.278 285.973 2.547 320.679.252 363.768c-3.586 68.304 31.261 139.506 81.069 165.634l303.172 156.354c6.83 47.306 47.55 82.725 95.532 82.725 52.78 0 95.808-42.546 96.603-95.14L910.541 492.38c16.93 13.233 37.92 20.486 59.416 20.486 53.268 0 96.61-43.341 96.61-96.61s-43.342-96.61-96.61-96.61"})})})},telegram:function(t,e){return Object(m.jsx)("svg",{className:t,onClick:e,viewBox:"0 0 16 16",width:"32px",height:"32px",children:Object(m.jsx)("g",{children:Object(m.jsx)("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM8.287 5.906c-.778.324-2.334.994-4.666 2.01-.378.15-.577.298-.595.442-.03.243.275.339.69.47l.175.055c.408.133.958.288 1.243.294.26.006.549-.1.868-.32 2.179-1.471 3.304-2.214 3.374-2.23.05-.012.12-.026.166.016.047.041.042.12.037.141-.03.129-1.227 1.241-1.846 1.817-.193.18-.33.307-.358.336a8.154 8.154 0 0 1-.188.186c-.38.366-.664.64.015 1.088.327.216.589.393.85.571.284.194.568.387.936.629.093.06.183.125.27.187.331.236.63.448.997.414.214-.02.435-.22.547-.82.265-1.417.786-4.486.906-5.751a1.426 1.426 0 0 0-.013-.315.337.337 0 0 0-.114-.217.526.526 0 0 0-.31-.093c-.3.005-.763.166-2.984 1.09z"})})})},twitter:function(t,e){return Object(m.jsx)("svg",{className:t,onClick:e,viewBox:"0 0 256 209",width:"32px",height:"32px",children:Object(m.jsx)("g",{children:Object(m.jsx)("path",{d:"M256,25.4500259 C246.580841,29.6272672 236.458451,32.4504868 225.834156,33.7202333 C236.678503,27.2198053 245.00583,16.9269929 248.927437,4.66307685 C238.779765,10.6812633 227.539325,15.0523376 215.57599,17.408298 C205.994835,7.2006971 192.34506,0.822 177.239197,0.822 C148.232605,0.822 124.716076,24.3375931 124.716076,53.3423116 C124.716076,57.4586875 125.181462,61.4673784 126.076652,65.3112644 C82.4258385,63.1210453 43.7257252,42.211429 17.821398,10.4359288 C13.3005011,18.1929938 10.710443,27.2151234 10.710443,36.8402889 C10.710443,55.061526 19.9835254,71.1374907 34.0762135,80.5557137 C25.4660961,80.2832239 17.3681846,77.9207088 10.2862577,73.9869292 C10.2825122,74.2060448 10.2825122,74.4260967 10.2825122,74.647085 C10.2825122,100.094453 28.3867003,121.322443 52.413563,126.14673 C48.0059695,127.347184 43.3661509,127.988612 38.5755734,127.988612 C35.1914554,127.988612 31.9009766,127.659938 28.694773,127.046602 C35.3777973,147.913145 54.7742053,163.097665 77.7569918,163.52185 C59.7820257,177.607983 37.1354036,186.004604 12.5289147,186.004604 C8.28987161,186.004604 4.10888474,185.75646 0,185.271409 C23.2431033,200.173139 50.8507261,208.867532 80.5109185,208.867532 C177.116529,208.867532 229.943977,128.836982 229.943977,59.4326002 C229.943977,57.1552968 229.893412,54.8901664 229.792282,52.6381454 C240.053257,45.2331635 248.958338,35.9825545 256,25.4500259"})})})},shield:function(t,e){return Object(m.jsx)("svg",{className:t,onClick:e,viewBox:"0 0 28 28",width:"32px",height:"32px",children:Object(m.jsx)("path",{d:"M12,12H19C18.47,16.11 15.72,19.78 12,20.92V12H5V6.3L12,3.19M12,1L3,5V11C3,16.55 6.84,21.73 12,23C17.16,21.73 21,16.55 21,11V5L12,1Z"})})},home:function(t,e){return Object(m.jsx)("svg",{className:t,onClick:e,viewBox:"0 0 512 512",width:"32px",height:"32px",children:Object(m.jsx)("path",{d:"M426.783 174.916V69.871H325.558v28.05l-69.559-52.909L0 239.736l61.795 81.243 23.421-17.814v163.823h147.007V356.195h47.554v110.792h147.007V303.161l23.421 17.815L512 239.734l-85.217-64.818zm-30.034 262.037h-86.938V326.161H202.189v110.792H115.25V280.32l140.751-107.06 140.748 107.057v156.636zm47.732-158.064l-188.48-143.364L67.517 278.891l-25.431-33.433 213.912-162.71 99.593 75.753V99.905h41.157v89.901l73.163 55.65-25.43 33.433z"})})},vault:function(t,e){return Object(m.jsxs)("svg",{className:t,onClick:e,viewBox:"0 0 364 364",width:"32px",height:"32px",children:[Object(m.jsx)("path",{d:" M 5.58 0.00 L 358.37 0.00 C 360.77 1.76 362.92 3.94 364.00 6.78 L 364.00 356.46 C 362.86 360.58 359.30 363.20 355.22 364.00 L 9.37 364.00 C 5.04 363.48 1.21 360.82 0.00 356.53 L 0.00 6.75 C 1.08 3.93 3.22 1.79 5.58 0.00 M 31.35 40.15 C 28.27 41.34 26.86 44.85 26.99 47.96 C 26.97 55.45 27.03 62.94 27.00 70.44 C 22.20 72.45 17.68 75.61 15.25 80.34 C 12.04 85.65 12.62 92.08 12.55 98.02 C 12.70 106.32 12.27 114.65 12.78 122.94 C 13.25 131.28 19.54 138.13 27.00 141.23 C 26.99 168.26 27.02 195.29 26.99 222.32 C 22.12 224.26 17.73 227.60 15.23 232.28 C 11.86 237.92 12.67 244.74 12.55 251.01 C 12.74 259.36 12.14 267.75 12.92 276.08 C 13.86 283.90 19.97 290.08 27.00 293.04 C 27.43 302.30 26.02 311.72 27.92 320.85 C 29.95 322.40 32.18 324.10 34.88 323.98 C 132.60 324.03 230.33 323.96 328.05 324.02 C 331.11 324.33 333.81 322.73 336.07 320.86 C 336.57 318.61 337.03 316.33 337.01 314.02 C 336.98 280.86 337.01 247.71 337.00 214.56 C 340.37 214.55 343.76 214.24 346.96 213.08 C 347.87 210.82 349.14 208.58 349.01 206.05 C 349.01 190.02 348.98 173.98 349.02 157.95 C 349.08 155.29 348.48 152.36 346.36 150.57 C 343.84 148.20 340.12 149.18 337.00 148.94 C 336.98 114.94 337.03 80.93 336.98 46.93 C 337.01 42.68 333.27 39.05 328.95 39.68 C 231.30 39.63 133.64 39.69 35.99 39.65 C 34.44 39.70 32.86 39.74 31.35 40.15 Z"}),Object(m.jsx)("path",{d:" M 41.00 53.01 C 135.00 53.01 229.00 53.01 323.00 53.01 C 323.00 85.00 323.00 117.00 323.00 148.99 C 317.97 149.04 312.93 148.88 307.91 149.01 C 305.43 148.81 303.73 150.88 301.91 152.19 C 301.11 158.11 301.46 164.09 301.40 170.05 C 301.45 182.37 301.32 194.70 301.44 207.02 C 301.38 210.02 302.96 213.37 306.13 214.06 C 311.70 214.89 317.37 214.27 322.99 214.44 C 323.01 246.29 322.99 278.15 323.00 310.00 C 229.00 310.00 135.00 310.00 41.00 310.00 C 41.00 304.36 41.00 298.73 41.00 293.10 C 47.74 290.18 53.64 284.44 54.95 276.99 C 55.90 270.36 55.32 263.64 55.47 256.98 C 55.34 250.62 55.89 244.20 54.91 237.89 C 53.42 230.71 47.83 224.84 41.02 222.33 C 40.97 195.30 41.02 168.28 41.00 141.26 C 45.81 139.01 50.41 135.79 52.86 130.94 C 56.15 125.20 55.37 118.34 55.48 112.00 C 55.31 104.02 55.80 96.02 55.19 88.06 C 54.54 79.97 48.44 73.20 41.00 70.44 C 41.00 64.63 41.00 58.82 41.00 53.01 M 169.43 97.50 C 151.49 100.20 134.43 108.72 121.73 121.71 C 108.39 134.94 99.75 152.75 97.50 171.40 C 95.11 191.09 99.73 211.65 110.77 228.19 C 123.23 247.29 143.55 261.09 166.00 265.29 C 188.89 269.93 213.54 264.15 232.28 250.28 C 249.23 237.80 261.50 218.95 265.45 198.21 C 269.58 177.99 265.83 156.33 255.32 138.59 C 244.11 119.44 225.18 104.93 203.66 99.40 C 192.55 96.35 180.81 96.15 169.43 97.50 Z"}),Object(m.jsx)("path",{d:" M 31.33 83.42 C 36.26 81.36 42.02 85.65 41.95 90.87 C 42.07 100.62 42.00 110.37 41.98 120.12 C 42.20 123.43 39.68 125.84 37.67 128.10 C 35.23 128.35 32.77 128.35 30.33 128.10 C 28.30 125.83 25.80 123.39 26.02 120.07 C 25.96 110.69 26.01 101.31 26.00 91.93 C 25.87 88.37 27.81 84.60 31.33 83.42 Z"}),Object(m.jsx)("path",{d:" M 136.61 126.59 C 147.35 117.47 160.97 111.79 175.00 110.58 C 175.00 116.72 175.00 122.86 175.00 129.00 C 167.35 130.53 159.67 132.75 153.22 137.30 C 151.82 137.97 150.05 139.91 148.52 138.53 C 144.37 134.74 140.50 130.64 136.61 126.59 Z"}),Object(m.jsx)("path",{d:" M 189.00 110.58 C 203.04 111.79 216.68 117.46 227.40 126.60 C 223.52 130.60 219.71 134.68 215.59 138.44 C 214.01 140.01 212.16 137.96 210.70 137.25 C 204.28 132.72 196.61 130.54 189.00 129.00 C 189.00 122.86 189.00 116.72 189.00 110.58 Z"}),Object(m.jsx)("path",{d:" M 125.82 137.63 C 126.53 136.07 128.02 137.55 128.72 138.21 C 132.51 141.88 136.11 145.75 139.94 149.37 C 134.37 156.88 130.64 165.72 129.39 175.01 C 123.19 174.98 116.99 175.02 110.80 174.97 C 112.14 161.47 117.22 148.17 125.82 137.63 Z"}),Object(m.jsx)("path",{d:" M 236.57 137.14 C 236.80 137.08 237.27 136.98 237.50 136.93 C 246.61 147.46 251.77 161.19 253.20 174.96 C 247.01 174.86 240.79 175.35 234.63 174.74 C 233.19 165.58 229.63 156.80 224.05 149.37 C 228.35 145.42 232.15 140.94 236.57 137.14 Z"}),Object(m.jsx)("path",{d:" M 178.23 142.31 C 195.56 140.44 213.18 151.57 219.02 167.99 C 223.63 180.38 221.50 195.04 213.40 205.53 C 203.72 218.75 185.30 224.47 169.79 219.23 C 157.61 215.39 147.79 205.22 144.17 193.00 C 141.45 183.61 142.17 173.20 146.50 164.40 C 152.34 152.21 164.80 143.64 178.23 142.31 M 178.35 165.44 C 171.56 167.04 165.93 173.09 165.50 180.15 C 164.31 189.47 172.52 198.70 181.98 198.16 C 191.49 198.71 199.68 189.46 198.50 180.11 C 197.96 170.54 187.63 162.93 178.35 165.44 Z"}),Object(m.jsx)("path",{d:" M 315.00 163.00 C 321.67 163.00 328.33 163.00 335.00 163.00 C 335.00 175.66 335.00 188.32 335.00 200.98 C 328.35 200.96 321.70 201.03 315.05 200.93 C 314.93 188.29 315.03 175.64 315.00 163.00 Z"}),Object(m.jsx)("path",{d:" M 110.80 188.35 C 117.01 188.33 123.22 188.32 129.43 188.36 C 130.71 197.67 134.29 206.64 140.07 214.07 C 135.43 218.14 131.88 223.63 126.31 226.52 C 117.53 215.69 112.02 202.24 110.80 188.35 Z"}),Object(m.jsx)("path",{d:" M 234.56 188.37 C 240.77 188.31 246.99 188.33 253.20 188.35 C 251.85 201.95 246.82 215.51 237.88 225.95 C 237.43 225.94 236.53 225.93 236.07 225.93 C 231.72 222.32 228.04 217.96 223.93 214.07 C 229.69 206.63 233.29 197.68 234.56 188.37 Z"}),Object(m.jsx)("path",{d:" M 136.57 236.99 C 141.07 232.73 145.04 227.77 149.95 224.03 C 157.44 229.22 165.93 232.98 175.00 234.27 C 175.00 240.54 175.01 246.81 174.99 253.09 C 169.47 252.04 163.87 251.19 158.56 249.25 C 150.56 246.54 143.25 242.12 136.57 236.99 Z"}),Object(m.jsx)("path",{d:" M 189.00 234.27 C 198.10 232.98 206.63 229.20 214.12 223.96 C 218.77 227.98 223.11 232.42 227.23 236.98 C 216.52 246.15 202.86 251.17 189.01 253.09 C 188.99 246.81 189.00 240.54 189.00 234.27 Z"}),Object(m.jsx)("path",{d:" M 31.46 234.98 C 33.15 234.98 34.85 234.98 36.55 234.98 C 38.11 236.16 40.07 237.10 40.95 238.96 C 42.29 241.41 41.98 244.27 42.04 246.95 C 41.92 255.32 42.10 263.70 41.98 272.08 C 42.06 276.32 38.45 280.68 33.97 280.22 C 30.99 280.48 28.23 278.60 26.98 275.97 C 25.56 273.20 26.08 269.99 25.97 267.00 C 26.15 258.65 25.77 250.29 26.13 241.95 C 26.34 238.72 28.86 236.51 31.46 234.98 Z"})]})},trade:function(t,e){return Object(m.jsx)("svg",{className:t,onClick:e,viewBox:"0 0 28 28",width:"32px",height:"32px",children:Object(m.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18.86 4.86003L21.65 7.65003C21.84 7.84003 21.84 8.16003 21.64 8.35003L18.85 11.14C18.54 11.46 18 11.24 18 10.79V9.00003H4C3.45 9.00003 3 8.55003 3 8.00003C3 7.45003 3.45 7.00003 4 7.00003H18V5.21003C18 4.76003 18.54 4.54003 18.86 4.86003ZM5.14001 19.14L2.35001 16.35C2.16001 16.16 2.16001 15.84 2.36001 15.65L5.15001 12.86C5.46001 12.54 6.00001 12.76 6.00001 13.21V15H20C20.55 15 21 15.45 21 16C21 16.55 20.55 17 20 17H6.00001V18.79C6.00001 19.24 5.46001 19.46 5.14001 19.14Z"})})},viewMode_grid:function(t,e){return Object(m.jsx)("svg",{className:t,onClick:e,viewBox:"0 0 24 24",width:"32px",height:"32px",children:Object(m.jsx)("path",{d:"M4.5 12H7.5C8.05 12 8.5 11.55 8.5 11V7C8.5 6.45 8.05 6 7.5 6H4.5C3.95 6 3.5 6.45 3.5 7V11C3.5 11.55 3.95 12 4.5 12ZM4.5 19H7.5C8.05 19 8.5 18.55 8.5 18V14C8.5 13.45 8.05 13 7.5 13H4.5C3.95 13 3.5 13.45 3.5 14V18C3.5 18.55 3.95 19 4.5 19ZM10.5 19H13.5C14.05 19 14.5 18.55 14.5 18V14C14.5 13.45 14.05 13 13.5 13H10.5C9.95 13 9.5 13.45 9.5 14V18C9.5 18.55 9.95 19 10.5 19ZM16.5 19H19.5C20.05 19 20.5 18.55 20.5 18V14C20.5 13.45 20.05 13 19.5 13H16.5C15.95 13 15.5 13.45 15.5 14V18C15.5 18.55 15.95 19 16.5 19ZM10.5 12H13.5C14.05 12 14.5 11.55 14.5 11V7C14.5 6.45 14.05 6 13.5 6H10.5C9.95 6 9.5 6.45 9.5 7V11C9.5 11.55 9.95 12 10.5 12ZM15.5 7V11C15.5 11.55 15.95 12 16.5 12H19.5C20.05 12 20.5 11.55 20.5 11V7C20.5 6.45 20.05 6 19.5 6H16.5C15.95 6 15.5 6.45 15.5 7Z"})})},viewMode_table:function(t,e){return Object(m.jsx)("svg",{className:t,onClick:e,viewBox:"0 0 24 24",width:"32px",height:"32px",children:Object(m.jsx)("path",{d:"M4.5 14H6.5C7.05 14 7.5 13.55 7.5 13V11C7.5 10.45 7.05 10 6.5 10H4.5C3.95 10 3.5 10.45 3.5 11V13C3.5 13.55 3.95 14 4.5 14ZM4.5 19H6.5C7.05 19 7.5 18.55 7.5 18V16C7.5 15.45 7.05 15 6.5 15H4.5C3.95 15 3.5 15.45 3.5 16V18C3.5 18.55 3.95 19 4.5 19ZM4.5 9H6.5C7.05 9 7.5 8.55 7.5 8V6C7.5 5.45 7.05 5 6.5 5H4.5C3.95 5 3.5 5.45 3.5 6V8C3.5 8.55 3.95 9 4.5 9ZM9.5 14H19.5C20.05 14 20.5 13.55 20.5 13V11C20.5 10.45 20.05 10 19.5 10H9.5C8.95 10 8.5 10.45 8.5 11V13C8.5 13.55 8.95 14 9.5 14ZM9.5 19H19.5C20.05 19 20.5 18.55 20.5 18V16C20.5 15.45 20.05 15 19.5 15H9.5C8.95 15 8.5 15.45 8.5 16V18C8.5 18.55 8.95 19 9.5 19ZM8.5 6V8C8.5 8.55 8.95 9 9.5 9H19.5C20.05 9 20.5 8.55 20.5 8V6C20.5 5.45 20.05 5 19.5 5H9.5C8.95 5 8.5 5.45 8.5 6Z"})})},wallet_metaMask:function(t,e){return Object(m.jsxs)("svg",{className:t,onClick:e,viewBox:"0 0 40 40",width:"32px",children:[Object(m.jsx)("path",{d:"M36.0112 3.33337L22.1207 13.6277L24.7012 7.56091L36.0112 3.33337Z",fill:"#E17726"}),Object(m.jsx)("path",{d:"M4.00261 3.33337L17.7558 13.7238L15.2989 7.56091L4.00261 3.33337Z",fill:"#E27625"}),Object(m.jsx)("path",{d:"M31.0149 27.2023L27.3227 32.8573L35.2287 35.0397L37.4797 27.3258L31.0149 27.2023Z",fill:"#E27625"}),Object(m.jsx)("path",{d:"M2.53386 27.3258L4.77116 35.0397L12.6772 32.8573L8.9987 27.2023L2.53386 27.3258Z",fill:"#E27625"}),Object(m.jsx)("path",{d:"M12.2518 17.6496L10.0419 20.9712L17.8793 21.3281L17.6048 12.8867L12.2518 17.6496Z",fill:"#E27625"}),Object(m.jsx)("path",{d:"M27.762 17.6494L22.3129 12.7905L22.1207 21.3279L29.9581 20.9711L27.762 17.6494Z",fill:"#E27625"}),Object(m.jsx)("path",{d:"M12.6772 32.8574L17.3989 30.5652L13.336 27.3809L12.6772 32.8574Z",fill:"#E27625"}),Object(m.jsx)("path",{d:"M22.6009 30.5652L27.3226 32.8574L26.6637 27.3809L22.6009 30.5652Z",fill:"#E27625"}),Object(m.jsx)("path",{d:"M27.3226 32.8575L22.6009 30.5653L22.9715 33.6399L22.9303 34.9301L27.3226 32.8575Z",fill:"#D5BFB2"}),Object(m.jsx)("path",{d:"M12.6772 32.8575L17.0694 34.9301L17.042 33.6399L17.3989 30.5653L12.6772 32.8575Z",fill:"#D5BFB2"}),Object(m.jsx)("path",{d:"M17.1518 25.3495L13.2262 24.1965L15.9988 22.92L17.1518 25.3495Z",fill:"#233447"}),Object(m.jsx)("path",{d:"M22.848 25.3495L24.001 22.92L26.801 24.1965L22.848 25.3495Z",fill:"#233447"}),Object(m.jsx)("path",{d:"M12.6773 32.8573L13.3635 27.2023L8.99876 27.3258L12.6773 32.8573Z",fill:"#CC6228"}),Object(m.jsx)("path",{d:"M26.6364 27.2023L27.3227 32.8573L31.0149 27.3258L26.6364 27.2023Z",fill:"#CC6228"}),Object(m.jsx)("path",{d:"M29.9581 20.9709L22.1207 21.3278L22.8482 25.3495L24.0011 22.92L26.8012 24.1965L29.9581 20.9709Z",fill:"#CC6228"}),Object(m.jsx)("path",{d:"M13.2263 24.1965L15.9989 22.92L17.1519 25.3495L17.8793 21.3278L10.0419 20.9709L13.2263 24.1965Z",fill:"#CC6228"}),Object(m.jsx)("path",{d:"M10.0419 20.9709L13.3361 27.3809L13.2263 24.1965L10.0419 20.9709Z",fill:"#E27525"}),Object(m.jsx)("path",{d:"M26.8011 24.1965L26.6638 27.3809L29.958 20.9709L26.8011 24.1965Z",fill:"#E27525"}),Object(m.jsx)("path",{d:"M17.8793 21.3278L17.1519 25.3494L18.0715 30.0985L18.2637 23.8396L17.8793 21.3278Z",fill:"#E27525"}),Object(m.jsx)("path",{d:"M22.1205 21.3278L21.7499 23.8258L21.9283 30.0985L22.848 25.3494L22.1205 21.3278Z",fill:"#E27525"}),Object(m.jsx)("path",{d:"M22.848 25.3496L21.9284 30.0987L22.601 30.5654L26.6638 27.381L26.8011 24.1967L22.848 25.3496Z",fill:"#F5841F"}),Object(m.jsx)("path",{d:"M13.2262 24.1967L13.336 27.381L17.3989 30.5654L18.0714 30.0987L17.1518 25.3496L13.2262 24.1967Z",fill:"#F5841F"}),Object(m.jsx)("path",{d:"M22.9303 34.93L22.9715 33.6398L22.6284 33.3378H17.3714L17.042 33.6398L17.0694 34.93L12.6772 32.8574L14.2145 34.1202L17.3302 36.2751H22.6696L25.7853 34.1202L27.3226 32.8574L22.9303 34.93Z",fill:"#C0AC9D"}),Object(m.jsx)("path",{d:"M22.601 30.5653L21.9284 30.0986H18.0715L17.3989 30.5653L17.0421 33.6399L17.3715 33.3379H22.6285L22.9716 33.6399L22.601 30.5653Z",fill:"#161616"}),Object(m.jsx)("path",{d:"M36.5875 14.3003L37.7542 8.61779L36.011 3.33337L22.6009 13.2846L27.7618 17.6493L35.0365 19.7768L36.6424 17.8964L35.9424 17.3886L37.0679 16.3728L36.2169 15.7003L37.3287 14.863L36.5875 14.3003Z",fill:"#763E1A"}),Object(m.jsx)("path",{d:"M2.24573 8.61779L3.42615 14.3003L2.67123 14.863L3.78302 15.7003L2.93202 16.3728L4.05753 17.3886L3.35752 17.8964L4.96343 19.7768L12.2518 17.6493L17.399 13.2846L4.00263 3.33337L2.24573 8.61779Z",fill:"#763E1A"}),Object(m.jsx)("path",{d:"M35.0365 19.777L27.7619 17.6495L29.958 20.9712L26.6638 27.3811L31.0149 27.3262H37.4797L35.0365 19.777Z",fill:"#F5841F"}),Object(m.jsx)("path",{d:"M12.2517 17.6495L4.96332 19.777L2.53386 27.3262H8.99869L13.336 27.3811L10.0419 20.9712L12.2517 17.6495Z",fill:"#F5841F"}),Object(m.jsx)("path",{d:"M22.1205 21.3276L22.6009 13.2843L24.701 7.56067H15.2988L17.3988 13.2843L17.8792 21.3276L18.0577 23.8531L18.0714 30.0984H21.9283L21.9421 23.8531L22.1205 21.3276Z",fill:"#F5841F"})]})},wallet_walletConnect:function(t,e){return Object(m.jsx)("svg",{className:t,onClick:e,viewBox:"0 0 40 40",width:"32px",children:Object(m.jsx)("path",{d:"M8.68096 12.4756C14.9323 6.39698 25.0677 6.39698 31.3191 12.4756L32.0714 13.2071C32.384 13.511 32.384 14.0038 32.0714 14.3077L29.4978 16.8103C29.3415 16.9622 29.0881 16.9622 28.9318 16.8103L27.8965 15.8036C23.5354 11.563 16.4647 11.563 12.1036 15.8036L10.9948 16.8817C10.8385 17.0336 10.5851 17.0336 10.4288 16.8817L7.85517 14.3791C7.54261 14.0752 7.54261 13.5824 7.85517 13.2785L8.68096 12.4756ZM36.6417 17.6511L38.9322 19.8783C39.2448 20.1823 39.2448 20.675 38.9322 20.979L28.6039 31.022C28.2913 31.3259 27.7846 31.3259 27.472 31.022C27.472 31.022 27.472 31.022 27.472 31.022L20.1416 23.8942C20.0634 23.8182 19.9367 23.8182 19.8586 23.8942C19.8586 23.8942 19.8586 23.8942 19.8586 23.8942L12.5283 31.022C12.2157 31.3259 11.709 31.3259 11.3964 31.022C11.3964 31.022 11.3964 31.022 11.3964 31.022L1.06775 20.9788C0.755186 20.6749 0.755186 20.1821 1.06775 19.8782L3.35833 17.6509C3.6709 17.347 4.17767 17.347 4.49024 17.6509L11.8208 24.7789C11.8989 24.8549 12.0256 24.8549 12.1038 24.7789C12.1038 24.7789 12.1038 24.7789 12.1038 24.7789L19.4339 17.6509C19.7465 17.347 20.2533 17.347 20.5658 17.6509C20.5658 17.6509 20.5658 17.6509 20.5658 17.6509L27.8964 24.7789C27.9745 24.8549 28.1012 24.8549 28.1794 24.7789L35.5098 17.6511C35.8223 17.3471 36.3291 17.3471 36.6417 17.6511Z",fill:"#3389FB"})})},arrow_down:function(t,e){return Object(m.jsx)("svg",{className:t,onClick:e,viewBox:"0 0 24 24",width:"32px",children:Object(m.jsx)("path",{d:"M11 5V16.17L6.11997 11.29C5.72997 10.9 5.08997 10.9 4.69997 11.29C4.30997 11.68 4.30997 12.31 4.69997 12.7L11.29 19.29C11.68 19.68 12.31 19.68 12.7 19.29L19.29 12.7C19.68 12.31 19.68 11.68 19.29 11.29C18.9 10.9 18.27 10.9 17.88 11.29L13 16.17V5C13 4.45 12.55 4 12 4C11.45 4 11 4.45 11 5Z"})})},fuel:function(t,e){return Object(m.jsx)("svg",{className:t,onClick:e,width:"18",height:"20",viewBox:"0 0 18 20",children:Object(m.jsx)("path",{d:"M13.5215 0.618164L12.6818 1.57302L15.933 4.37393V13.2435C15.9114 13.6891 15.5239 14.0498 15.0502 14.0286C14.6196 14.0074 14.2751 13.6679 14.2536 13.2435V7.28093C14.2536 6.21998 13.3923 5.37122 12.3158 5.37122H11.8421V2.67641C11.8421 1.61546 10.9808 0.766697 9.90428 0.766697H1.93779C0.861242 0.766697 0 1.61546 0 2.67641V18.4421C0 18.9089 0.387559 19.2909 0.861242 19.2909H10.9808C11.4545 19.2909 11.8421 18.9089 11.8421 18.4421V6.64436H12.3158C12.6818 6.64436 12.9617 6.92021 12.9617 7.28093V13.2435C13.0048 14.4105 13.9737 15.3017 15.1579 15.2805C16.2775 15.2381 17.1818 14.3469 17.2248 13.2435V3.80102L13.5215 0.618164ZM9.66744 8.89358H2.17464V3.10079H9.66744V8.89358Z"})})},shieldLock:function(t,e){return Object(m.jsxs)("svg",{className:t,onClick:e,width:"24",height:"24",viewBox:"0 0 16 16",children:[Object(m.jsx)("path",{d:"M5.338 1.59a61.44 61.44 0 0 0-2.837.856.481.481 0 0 0-.328.39c-.554 4.157.726 7.19 2.253 9.188a10.725 10.725 0 0 0 2.287 2.233c.346.244.652.42.893.533.12.057.218.095.293.118a.55.55 0 0 0 .101.025.615.615 0 0 0 .1-.025c.076-.023.174-.061.294-.118.24-.113.547-.29.893-.533a10.726 10.726 0 0 0 2.287-2.233c1.527-1.997 2.807-5.031 2.253-9.188a.48.48 0 0 0-.328-.39c-.651-.213-1.75-.56-2.837-.855C9.552 1.29 8.531 1.067 8 1.067c-.53 0-1.552.223-2.662.524zM5.072.56C6.157.265 7.31 0 8 0s1.843.265 2.928.56c1.11.3 2.229.655 2.887.87a1.54 1.54 0 0 1 1.044 1.262c.596 4.477-.787 7.795-2.465 9.99a11.775 11.775 0 0 1-2.517 2.453 7.159 7.159 0 0 1-1.048.625c-.28.132-.581.24-.829.24s-.548-.108-.829-.24a7.158 7.158 0 0 1-1.048-.625 11.777 11.777 0 0 1-2.517-2.453C1.928 10.487.545 7.169 1.141 2.692A1.54 1.54 0 0 1 2.185 1.43 62.456 62.456 0 0 1 5.072.56z"}),Object(m.jsx)("path",{d:"M9.5 6.5a1.5 1.5 0 0 1-1 1.415l.385 1.99a.5.5 0 0 1-.491.595h-.788a.5.5 0 0 1-.49-.595l.384-1.99a1.5 1.5 0 1 1 2-1.415z"})]})},clipboard:function(t,e){return Object(m.jsxs)("svg",{className:t,onClick:e,width:"24",height:"24",viewBox:"0 0 16 16",children:[Object(m.jsx)("path",{fillRule:"evenodd",d:"M10.854 7.146a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 1 1 .708-.708L7.5 9.793l2.646-2.647a.5.5 0 0 1 .708 0z"}),Object(m.jsx)("path",{d:"M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"}),Object(m.jsx)("path",{d:"M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"})]})},checkCircle:function(t,e){return Object(m.jsxs)("svg",{className:t,onClick:e,width:"24",height:"24",viewBox:"0 0 16 16",children:[Object(m.jsx)("path",{d:"M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"}),Object(m.jsx)("path",{d:"M10.97 4.97a.235.235 0 0 0-.02.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-1.071-1.05z"})]})},settings:function(t,e,n){return Object(m.jsx)("div",{title:n,style:ht,children:Object(m.jsxs)("svg",{className:t,onClick:e,viewBox:"0 0 16 16",children:[Object(m.jsx)("path",{d:"M8 4.754a3.246 3.246 0 1 0 0 6.492 3.246 3.246 0 0 0 0-6.492zM5.754 8a2.246 2.246 0 1 1 4.492 0 2.246 2.246 0 0 1-4.492 0z"}),Object(m.jsx)("path",{d:"M9.796 1.343c-.527-1.79-3.065-1.79-3.592 0l-.094.319a.873.873 0 0 1-1.255.52l-.292-.16c-1.64-.892-3.433.902-2.54 2.541l.159.292a.873.873 0 0 1-.52 1.255l-.319.094c-1.79.527-1.79 3.065 0 3.592l.319.094a.873.873 0 0 1 .52 1.255l-.16.292c-.892 1.64.901 3.434 2.541 2.54l.292-.159a.873.873 0 0 1 1.255.52l.094.319c.527 1.79 3.065 1.79 3.592 0l.094-.319a.873.873 0 0 1 1.255-.52l.292.16c1.64.893 3.434-.902 2.54-2.541l-.159-.292a.873.873 0 0 1 .52-1.255l.319-.094c1.79-.527 1.79-3.065 0-3.592l-.319-.094a.873.873 0 0 1-.52-1.255l.16-.292c.893-1.64-.902-3.433-2.541-2.54l-.292.159a.873.873 0 0 1-1.255-.52l-.094-.319zm-2.633.283c.246-.835 1.428-.835 1.674 0l.094.319a1.873 1.873 0 0 0 2.693 1.115l.291-.16c.764-.415 1.6.42 1.184 1.185l-.159.292a1.873 1.873 0 0 0 1.116 2.692l.318.094c.835.246.835 1.428 0 1.674l-.319.094a1.873 1.873 0 0 0-1.115 2.693l.16.291c.415.764-.42 1.6-1.185 1.184l-.291-.159a1.873 1.873 0 0 0-2.693 1.116l-.094.318c-.246.835-1.428.835-1.674 0l-.094-.319a1.873 1.873 0 0 0-2.692-1.115l-.292.16c-.764.415-1.6-.42-1.184-1.185l.159-.291A1.873 1.873 0 0 0 1.945 8.93l-.319-.094c-.835-.246-.835-1.428 0-1.674l.319-.094A1.873 1.873 0 0 0 3.06 4.377l-.16-.292c-.415-.764.42-1.6 1.185-1.184l.292.159a1.873 1.873 0 0 0 2.692-1.115l.094-.319z"})]})})},error:function(t,e){return Object(m.jsx)("svg",{className:t,onClick:e,width:"64",height:"64",viewBox:"0 0 24 24",children:Object(m.jsx)("path",{d:"M12 7C12.55 7 13 7.45 13 8V12C13 12.55 12.55 13 12 13C11.45 13 11 12.55 11 12V8C11 7.45 11.45 7 12 7ZM11.99 2C6.47 2 2 6.48 2 12C2 17.52 6.47 22 11.99 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 11.99 2ZM12 20C7.58 20 4 16.42 4 12C4 7.58 7.58 4 12 4C16.42 4 20 7.58 20 12C20 16.42 16.42 20 12 20ZM13 17H11V15H13V17Z"})})},success:function(t,e){return Object(m.jsxs)("svg",{className:t,onClick:e,width:"64",height:"64",viewBox:"0 0 16 16",children:[Object(m.jsx)("path",{d:"M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"}),Object(m.jsx)("path",{d:"M10.97 4.97a.235.235 0 0 0-.02.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-1.071-1.05z"})]})},loading:function(t,e){return Object(m.jsxs)("svg",{className:t,onClick:e,width:"64",height:"64",viewBox:"0 0 16 16",children:[Object(m.jsx)("path",{fillRule:"evenodd",d:"M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2v1z"}),Object(m.jsx)("path",{d:"M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466z"})]})},submitted:function(t,e){return Object(m.jsx)("svg",{className:t,onClick:e,width:"64",height:"64",viewBox:"0 0 24 24",children:Object(m.jsx)("path",{d:"M13 19V7.83001L17.88 12.71C18.27 13.1 18.91 13.1 19.3 12.71C19.69 12.32 19.69 11.69 19.3 11.3L12.71 4.71001C12.32 4.32001 11.69 4.32001 11.3 4.71001L4.69997 11.29C4.30997 11.68 4.30997 12.31 4.69997 12.7C5.08997 13.09 5.71997 13.09 6.10997 12.7L11 7.83001V19C11 19.55 11.45 20 12 20C12.55 20 13 19.55 13 19Z"})})},cart:function(t,e){return Object(m.jsx)("div",{className:t,children:Object(m.jsx)("svg",{className:t,onClick:e,viewBox:"0 0 16 16",children:Object(m.jsx)("path",{d:"M0 2.5A.5.5 0 0 1 .5 2H2a.5.5 0 0 1 .485.379L2.89 4H14.5a.5.5 0 0 1 .485.621l-1.5 6A.5.5 0 0 1 13 11H4a.5.5 0 0 1-.485-.379L1.61 3H.5a.5.5 0 0 1-.5-.5zM3.14 5l1.25 5h8.22l1.25-5H3.14zM5 13a1 1 0 1 0 0 2 1 1 0 0 0 0-2zm-2 1a2 2 0 1 1 4 0 2 2 0 0 1-4 0zm9-1a1 1 0 1 0 0 2 1 1 0 0 0 0-2zm-2 1a2 2 0 1 1 4 0 2 2 0 0 1-4 0z"})})})},eye:function(t,e){return Object(m.jsxs)("svg",{className:t,onClick:e,viewBox:"0 0 16 16",children:[Object(m.jsx)("path",{d:"M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8zM1.173 8a13.133 13.133 0 0 1 1.66-2.043C4.12 4.668 5.88 3.5 8 3.5c2.12 0 3.879 1.168 5.168 2.457A13.133 13.133 0 0 1 14.828 8c-.058.087-.122.183-.195.288-.335.48-.83 1.12-1.465 1.755C11.879 11.332 10.119 12.5 8 12.5c-2.12 0-3.879-1.168-5.168-2.457A13.134 13.134 0 0 1 1.172 8z"}),Object(m.jsx)("path",{d:"M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5zM4.5 8a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0z"})]})},roadmap:function(t,e){return Object(m.jsx)("svg",{className:t,onClick:e,width:"32",height:"32",viewBox:"0 0 16 16",children:Object(m.jsx)("path",{d:"M7.293.707A1 1 0 0 0 7 1.414V2H2a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1h5v1H2.5a1 1 0 0 0-.8.4L.725 8.7a.5.5 0 0 0 0 .6l.975 1.3a1 1 0 0 0 .8.4H7v5h2v-5h5a1 1 0 0 0 1-1V8a1 1 0 0 0-1-1H9V6h4.5a1 1 0 0 0 .8-.4l.975-1.3a.5.5 0 0 0 0-.6L14.3 2.4a1 1 0 0 0-.8-.4H9v-.586A1 1 0 0 0 7.293.707z"})})},team:function(t,e){return Object(m.jsxs)("svg",{className:t,onClick:e,width:"32",height:"32",viewBox:"0 0 16 16",children:[Object(m.jsx)("path",{d:"M1.5 1a.5.5 0 0 0-.5.5v3a.5.5 0 0 1-1 0v-3A1.5 1.5 0 0 1 1.5 0h3a.5.5 0 0 1 0 1h-3zM11 .5a.5.5 0 0 1 .5-.5h3A1.5 1.5 0 0 1 16 1.5v3a.5.5 0 0 1-1 0v-3a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 1-.5-.5zM.5 11a.5.5 0 0 1 .5.5v3a.5.5 0 0 0 .5.5h3a.5.5 0 0 1 0 1h-3A1.5 1.5 0 0 1 0 14.5v-3a.5.5 0 0 1 .5-.5zm15 0a.5.5 0 0 1 .5.5v3a1.5 1.5 0 0 1-1.5 1.5h-3a.5.5 0 0 1 0-1h3a.5.5 0 0 0 .5-.5v-3a.5.5 0 0 1 .5-.5z"}),Object(m.jsx)("path",{d:"M3 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1H3zm8-9a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"})]})}},mt=function(t){Object(p.a)(n,t);var e=Object(h.a)(n);function n(t){var a,i;return Object(u.a)(this,n),(i=e.call(this,t)).getLabel=function(){var t=i.state,e=t.token,n=t.sell,a="";return""!==(a=e.isLPToken()?n?"to remove liquidity":"to add liquidity":n?"to sell token":"to buy token")?Object(m.jsx)(et,{color:"2",children:a}):a},i.state={token:t.token,sell:t.sell||!1,showLabel:t.showLabel||!1},i.router=t.vaultinator3000.findRouter(null===(a=t.token)||void 0===a?void 0:a.router),i}return Object(c.a)(n,[{key:"getLink",value:function(){var t=this.state,e=t.token,n=t.sell;return e.isLPToken()?n?this.router.linkRemoveLiquidity.replace("{token0}",e.token0).replace("{token1}",e.token1):this.router.linkAddLiquidity.replace("{token0}",e.token0).replace("{token1}",e.token1):""!==e.linkSwap?n?e.linkSwap.replace("{from}",e.address).replace("{to}",""):e.linkSwap.replace("{from}","").replace("{to}",e.address):n?this.router.linkSwap.replace("{from}",e.address).replace("{to}",""):this.router.linkSwap.replace("{from}","").replace("{to}",e.address)}},{key:"render",value:function(){if(null===this.router)return null;var t=this.state,e=t.showLabel,n=t.sell;return Object(m.jsxs)(tt,{className:"ButtonBuySellToken",children:[e?Object(m.jsx)(et,{color:"2",children:"Click"}):Object(m.jsx)(m.Fragment,{}),Object(m.jsx)(it,{className:"ButtonBuySellToken ".concat(n?"sell":"buy"),href:this.getLink(),target:"blank",children:yt.cart()}),e?this.getLabel():Object(m.jsx)(m.Fragment,{})]})}}]),n}(H.a.Component),bt=function(t){Object(p.a)(n,t);var e=Object(h.a)(n);function n(t){var a;return Object(u.a)(this,n),(a=e.call(this,t)).makeGradient=function(t,e,n,a){var i=a-n,r=((1-n)/i*100).toFixed(0),s=((e-n)/i*100).toFixed(0);return"linear-gradient(\n            90deg,\n            var(--progressBar_breakEven_red) 0%,\n            var(--progressBar_breakEven_red) ".concat(r,"%,\n            var(--progressBar_breakEven_yellow) ").concat(r,"%,\n            var(--progressBar_breakEven_yellow) ").concat(s,"%,\n            var(--progressBar_breakEven_green) ").concat(s,"%,\n            var(--progressBar_breakEven_green) 100%)")},a.renderLegendContainer=function(t,e,n,a){return Object(m.jsxs)(tt,{className:"legendContainer",style:{borderColor:"var(--progressBar_breakEven_".concat(a,")")},children:[Object(m.jsxs)(et,{size:"-1",color:"var(--progressBar_breakEven_".concat(a,")"),children:[t,":"]}),e,n]})},a.state={vault:t.vault,withdraw:t.withdraw||!1,showLabels:t.showLabels||!1,hideIfBreakEven:!1},a}return Object(c.a)(n,[{key:"renderFeeTax",value:function(t,e,n,a){var i=Object(m.jsxs)(et,{size:"-1",color:"var(--progressBar_breakEven_".concat(a,")"),children:[b.smartFormatPercent(100*e,!0)," fee"]}),r=Object(m.jsxs)(et,{size:"-1",color:"var(--progressBar_breakEven_".concat(a,")"),children:[b.smartFormatPercent(100*n,!0)," tax"]});return this.renderLegendContainer(t,i,r,a)}},{key:"render",value:function(){var t=this.props.className,e=this.state,n=e.withdraw,a=e.hideIfBreakEven,i=e.showLabels,r=e.vault,s="ProgressBarVaultBreakEven ".concat(t||""),o=r.totalDepositFeeTaxFactor,u=r.totalWithdrawFeeTaxFactor,c=n?1+r.userProfitLoss:o,l=n?Math.min(c,o):o,d=n?c:o,p=n?Math.max(c,1.1):1.1,h={background:this.makeGradient(o,u,l,p),height:"5px"};if(d>=u&&a)return null;var y=Object(m.jsx)(m.Fragment,{}),v=Object(m.jsx)(m.Fragment,{});if(i){var f=Object(m.jsx)(m.Fragment,{});if(c<u){var k=Math.ceil((u-c)/r.dailyAPR);f=this.renderLegendContainer("break even",Object(m.jsxs)(et,{size:"-1",color:"var(--progressBar_breakEven_green)",children:["in ~",Number.isFinite(k)?k:"???"," days"]}),Object(m.jsxs)(et,{size:"-1",color:"var(--progressBar_breakEven_green)",children:["at ",b.smartFormatPercent(100*r.dailyAPR,!0)," daily"]}),"green")}var j=Object(m.jsx)(m.Fragment,{});1===o||n||(j=this.renderFeeTax("deposit",r.depositFee,r.additionalDepositTax,"red"));var w=Object(m.jsx)(m.Fragment,{});0===r.withdrawFee&&0===r.additionalWithdrawTax||(w=this.renderFeeTax("withdraw",r.withdrawFee,r.additionalWithdrawTax,"yellow")),y=Object(m.jsxs)(m.Fragment,{children:[j,w,f]})}var O=Object(m.jsx)(m.Fragment,{});return window.chef.vaultChef.withdrawFee>0&&(O=Object(m.jsxs)(et,{size:"-2",color:"2",italic:"true",children:["(*)"," ",b.smartFormatPercent(100*window.chef.vaultChef.withdrawFee,!0)," ","withdraw fee from Moon Vault"]})),Object(m.jsxs)(tt,{className:s,children:[Object(m.jsx)(tt,{className:"legend",children:y}),Object(m.jsx)(tt,{className:"info",children:v}),Object(m.jsx)("input",{type:"range",style:h,readOnly:!0,step:.01,min:l,max:p,value:d}),O]})}}]),n}(H.a.Component),vt=function(t){Object(p.a)(n,t);var e=Object(h.a)(n);function n(t){var a;return Object(u.a)(this,n),(a=e.call(this,t)).getDialogTokensUint256=function(){var t=document.getElementById("dialog_tokenInput"),e=x.tokensToUint256String(t.value);return a.vaultinator3000.web3_data.eth.abi.encodeParameter("uint256",e)},a.state={vault:t.vault||null,onClose:t.onClose||null},a.vaultinator3000=t.vaultinator3000,a}return Object(c.a)(n,[{key:"onClick_withdraw",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(){var e;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.close(),e=this.state.vault,t.next=4,e.withdraw(this.getDialogTokensUint256());case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"onClick_withdrawAll",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(){var e;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.close(),e=this.state.vault,t.next=4,e.withdrawAll();case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"close",value:function(){var t=this.state.onClose;t&&t()}},{key:"render",value:function(){var t,e,n=this,a=this.state.vault,i=this.props.show,r=this.vaultinator3000.config.showBreakevenPanel,s=Object(m.jsxs)(et,{size:"1",children:["Withdraw ",null===(t=a.depositToken)||void 0===t?void 0:t.symbol]}),o=Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(mt,{token:a.depositToken,sell:!0,showLabel:!1,vaultinator3000:this.vaultinator3000}),Object(m.jsx)(it,{className:"ModalButton",buttonStyle:"1",onClick:function(){return n.onClick_withdraw()},children:"withdraw"}),Object(m.jsx)(it,{buttonStyle:"1",onClick:function(){return n.onClick_withdrawAll()},children:"all"})]});return Object(m.jsx)(rt,{show:i,className:"ModalVaultWithdraw sizeNormal",onClose:function(){return n.close()},header:s,footer:o,children:Object(m.jsxs)(tt,{className:"content",children:[Object(m.jsxs)(et,{color:"2",children:["Input how much ",null===(e=a.depositToken)||void 0===e?void 0:e.symbol," you want to withdraw."]}),Object(m.jsx)(pt,{balanceLabel:"Deposit",token:a.depositToken,max:a.userDeposit,vault:a,onChangeVault:function(){return a.userDeposit},vaultinator3000:this.vaultinator3000}),r&&Object(m.jsx)(bt,{vault:a,withdraw:!1,showLabels:!0})]})})}}]),n}(H.a.Component),ft=vt,kt=function(t){Object(p.a)(n,t);var e=Object(h.a)(n);function n(t){var a;return Object(u.a)(this,n),(a=e.call(this,t)).getDialogTokensUint256=function(){var t=document.getElementById("dialog_tokenInput"),e=x.tokensToUint256String(t.value);return a.vaultinator3000.web3_data.eth.abi.encodeParameter("uint256",e)},a.state={vault:t.vault||null,onClose:t.onClose||null},a.vaultinator3000=t.vaultinator3000,a}return Object(c.a)(n,[{key:"onClick_deposit",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(){return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.close(),t.next=3,this.state.vault.deposit(this.getDialogTokensUint256());case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"close",value:function(){var t=this.state.onClose;t&&t()}},{key:"render",value:function(){var t,e,n,a=this,i=this.state.vault,r=this.props.show,s=this.vaultinator3000.config.showBreakevenPanel,o=Object(m.jsxs)(et,{size:"1",children:["Deposit ",null===(t=i.depositToken)||void 0===t?void 0:t.symbol]}),u=Object(m.jsx)(m.Fragment,{});this.vaultinator3000.vaultChef.withdrawFee>0&&(u=Object(m.jsxs)(et,{size:"-2",color:"2",italic:"true",children:["(*)"," ",b.smartFormatPercent(100*this.vaultinator3000.vaultChef.withdrawFee,!0)," ","withdraw fee from Moon Vault"]}));var c=Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)("div",{children:[Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)(mt,{token:i.depositToken,sell:!1,showLabel:!1,vaultinator3000:this.vaultinator3000}),Object(m.jsx)(it,{className:"ModalButton",buttonStyle:"1",onClick:function(){return a.onClick_deposit()},children:"deposit"})]}),!s&&Object(m.jsx)("div",{className:"row disclaimerFooter",children:u})]})});return Object(m.jsx)(rt,{show:r,className:"ModalVaultDeposit sizeNormal",onClose:function(){return a.close()},header:o,footer:c,children:Object(m.jsxs)(tt,{className:"content",children:[Object(m.jsxs)(et,{color:"2",children:["Input how much ",null===(e=i.depositToken)||void 0===e?void 0:e.symbol," you want to deposit."]}),Object(m.jsx)(dt,{token:i.depositToken,max:null===(n=i.depositToken)||void 0===n?void 0:n.userBalance,vaultinator3000:this.vaultinator3000}),s&&Object(m.jsx)(bt,{vault:i,withdraw:!1,showLabels:!0})]})})}}]),n}(H.a.Component),jt=kt,wt=function(t){Object(p.a)(n,t);var e=Object(h.a)(n);function n(t){var a;return Object(u.a)(this,n),(a=e.call(this,t)).state={vault:t.vault||null,onClose:t.onClose||null},a}return Object(c.a)(n,[{key:"onClick_approve",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(){return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.close(),t.next=3,this.state.vault.approve();case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"close",value:function(){var t=this.state.onClose;t&&t()}},{key:"render",value:function(){var t,e,n=this,a=this.state.vault,i=this.props.show,r=Object(m.jsxs)(et,{size:"1",children:["Approve ",null===(t=a.depositToken)||void 0===t?void 0:t.symbol]}),s=Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(it,{className:"ModalButton",buttonStyle:"1",onClick:function(){return n.onClick_approve()},children:"approve"})});return Object(m.jsx)(rt,{show:i,className:"ModalVaultApprove sizeNormal",onClose:function(){return n.close()},header:r,footer:s,children:Object(m.jsx)(tt,{className:"content",children:Object(m.jsxs)(et,{color:"2",children:["To interact with this Vault, you must allow the vault to access your"," ",null===(e=a.depositToken)||void 0===e?void 0:e.symbol," tokens."]})})})}}]),n}(H.a.Component),Ot=wt,xt=n(155),gt=n(101),Ct=function(t){Object(p.a)(n,t);var e=Object(h.a)(n);function n(t){var a;return Object(u.a)(this,n),(a=e.call(this,t)).state={onClick:t.onClick},a}return Object(c.a)(n,[{key:"buildPropsClassName",value:function(){var t=this.props,e=t.size,n=t.weight,a=t.color,i=t.disabled,r=t.nav,s="";switch(parseInt(e||0,10)){case-1:s+="sizeSmall";break;case 1:s+="sizeBig";break;case 2:s+="sizeVeryBig";break;default:s+="sizeNormal"}switch(s+=" ",parseInt(n||0,10)){case-1:s+="weightLight";break;case 1:s+="weightBold";break;default:s+="weightNormal"}switch(s+=" ",parseInt(a||1,10)){case 0:s+="colorDisabled";break;case 2:s+="colorSecondary";break;default:s+=!0===r?"colorMenu":"colorPrimary"}return s+=" ",s+=!0===i?"disabled ":""}},{key:"render",value:function(){var t=this.props,e=t.className,n=t.href,a=t.title,i=t.children,r=t.nav,s=t.target,o=this.state.onClick,u="Link ".concat(this.buildPropsClassName()).concat(e||"");return void 0===n?Object(m.jsx)("button",{type:"button",className:u,onClick:o,title:a,children:i}):!0===r?Object(m.jsx)(gt.b,{className:u,to:n,title:a,children:i}):Object(m.jsx)("a",{className:u,href:n,target:s,title:a,children:i})}}]),n}(H.a.Component),Tt=function(t){Object(p.a)(n,t);var e=Object(h.a)(n);function n(t){var a;return Object(u.a)(this,n),(a=e.call(this,t)).state={checked:t.checked,onChange:t.onChange||null},a}return Object(c.a)(n,[{key:"onCheckChanged",value:function(){var t=this.state,e=t.checked,n=t.onChange,a=!e;this.setState({checked:a}),null!==n&&n(a)}},{key:"render",value:function(){var t=this,e=this.props,n=e.id,a=e.labelOn,i=e.labelOff,r=this.state.checked,s=n||"myOnOffSwitch",o=null!==i&&void 0!==i?i:"Off",u={"--onoffswitch-on-var":'"'.concat(null!==a&&void 0!==a?a:"On",'"'),"--onoffswitch-off-var":'"'.concat(o,'"')};return Object(m.jsxs)(tt,{className:"onoffswitch",children:[Object(m.jsx)("input",{type:"checkbox",name:"onoffswitch",className:"onoffswitch-checkbox",id:s,tabIndex:"0",defaultChecked:r,onClick:function(){return t.onCheckChanged()}}),Object(m.jsxs)("label",{className:"onoffswitch-label",htmlFor:s,children:[Object(m.jsx)("span",{className:"onoffswitch-inner",style:u}),Object(m.jsx)("span",{className:"onoffswitch-switch"})]})]})}}]),n}(H.a.Component),Mt=n(798),Dt=n.n(Mt);function _t(t){var e=new Date,n=new Date(t).getTime()-e.getTime();return Math.ceil(n/864e5)}var St=function(t){Object(p.a)(n,t);var e=Object(h.a)(n);function n(t){var a,i;Object(u.a)(this,n),i=e.call(this,t);var r=function(t,e,n){for(var a=0,i=[];a<e;){var r=Math.floor(Math.random()*(n.max-n.min+1))+n.min;i.push([t,r]),t+=864e5,a+=1}return i},s=t.showUSD;return i.state={series:null!==(a=t.series)&&void 0!==a?a:[{name:"Compounding",data:r(new Date("11 Feb 2017 GMT").getTime(),20,{min:10,max:60})},{name:"BUSD",data:r(new Date("11 Feb 2017 GMT").getTime(),20,{min:10,max:20})}],options:{chart:{type:"area",height:150,stacked:!0,background:"transparent",zoom:{enabled:!1},toolbar:{show:!1},events:{selection:function(){}}},colors:["#fea430","#6236ff","#1969ff","#00aee9","#00c301"],dataLabels:{enabled:!1},stroke:{width:3,curve:"smooth"},title:{text:"",align:"left"},theme:{mode:"dark"},tooltip:{enabled:!0,theme:"dark",marker:{show:!0},x:{formatter:function(t){return function(t){var e=_t(t);return"".concat(e," Day").concat(e>1?"s":"")}(t)}},y:{formatter:function(t){return s?b.formatFiat(t,!0,{shorten:!0}):b.smartFormatFloatDisplay(t,!0)}}},fill:{type:"gradient",gradient:{opacityFrom:.6,opacityTo:.8}},legend:{position:"top",horizontalAlign:"left"},xaxis:{type:"datetime",tooltip:{enabled:!1},overwriteCategories:[0,90,180,270,365],labels:{formatter:function(t){return _t((new Date).getTime()+24*t*60*60*1e3)}}},yaxis:{labels:{formatter:function(t){return s?b.formatFiat(t,!0,{shorten:!0}):b.smartFormatFloatDisplay(t,!0)}}}}},i}return Object(c.a)(n,[{key:"render",value:function(){var t=this.state,e=t.options,n=t.series;return Object(m.jsx)(Dt.a,{options:e,series:n,type:"area",height:200})}}],[{key:"getDerivedStateFromProps",value:function(t,e){return e.series=t.series,e}}]),n}(H.a.Component),Pt=function(){var t=H.a.createRef();return{setFocus:function(){var e;null===(e=t.current)||void 0===e||e.focus()},ref:t}},Lt=function(t){Object(p.a)(n,t);var e=Object(h.a)(n);function n(t){var a,i,s,o,c;Object(u.a)(this,n),(c=e.call(this,t)).generateSeries=function(t,e,n,a,i,r){"string"===typeof e&&(e=parseFloat(e)),"string"===typeof n&&(n=parseFloat(n)),"string"===typeof a&&(a=parseFloat(a)),"string"===typeof i&&(i=parseInt(i,10));for(var s=t,o=a,u=0,c=(new Date).getTime(),l=[];s>=0;){var d=e/365/100*o,p=d*(i/100);o+=d-p,u+=p,r?l.push([c,u.toFixed(2)]):l.push([c,o.toFixed(2)]),c+=864e5,s-=1}return l},c.calculateBusdEarnings=function(t,e,n,a,i){"string"===typeof e&&(e=parseFloat(e)),"string"===typeof n&&(n=parseInt(n,10)),"string"===typeof a&&(a=parseInt(a,10)),"string"===typeof i&&(i=parseInt(i,10));for(var r=t,s=a,o=0;r>=0;){var u=e/365/100*s,c=u*(i/100);s+=u-c,o+=c,r-=1}return o.toFixed(2)},c.calculateEarnings=function(t,e,n,a,i){"string"===typeof e&&(e=parseFloat(e)),"string"===typeof n&&(n=parseFloat(n)),"string"===typeof a&&(a=parseFloat(a)),"string"===typeof i&&(i=parseInt(i,10));for(var r=t,s=a;r>=0;){var o=e/365/100*s;s+=o-o*(i/100),r-=1}return s.toFixed(2)},c.recalibrateSliderRange=function(t){var e,n=Object(r.a)({},c.state).estimate,a=null!==(e=null===t||void 0===t?void 0:t.estimate)&&void 0!==e?e:n;a.uvlUpper=a.uvl<10?1e3:2*a.uvl;var i=null!==t&&void 0!==t?t:{};return i.estimate=a,i};var l=c.props,d=l.vault,p=l.vaultinator3000,h=null!==(a=x.smartFormatFiat(d.depositToken.unitPriceUSD,p.stableToken,!1))&&void 0!==a?a:0,y=(100*d.dailyAPR*365).toFixed(2),m=null!==(i=d.profitLoss)&&void 0!==i?i:d.userDeposit,b=null!==(s=(h*x.smartFormatFiat(m,d.depositToken,!1)).toFixed(4))&&void 0!==s?s:100;0===b&&(b=100);var v=b<10?1e3:1e3*b,f=y<100?200:999;f<50&&(f=100);var k={apr:y,tokenPrice:h,uvl:b,split:50,aprUpper:f=f.toFixed(),uvlUpper:v=v.toFixed()};return c.state={initial:k,estimate:Object(xt.cloneDeep)(k),showUSD:!0},c.vault=t.vault,c.version=null!==(o=t.version)&&void 0!==o?o:1,"string"===typeof c.version&&(c.version=parseInt(c.version,10)),c.resetEstimate=c.resetEstimate.bind(Object(U.a)(c)),c.inputFocus={Amount:Pt(),APR:Pt(),"BUSD Percent":Pt()},c}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var t=this.props.reset;t&&t(this.resetEstimate)}},{key:"change_uvl",value:function(t){var e=Object(r.a)({},this.state).estimate;e.uvl=t,this.setState({estimate:e})}},{key:"change_split",value:function(t){var e=Object(r.a)({},this.state).estimate;e.split=t,this.setState({estimate:e})}},{key:"resetEstimate",value:function(t){var e=this.state.initial;return this.setState({estimate:e}),null===t||void 0===t||t.stopPropagation(),null===t||void 0===t||t.preventDefault(),!1}},{key:"fiatFormatter",value:function(t){return this.state.showUSD?b.formatFiat(t):b.smartFormatFloatDisplay(t,!0)}},{key:"sliderInputBlur",value:function(){this.setState(this.recalibrateSliderRange({editingSlider:null}))}},{key:"change_tokenPrice",value:function(t){var e=Object(r.a)({},this.state).estimate;e.tokenPrice=t,this.setState({estimate:e})}},{key:"change_apr",value:function(t){var e=Object(r.a)({},this.state).estimate;e.apr=t,this.setState({estimate:e})}},{key:"changeUsdTokenView",value:function(){var t=this.state,e=t.showUSD,n=t.initial,a=Object(r.a)({},this.state).estimate,i=n.tokenPrice;e?a.uvl/=i:a.uvl*=i,this.setState(this.recalibrateSliderRange({showUSD:!e,estimate:a}))}},{key:"renderSlider",value:function(t,e,n,a,i,r,s){var o=this;if(!1===r)return Object(m.jsx)(m.Fragment,{});var u=t.replace(" ","_"),c=this.state.editingSlider===t,l=a;"function"===typeof s&&(l=s(l));var d=this.sliderInputBlur.bind(this);return Object(m.jsxs)(tt,{children:[Object(m.jsx)(tt,{style:{display:c?"initial":"none"},children:Object(m.jsxs)(tt,{className:"row detail-row",children:[Object(m.jsx)(tt,{className:"col-md-3 col-sm-12 col-xs-12",style:{marginTop:"7px",display:"inline-block"},children:Object(m.jsx)("label",{htmlFor:u,children:t})}),Object(m.jsx)(tt,{className:"col-md-9 col-sm-12 col-xs-12",style:{margin:"5px 0"},children:Object(m.jsx)(ot,{type:"text",ref:this.inputFocus[t].ref,id:"".concat(u,"txt2"),name:"".concat(u,"txt2"),title:l,value:a,onBlur:function(t){return d(t)},onChange:function(t){return i(t.target.value)}})})]})}),Object(m.jsx)(tt,{style:{display:c?"none":"initial"},children:Object(m.jsxs)(tt,{className:"row detail-row",children:[Object(m.jsx)(tt,{className:"col-md-3 col-sm-12 col-xs-12 d-none d-md-block",children:Object(m.jsx)("label",{htmlFor:u,style:{marginTop:"7px",display:"inline-block"},children:t})}),Object(m.jsx)(tt,{className:"col-md-6 col-sm-12 col-xs-12 d-none d-md-block",children:Object(m.jsx)(ot,{type:"range",min:e,max:n,value:a,step:"1",id:u,name:u,title:l,onChange:function(t){return i(t.target.value)}})}),Object(m.jsx)(tt,{className:"col-md-3 col-sm-12 col-xs-12 d-none d-md-block clickable",style:{paddingTop:"7px"},onClick:function(){o.setState({editingSlider:t}),window.setTimeout((function(){return o.inputFocus[t].setFocus()}),0)},children:l}),Object(m.jsx)(tt,{className:"col-md-3 col-sm-12 col-xs-12 d-md-none",children:Object(m.jsx)("label",{htmlFor:"".concat(u,"txt"),style:{marginTop:"7px",display:"inline-block"},children:t})}),Object(m.jsx)(tt,{className:"col-md-9 col-sm-12 col-xs-12 d-md-none",style:{margin:"5px 0"},children:Object(m.jsx)(ot,{type:"number",min:"0",inputmode:"numeric",pattern:"[0-9]*",id:"".concat(u,"txt"),name:"".concat(u,"txt"),title:l,value:a,onChange:function(t){return i(t.target.value)}})})]})})]})}},{key:"renderTable",value:function(t,e,n,a){var i=this,r=0,s=0,o=0,u=0,c=0,l=0,d=0,p=0;1===this.version?(r=this.calculateEarnings(1,t,e,n,0),s=this.calculateEarnings(7,t,e,n,0),o=this.calculateEarnings(30,t,e,n,0),u=this.calculateEarnings(365,t,e,n,0)):(r=this.calculateEarnings(1,t,e,n,a),s=this.calculateEarnings(7,t,e,n,a),o=this.calculateEarnings(30,t,e,n,a),u=this.calculateEarnings(365,t,e,n,a),c=this.calculateBusdEarnings(1,t,e,n,a),l=this.calculateBusdEarnings(7,t,e,n,a),d=this.calculateBusdEarnings(30,t,e,n,a),p=this.calculateBusdEarnings(365,t,e,n,a));var h=(r-n+parseFloat(c)).toFixed(2),y=(s-n+parseFloat(l)).toFixed(2),b=(o-n+parseFloat(d)).toFixed(2),v=(u-n+parseFloat(p)).toFixed(2),f=function(t){return i.fiatFormatter(t)};return 1===this.version?Object(m.jsxs)(tt,{children:[Object(m.jsxs)(tt,{className:"row detail-row header",children:[Object(m.jsx)(tt,{className:"col-4"}),Object(m.jsx)(tt,{className:"col-4",children:"Compound"}),Object(m.jsx)(tt,{className:"col-4",children:"Profit"})]}),Object(m.jsxs)(tt,{className:"row detail-row",children:[Object(m.jsx)(tt,{className:"col-4",children:"1 Day"}),Object(m.jsx)(tt,{className:"col-4",children:f(r)}),Object(m.jsx)(tt,{className:"col-4",children:f(h)})]}),Object(m.jsxs)(tt,{className:"row detail-row",children:[Object(m.jsx)(tt,{className:"col-4",children:"1 Week"}),Object(m.jsx)(tt,{className:"col-4",children:f(s)}),Object(m.jsx)(tt,{className:"col-4",children:f(y)})]}),Object(m.jsxs)(tt,{className:"row detail-row",children:[Object(m.jsx)(tt,{className:"col-4",children:"1 Month"}),Object(m.jsx)(tt,{className:"col-4",children:f(o)}),Object(m.jsx)(tt,{className:"col-4",children:f(b)})]}),Object(m.jsxs)(tt,{className:"row detail-row",children:[Object(m.jsx)(tt,{className:"col-4",children:"1 Year"}),Object(m.jsx)(tt,{className:"col-4",children:f(u)}),Object(m.jsx)(tt,{className:"col-4",children:f(v)})]})]}):Object(m.jsxs)(tt,{children:[Object(m.jsxs)(tt,{className:"row detail-row header",children:[Object(m.jsx)(tt,{className:"col-3"}),Object(m.jsx)(tt,{className:"col-3",children:"Compound"}),Object(m.jsx)(tt,{className:"col-3",children:"BUSD"}),Object(m.jsx)(tt,{className:"col-3",children:"Profit"})]}),Object(m.jsxs)(tt,{className:"row detail-row",children:[Object(m.jsx)(tt,{className:"col-3",children:"1 Day"}),Object(m.jsx)(tt,{className:"col-3",children:f(r)}),Object(m.jsx)(tt,{className:"col-3",children:f(c)}),Object(m.jsx)(tt,{className:"col-3",children:f(h)})]}),Object(m.jsxs)(tt,{className:"row detail-row",children:[Object(m.jsx)(tt,{className:"col-3",children:"1 Week"}),Object(m.jsx)(tt,{className:"col-3",children:f(s)}),Object(m.jsx)(tt,{className:"col-3",children:f(l)}),Object(m.jsx)(tt,{className:"col-3",children:f(y)})]}),Object(m.jsxs)(tt,{className:"row detail-row",children:[Object(m.jsx)(tt,{className:"col-3",children:"1 Month"}),Object(m.jsx)(tt,{className:"col-3",children:f(o)}),Object(m.jsx)(tt,{className:"col-3",children:f(d)}),Object(m.jsx)(tt,{className:"col-3",children:f(b)})]}),Object(m.jsxs)(tt,{className:"row detail-row",children:[Object(m.jsx)(tt,{className:"col-3",children:"1 Year"}),Object(m.jsx)(tt,{className:"col-3",children:f(u)}),Object(m.jsx)(tt,{className:"col-3",children:f(p)}),Object(m.jsx)(tt,{className:"col-3",children:f(v)})]})]})}},{key:"render",value:function(){var t=this,e=this.vault;if(!e||!e.depositToken||!e.depositToken.symbol)return Object(m.jsx)(m.Fragment,{});var n=this.state,a=n.showUSD,i=n.estimate,r=n.initial,s=i.apr,o=i.tokenPrice,u=i.uvl,c=i.split,l=i.uvlUpper,d=i.aprUpper,p=this.props.showReset,h=[];1===this.version?h.push({name:"Compounding",data:this.generateSeries(365,s,o,u,0,!1)}):(h.push({name:"Compounding",data:this.generateSeries(365,s,o,u,c,!1)}),h.push({name:"BUSD",data:this.generateSeries(365,s,o,u,c,!0)}));var y=function(t){return b.smartFormatPercent(t)},v=Object(m.jsx)(m.Fragment,{});return("boolean"!==typeof p||p)&&(v=Object(m.jsx)("div",{className:"row",children:Object(m.jsx)(Ct,{href:!0,target:"blank",title:"Reset Calculator",children:yt.refresh("svgLink",(function(e){return t.resetEstimate(e)}))})})),Object(m.jsxs)(tt,{className:"row details",children:[Object(m.jsxs)(tt,{className:"row",children:[Object(m.jsxs)(tt,{className:"col-12",children:[Object(m.jsx)(tt,{children:Object(m.jsx)(et,{size:"1",className:"heading",children:"Earnings"})}),this.renderTable(s,o,u,c)]}),Object(m.jsx)(tt,{className:"col-12",children:Object(m.jsx)(St,{series:h,showUSD:a,tokenPrice:r.tokenPrice},a)})]}),Object(m.jsx)(et,{className:"underlined estimationCalcRow",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-7 col-sm-12",children:"Estimation Calculator"}),Object(m.jsx)("div",{className:"col-md-5 col-sm-12",children:Object(m.jsx)(Tt,{labelOn:"USD",labelOff:"Tokens",checked:a,onChange:function(){return t.changeUsdTokenView()}})})]})}),Object(m.jsxs)("div",{className:"row",children:[this.renderSlider("Amount",0,l,u,this.change_uvl.bind(this),null,(function(e){return t.fiatFormatter(e)})),this.renderSlider("APR",0,d,s,this.change_apr.bind(this),null,y),this.renderSlider("BUSD Percent",0,100,c,this.change_split.bind(this),this.version>=2,y)]}),v]})}}]),n}(H.a.Component),At=function(t){Object(p.a)(n,t);var e=Object(h.a)(n);function n(t){var a;return Object(u.a)(this,n),(a=e.call(this,t)).vault=t.vault,a.onClose=t.onClose,a}return Object(c.a)(n,[{key:"close",value:function(){this.onClose&&this.onClose()}},{key:"render",value:function(){var t=this,e=Object(m.jsx)(et,{size:"1",children:"Profit Calculator"}),n=Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(it,{className:"ModalButton",onClick:function(){return t.reset()},children:"reset"}),Object(m.jsx)(it,{className:"ModalButton",onClick:function(){return t.close()},children:"close"})]}),a=this.props.show;return Object(m.jsx)(rt,{show:a,className:"ModalProfitCalculator sizeNormal",onClose:function(){return t.close()},header:e,footer:n,children:Object(m.jsx)(tt,{className:"content",children:Object(m.jsx)(Lt,Object(r.a)({version:"1",vault:this.vault,showReset:!1,reset:function(e){return t.reset=e}},this.props))})})}}]),n}(H.a.Component),Ft=function(t){var e=t.className,n=t.children,a="Panel ".concat(e||"");return Object(m.jsx)(tt,{className:a,children:n})},Rt=n(535);var Nt=function(t){var e=t.className,n=t.placement,a=t.mobilePlacement,i=t.children,s=window.innerWidth<600,o=null!==n&&void 0!==n?n:"right";s&&(o=null!==a&&void 0!==a?a:o);var u=Object(z.useState)((function(){return!1})),c=Object(v.a)(u,2),l=c[0],d=c[1],p=Object(z.useState)(null),h=Object(v.a)(p,2),y=h[0],b=h[1],f=Object(z.useState)(null),k=Object(v.a)(f,2),j=k[0],w=k[1],O=Object(z.useState)(null),x=Object(v.a)(O,2),g=x[0],C=x[1],T=Object(Rt.a)(y,j,{modifiers:[{name:"arrow",options:{element:g}},{name:"offset",options:{offset:[0,12]}}],placement:o}),M=T.styles,D=T.attributes,_=["HelpIcon"];return e&&_.push(e),Object(m.jsxs)(tt,{className:_.join(" "),onMouseEnter:function(){return!s&&d(!0)},onMouseLeave:function(){return!s&&d(!1)},onClick:function(){return s&&d(!l)},children:[yt.question("svgLink",null,null,b),l&&Object(m.jsxs)(tt,Object(r.a)(Object(r.a)({ref:w,className:"popper",role:"tooltip",style:M.popper},D.popper),{},{children:[i,Object(m.jsx)(tt,{className:"arrow",ref:C,style:M.arrow,"data-popper-arrow":!0})]}))]})},Bt=function(t){Object(p.a)(n,t);var e=Object(h.a)(n);function n(t){var a;return Object(u.a)(this,n),(a=e.call(this,t)).vault=t.vault,a.showDetailsLink="boolean"!==typeof t.showDetailsLink||t.showDetailsLink,a}return Object(c.a)(n,[{key:"onClick_showInfo",value:function(){this.props.refVaultModalManager.current.showVaultDialog("details",this.vault)}},{key:"render",value:function(){var t=this,e=Object(m.jsx)(m.Fragment,{});return this.showDetailsLink&&(e=Object(m.jsx)(m.Fragment,{children:yt.info("svgLink Vault_Details",(function(){return t.onClick_showInfo(t.vault)}),"View Vault Details")})),Object(m.jsxs)(tt,{className:"VaultHeader",children:[Object(m.jsx)(st,Object(r.a)({token:this.vault.depositToken},this.props)),Object(m.jsxs)(tt,{className:"VaultHeaderGroup",children:[Object(m.jsxs)(et,{className:"name",color:"1",children:[this.vault.name,e]}),Object(m.jsxs)(et,{className:"platform",color:"0",children:["Uses: ",this.vault.platform.name]})]})]})}}]),n}(H.a.Component),It=n(1060),Et=function(t){Object(p.a)(n,t);var e=Object(h.a)(n);function n(t){var a;return Object(u.a)(this,n),(a=e.call(this,t)).setType=function(t,e){t.chart.type=e},a.setMarkers=function(t,e){t.markers.size=e?1:0},a.setTitle=function(t,e){t.title.text=e},a.setColors=function(t,e){t.colors=e},a.setCategories=function(t,e){t.xaxis.type="category",t.xaxis.categories=e},a.state={useColor:t.useColor,width:t.width,height:t.height,series:[],options:{chart:{type:"line",background:"transparent",zoom:{enabled:!1},toolbar:{show:!1}},colors:["#ff0000","#00ff00","#0000ff"],dataLabels:{enabled:!1},grid:{show:!1,xaxis:{lines:{show:!1}},yaxis:{lines:{show:!1}}},legend:{show:!0,showForSingleSeries:!1,position:"top",horizontalAlign:"center",fontSize:"14px",fontWeight:600},stroke:{width:3,curve:"smooth"},title:{text:"",align:"left"},theme:{mode:"dark"},tooltip:{enabled:!0,theme:"dark",marker:{show:!0}},xaxis:{type:"category",categories:[],lines:{show:!1},labels:{show:!1,cssClass:"chartLabels"}},yaxis:{lines:{show:!1},labels:{show:!1,cssClass:"chartLabels"}},layout:{padding:{top:5,bottom:5}},markers:{size:1}}},a.chart=null,a.showLabels=a.props.showLabels||!1,a.baseColors=["#fea430","#6236ff","#1969ff","#00aee9","#00c301"],a}return Object(c.a)(n,[{key:"setSeries",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(e,n,a){var i,r;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=null!==(i=e)&&void 0!==i?i:this.makeOptions(),a=null!==(r=a)&&void 0!==r?r:[],this.setCategories(e,a),t.next=5,this.setState({series:n,options:e});case 5:case"end":return t.stop()}}),t,this)})));return function(e,n,a){return t.apply(this,arguments)}}()},{key:"setLabels",value:function(){this.showLabels=this.props.showLabels||!1}},{key:"makeOptions",value:function(){return It(this.state.options)}},{key:"makeColorList",value:function(){if(void 0===this.state.useColor)return this.baseColors;var t=[this.state.useColor];Array.isArray(this.state.useColor)&&(t=this.state.useColor);for(var e=[],n=0;n<t.length;n+=1){var a=parseInt(t[n],10);a>=0&&a<this.baseColors.length&&e.push(this.baseColors[a])}return e}},{key:"render",value:function(){var t;return Object(m.jsx)(tt,{className:"Chart",children:Object(m.jsx)(Dt.a,{options:this.state.options,series:this.state.series,width:this.state.width,height:this.state.height,type:null!==(t=this.state.options.chart.type)&&void 0!==t?t:"bar"})})}}]),n}(H.a.Component),Vt=Et,Ut=function(t){Object(p.a)(n,t);var e=Object(h.a)(n);function n(t){var a;Object(u.a)(this,n),a=e.call(this,t);var i=t.vaultinator3000;return a.state=Object(r.a)(Object(r.a)({},a.state),{},{token:t.token,days:t.days||30,relative:!0===t.relative,onlyCurrent:!0}),a.token0=i.findToken(a.state.token.token0),a.token1=i.findToken(a.state.token.token1),a.token0Max=null,a.token1Max=null,a.reloadData=a.reloadData.bind(Object(U.a)(a)),a.formatLPTokenDataPoint=a.formatLPTokenDataPoint.bind(Object(U.a)(a)),a.vaultinator3000=i,a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this.reloadData(),this.interval=setInterval(this.reloadData,6e4),this.setState({options:this.initChart()}),document.addEventListener("chef_dataLoaded",this.reloadData)}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval),document.removeEventListener("chef_dataLoaded",this.reloadData)}},{key:"reloadData",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(){var e,n;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=[],t.prev=1,n="".concat(this.vaultinator3000.api_url,"?module=token&action=getTokenPriceHistory"),n+="&chain=".concat(this.vaultinator3000.currentChain.id),n+="&token=".concat(this.state.token.address),n+="&days=".concat(this.state.days),t.next=8,b.fetchJSON(n);case 8:e=t.sent,t.next=13;break;case 11:t.prev=11,t.t0=t.catch(1);case 13:this.processData(e);case 14:case"end":return t.stop()}}),t,this,[[1,11]])})));return function(){return t.apply(this,arguments)}}()},{key:"formatLPTokenDataPoint",value:function(t,e){return e?this.state.relative&&!this.state.onlyCurrent?t*(0===e.seriesIndex?this.token0Max:this.token1Max):t:""}},{key:"initChart",value:function(){var t=new Date;t.setDate(t.getDate()-this.state.days);var e=this.makeOptions();return this.setType(e,this.state.onlyCurrent?"pie":"line"),this.setColors(e,["#1969ff","#fea430"]),e.chart=Object(r.a)(Object(r.a)({},e.chart),{},{sparkline:{enabled:!this.onlyCurrent},zoom:{type:"x"}}),e.xaxis=Object(r.a)(Object(r.a)({},e.xaxis),{},{type:"datetime",labels:Object(r.a)(Object(r.a)({},e.xaxis.labels),{},{show:!0}),axisTicks:{show:!1},tooltip:{enabled:!1}}),e.yaxis=Object(r.a)(Object(r.a)({},e.yaxis),{},{show:!1,labels:{formatter:this.formatLPTokenDataPoint}}),e.tooltip=Object(r.a)(Object(r.a)({},e.tooltip),{},{x:Object(r.a)(Object(r.a)({},e.tooltip.x),{},{show:!0,formatter:function(t){return b.formatDate(t,!0,!0)}})}),e.stroke=Object(r.a)(Object(r.a)({},e.stroke),{},{curve:"straight"}),e.legend=Object(r.a)(Object(r.a)({},e.legend),{},{show:!1,position:"top"}),this.state.onlyCurrent&&(e.chartOptions=Object(r.a)(Object(r.a)({},e.chartOptions),{},{labels:[this.token0.symbol,this.token1.symbol]})),e}},{key:"processData",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(e){var n,a,i,r,o,u,c,l,d,p,h,y,m,v,f,k,j,w,O,g,C,T,M,D;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==e&&null!==this.vaultinator3000.web3_data){t.next=2;break}return t.abrupt("return");case 2:if(this.token0Max=null,this.token1Max=null,n=[],a=[],i=[],r=[],this.state.onlyCurrent)o=this.vaultinator3000.toBN("0x".concat(this.state.token.totalSupply)),u=this.vaultinator3000.toBN("0x".concat(this.state.token.token0Reserve)),c=u.mul(this.token0.one).div(o),l=parseFloat(x.smartFormatTokens(c,this.token0)),d=this.vaultinator3000.toBN("0x".concat(this.state.token.token1Reserve)),p=d.mul(this.token1.one).div(o),h=parseFloat(x.smartFormatTokens(p,this.token1)),i.push(l,h);else for(y=0;y<e.data.length;y+=1)m=e.data[y],v=b.getDateTimeFromDB(m.date),f=v.getTime(),k=this.vaultinator3000.toBN("0x".concat(m.totalSupply)),j=this.vaultinator3000.toBN("0x".concat(m.token0Reserve)),w=j.mul(this.token0.one).div(k),O=parseFloat(x.smartFormatTokens(w,this.token0)),g=this.vaultinator3000.toBN("0x".concat(m.token1Reserve)),C=g.mul(this.token1.one).div(k),T=parseFloat(x.smartFormatTokens(C,this.token1)),(null===this.token0Max||this.token0Max<O)&&(this.token0Max=O),(null===this.token1Max||this.token1Max<T)&&(this.token1Max=T),i.push([f,O]),r.push([f,T]);if(this.state.relative&&!this.state.onlyCurrent)for(M=0;M<i.length;M+=1)0!==this.token0Max&&(i[M][1]/=this.token0Max),0!==this.token1Max&&(r[M][1]/=this.token1Max);n.push({name:this.token0.symbol,data:i}),this.state.onlyCurrent?n=i:(n.push({name:this.token0.symbol,data:i}),n.push({name:this.token1.symbol,data:r}),a=i.map((function(t){return t[0]}))),D=this.initChart(e),this.setSeries(D,n,a);case 14:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()}]),n}(Vt),zt=Ut,Ht=function(t){Object(p.a)(n,t);var e=Object(h.a)(n);function n(t){var a;return Object(u.a)(this,n),(a=e.call(this,t)).state=Object(r.a)(Object(r.a)({},a.state),{},{vaultID:t.vaultID,days:t.days||180}),a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var t=this;this.reloadData(),this.interval=setInterval((function(){return t.reloadData()}),6e4),this.setState({options:this.initChart()})}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"reloadData",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(){var e,n;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.props.vaultinator3000.findVault(this.state.vaultID),t.next=3,e.db_getHistoricCompounds({days:this.state.days});case 3:n=t.sent,this.processData(n);case 5:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"initChart",value:function(){var t=this.makeColorList(),e=new Date;e.setDate(e.getDate()-this.state.days);var n=this.makeOptions();return this.setLabels(),this.setType(n,"area"),this.setColors(n,t),n.chart=Object(r.a)(Object(r.a)({},n.chart),{},{sparkline:{enabled:!this.showLabels},zoom:{type:"x"}}),n.xaxis=Object(r.a)(Object(r.a)({},n.xaxis),{},{type:"datetime",labels:Object(r.a)(Object(r.a)({},n.xaxis.labels),{},{show:!1}),axisTicks:{show:!1},tooltip:{enabled:!1}}),n.yaxis=Object(r.a)(Object(r.a)({},n.yaxis),{},{show:this.showLabels,tickAmount:4,labels:{formatter:function(t){return b.smartFormatPercent(t,!0,4,4)}}}),n.tooltip=Object(r.a)(Object(r.a)({},n.tooltip),{},{x:Object(r.a)(Object(r.a)({},n.tooltip.x),{},{show:!0,formatter:function(t){return b.formatDate(t,!0,!0)}})}),n.legend=Object(r.a)(Object(r.a)({},n.legend),{},{show:!0,position:"top"}),n.fill=Object(r.a)(Object(r.a)({},n.fill),{},{type:"gradient",gradient:{type:"vertical",opacityFrom:.8,opacityTo:.3,stops:[0,100]}}),n}},{key:"processData",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(e){var n,a,i,r,o,u,c,l,d,p;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==e){t.next=2;break}return t.abrupt("return");case 2:for(n=[],[],i=[],r=[],o=0;o<e.data.length;o+=1)u=e.data[o],c=b.getDateTimeFromDB(u.dateTime),l=c.getTime(),r.push(l),d=parseFloat(u.dailyAPR).toFixed(4),i.push([l,d]);n.push({name:"Daily ROI",data:i}),a=r,p=this.initChart(e),this.setSeries(p,n,a);case 11:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()}]),n}(Vt),qt=Ht,Wt=function(t){Object(p.a)(n,t);var e=Object(h.a)(n);function n(t){var a;return Object(u.a)(this,n),(a=e.call(this,t)).getMatchingPrice=function(t,e){for(var n=e.length-1;n>=0;n-=1){if(b.getDateTimeFromDB(e[n].date).getTime()<=t.getTime())return e[n].price}return 0},a.getMatchingGrowth=function(t,e){for(var n=e.length-1;n>=0;n-=1){if(b.getDateTimeFromDB(e[n].dateTime).getTime()<=t.getTime())return e[n].growth}return 0},a.getMatchingLPFee=function(t,e){for(var n=e.length-1;n>=0;n-=1){if(b.getDateTimeFromDB(e[n].date).getTime()<=t.getTime())return e[n].growth}return 0},a.getCompoundGrowth=function(t){for(var e=1,n=0;n<t.length;n+=1){var a=(e*=1+t[n].compoundAPR/100)-1;t[n].growth=a}return t},a.getLPFeeGrowth=function(t){for(var e=0,n=0;n<t.length;n+=1)e+=t[n].dailyLPFeeAPR/100,t[n].growth=e;return t},a.removeBeforeDate=function(t,e){for(;e.length>0;){if(b.getDateTimeFromDB(e[0].date).getTime()>=t.getTime())break;e=e.slice(1)}return e},a.removeBeforeDateTime=function(t,e){for(;e.length>0;){if(b.getDateTimeFromDB(e[0].dateTime).getTime()>=t.getTime())break;e=e.slice(1)}return e},a.state=Object(r.a)(Object(r.a)({},a.state),{},{vaultID:t.vaultID,days:t.days||180,mode:"price",ignoreLPFees:!1}),a.vaultinator3000=t.vaultinator3000,a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var t=this;this.reloadData(),this.interval=setInterval((function(){return t.reloadData()}),6e4),this.setState({options:this.initChart()})}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"reloadData",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(){var e,n,a,i;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.vaultinator3000.findVault(this.state.vaultID),t.next=3,e.db_getHistoricCompounds({days:this.state.days});case 3:return n=t.sent,t.next=6,e.depositToken.db_getHistoricPrice({days:this.state.days});case 6:return a=t.sent,t.next=9,e.depositToken.db_getHistoricLPFee({days:this.state.days});case 9:i=t.sent,this.processData(n,a,i);case 11:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"initChart",value:function(t,e){var n=this.makeColorList();e||(n=[n[0],n[n.length-1]]);var a=new Date;a.setDate(a.getDate()-this.state.days);var i=this.makeOptions();return this.setLabels(),this.setType(i,"area"),this.setColors(i,n),i.chart=Object(r.a)(Object(r.a)({},i.chart),{},{sparkline:{enabled:!this.showLabels},zoom:{type:"x"}}),i.grid=Object(r.a)(Object(r.a)({},i.grid),{},{borderColor:"#111"}),i.xaxis=Object(r.a)(Object(r.a)({},i.xaxis),{},{type:"datetime",labels:Object(r.a)(Object(r.a)({},i.xaxis.labels),{},{show:!1}),axisTicks:{show:!1},tooltip:{enabled:!1}}),i.yaxis=Object(r.a)(Object(r.a)({},i.yaxis),{},{show:this.showLabels,tickAmount:4,lines:{show:!0},labels:{formatter:function(t){return b.formatFiat(t,!0,!0)}}}),i.tooltip=Object(r.a)(Object(r.a)({},i.tooltip),{},{x:Object(r.a)(Object(r.a)({},i.tooltip.x),{},{show:!0,formatter:function(t){return b.formatDate(t,!1,!0)}})}),i.stroke=Object(r.a)(Object(r.a)({},i.stroke),{},{curve:"straight"}),i.legend=Object(r.a)(Object(r.a)({},i.legend),{},{show:!1,position:"top"}),i.fill=Object(r.a)(Object(r.a)({},i.fill),{},{type:"gradient",gradient:{type:"vertical",opacityFrom:.8,opacityTo:.3,stops:[0,100]}}),i}},{key:"processData",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(e,n,a){var i,r,o,u,c,l,d,p,h,y,m,v,f,k,j,w,O,x,g,C,T,M,D;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!==e&&void 0!==e&&e.data&&null!==n&&void 0!==n&&n.data&&null!==a&&void 0!==a&&a.data){t.next=2;break}return t.abrupt("return");case 2:if(i=b.getDateTimeFromDB(n.data[0].date),e.data=this.removeBeforeDateTime(i,e.data),a.data=this.removeBeforeDate(i,a.data),e.data=this.getCompoundGrowth(e.data),a.data=this.getLPFeeGrowth(a.data),r=[],[],u=[],c=[],l=[],d=[],p=!1,"growth"===this.state.mode)for(h=0;h<e.data.length;h+=1)y=e.data[h],m=b.getDateTimeFromDB(y.dateTime),v=m.getTime(),f=this.getMatchingPrice(m,n.data),k=f*y.growth,0!==f&&(d.push(v),u.push([v,parseFloat(f.toFixed(8))]),c.push([v,parseFloat((f+k).toFixed(8))]));else if("price"===this.state.mode)for(j=0;j<n.data.length;j+=1)w=n.data[j].price,O=b.getDateTimeFromDB(n.data[j].date),x=O.getTime(),g=this.getMatchingGrowth(O,e.data),C=this.state.ignoreLPFees?0:this.getMatchingLPFee(O,a.data),T=w*Math.max(1,1+C),M=T*Math.max(1,1+g),0!==w&&(d.push(x),u.push([x,parseFloat(w.toFixed(8))]),c.push([x,parseFloat(M.toFixed(8))]),l.push([x,parseFloat(T.toFixed(8))]),p=p||C>0);r.push({name:"Growth",data:c}),p&&r.push({name:"LP Fees",data:l}),r.push({name:"Token Price",data:u}),o=d,D=this.initChart(e,p),this.setSeries(D,r,o);case 21:case"end":return t.stop()}}),t,this)})));return function(e,n,a){return t.apply(this,arguments)}}()}]),n}(Vt),Zt=Wt,Yt=function(t){Object(p.a)(n,t);var e=Object(h.a)(n);function n(t){var a;Object(u.a)(this,n),(a=e.call(this,t)).renderDetailRow=function(t,e,n,a){return void 0===n&&(n=!0),Object(m.jsxs)(tt,{className:"row detail-row",children:[Object(m.jsxs)(tt,{className:"col-6",children:[Object(m.jsx)(et,{color:"2",children:t}),a]}),Object(m.jsx)(tt,{className:"col-6",children:Object(m.jsx)(et,{color:"2",children:b.renderLoading(n,e)})})]})};var i=t.vault,r=t.vaultinator3000;return a.state={id:i.id,updateRevision:0,onClose:t.onClose||null},a.vault=i,a.vaultinator3000=r,a.updateView=a.updateView.bind(Object(U.a)(a)),a.checkUpdate_token=a.checkUpdate_token.bind(Object(U.a)(a)),a.checkUpdate_vault=a.checkUpdate_vault.bind(Object(U.a)(a)),a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){document.addEventListener("app_reload",this.updateView),document.addEventListener("token_userInfo",this.checkUpdate_token),document.addEventListener("vault_vaultInfo",this.checkUpdate_vault),document.addEventListener("vault_userInfo",this.checkUpdate_vault)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("app_reload",this.updateView),document.removeEventListener("token_userInfo",this.checkUpdate_token),document.removeEventListener("vault_vaultInfo",this.checkUpdate_vault),document.removeEventListener("vault_userInfo",this.checkUpdate_vault)}},{key:"close",value:function(){var t=this.state.onClose;t&&t()}},{key:"updateView",value:function(){var t=this.state,e=t.id,n=t.updateRevision;null===this.vault&&(this.vault=this.vaultinator3000.findVault(e)),this.setState({updateRevision:n+1})}},{key:"checkUpdate_token",value:function(t){this.vault&&(x.checkEqualAddress(this.vault.depositToken.address,t.detail.address)||x.checkEqualAddress(this.vault.rewardToken.address,t.detail.address))&&this.updateView()}},{key:"checkUpdate_vault",value:function(t){this.vault&&x.checkEqualAddress(this.vault.address,t.detail.address)&&this.updateView()}},{key:"renderVaultHeader",value:function(){return Object(m.jsxs)(tt,{className:"header col-12",children:[Object(m.jsxs)(tt,{className:"VaultHeader",children:[Object(m.jsx)(st,Object(r.a)({token:this.vault.depositToken},this.props)),Object(m.jsx)(tt,{className:"VaultHeaderGroup",children:Object(m.jsx)(et,{className:"name",color:"1",children:this.vault.name})})]}),Object(m.jsx)(Bt,{vault:this.vault,showDetailsLink:!1,showSettings:null!==this.vaultinator3000.user||this.vaultinator3000.vaultChef.checkRole_Manager()})]})}},{key:"renderDetails",value:function(){var t,e,n,a=this.vault.initialized,i=a&&this.vault.initializedUser,r=a&&this.vault.initializedDB,s=a&&this.vault.depositToken.initializedPrice,o=a&&this.vault.rewardToken.initializedPrice,u="???";null!==this.vault.lastCompound&&(u=b.formatDate(this.vault.lastCompound,!0,!0));var c=Object(m.jsx)(m.Fragment,{}),l="Token";if(null!==(t=this.vault.depositToken)&&void 0!==t&&t.isLPToken()){l="LP";var d=this.vaultinator3000.findToken(this.vault.depositToken.token0),p=this.vaultinator3000.findToken(this.vault.depositToken.token1),h=this.vaultinator3000.toBN("0x".concat(this.vault.depositToken.totalSupply)),y=this.vaultinator3000.toBN("0x".concat(this.vault.depositToken.token0Reserve)).mul(d.one).div(h),v=parseFloat(x.smartFormatTokens(y,this.token0)),f=this.vaultinator3000.toBN("0x".concat(this.vault.depositToken.token1Reserve)).mul(p.one).div(h),k=parseFloat(x.smartFormatTokens(f,this.token1)),j=x.formatFiatDisplay(d.unitPriceUSD,d),w=x.formatFiatDisplay(p.unitPriceUSD,p);c=Object(m.jsxs)(m.Fragment,{children:[this.renderDetailRow("LP Breakdown (".concat(d.symbol,")"),v,s),this.renderDetailRow("".concat(d.symbol," Price"),j,s),this.renderDetailRow("LP Breakdown (".concat(p.symbol,")"),k,s),this.renderDetailRow("".concat(p.symbol," Price"),w,s),Object(m.jsx)(zt,{token:this.vault.depositToken,useColor:[2,0],width:"100%",height:"150",vaultinator3000:this.vaultinator3000})]})}var O=Object(m.jsx)(m.Fragment,{});return 0!==this.vault.endBlock?O=this.renderDetailRow("Ends in blocks:",this.vault.endBlock-this.vaultinator3000.currentBlock,a):null!==this.vault.endTime&&(O=this.renderDetailRow("Ends at:",b.formatDate(this.vault.endTime,!0),a)),Object(m.jsxs)(tt,{className:"col-12 details",children:[Object(m.jsxs)(tt,{className:"col-12 chart",children:[Object(m.jsx)(et,{size:"1",className:"heading",children:"Token Price"}),Object(m.jsx)(Zt,{vaultID:this.vault.id,useColor:[4,1,2],width:"100%",height:"150",vaultinator3000:this.vaultinator3000})]}),Object(m.jsxs)(tt,{className:"col-12",children:[Object(m.jsx)(et,{size:"1",className:"heading",children:"Vault Details"}),this.renderDetailRow("Utilized Token",this.vault.rewardToken.symbol),this.renderDetailRow("Total Tokens Deposit",x.smartFormatTokensDisplay(this.vault.totalDeposit,this.vault.depositToken,!0),s),this.renderDetailRow("Total Value Locked",x.formatFiatDisplay(this.vault.totalDepositUSD),s),this.renderDetailRow("Total Pending Rewards",x.formatFiatDisplay(this.vault.totalPendingUSD),o),this.renderDetailRow("Last Compound",u,a),O]}),Object(m.jsxs)(tt,{className:"col-12",children:[Object(m.jsx)(et,{size:"1",className:"heading",children:"User Details"}),this.renderDetailRow("User Deposit $",x.formatFiatDisplay(this.vault.userDepositUSD),i&&s),this.renderDetailRow("User Deposit Tokens",x.smartFormatTokensDisplay(this.vault.userDeposit,this.vault.depositToken,!0),i),this.renderDetailRow("User Pending Rewards",x.formatFiatDisplay(this.vault.userPendingUSD),i&&o),this.renderDetailRow("Daily APR",Object(m.jsxs)(m.Fragment,{children:[b.smartFormatPercent(100*this.vault.combinedDailyAPR),(null===(e=this.vault.depositToken)||void 0===e?void 0:e.isLPToken())&&Object(m.jsx)(Nt,{className:"DailyApr",children:Object(m.jsxs)(tt,{className:"AprBreakdown",children:[Object(m.jsxs)(tt,{children:[Object(m.jsx)(tt,{children:"Vault Daily APR"}),Object(m.jsx)(tt,{children:b.smartFormatPercent(100*this.vault.dailyAPR,!0,3)})]}),Object(m.jsxs)(tt,{children:[Object(m.jsx)(tt,{children:"Trading Daily APR"}),Object(m.jsx)(tt,{children:b.smartFormatPercent(100*this.vault.dailyLPFeeAPR,!0,3)})]}),Object(m.jsxs)(tt,{className:"TotalApr",children:[Object(m.jsx)(tt,{children:"Total Daily APR"}),Object(m.jsx)(tt,{children:b.smartFormatPercent(100*this.vault.combinedDailyAPR,!0,3)})]})]})})]}),r)]}),Object(m.jsxs)(tt,{className:"col-md-12 chart",children:[Object(m.jsx)(et,{size:"1",className:"heading",children:"Daily ROI"}),Object(m.jsx)(qt,{vaultID:this.vault.id,useColor:1,width:"100%",height:"150",vaultinator3000:this.vaultinator3000})]}),Object(m.jsxs)(tt,{className:"col-12",children:[Object(m.jsxs)(et,{size:"1",className:"heading",children:[l," Details"]}),this.renderDetailRow("".concat(l," Price"),"".concat(x.formatFiatDisplay(this.vault.depositToken.unitPriceUSD)," per ").concat(null!==(n=this.vault.depositToken)&&void 0!==n&&n.isLPToken()?"LP":this.vault.depositToken.symbol),s),c]})]})}},{key:"renderProfitCalculator",value:function(){return Object(m.jsx)(tt,{className:"row details",children:Object(m.jsx)(Lt,{version:"1",vault:this.vault})})}},{key:"renderHeader",value:function(){return Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-md-2 tokenHeader",children:Object(m.jsx)(st,Object(r.a)({token:this.vault.depositToken},this.props))}),Object(m.jsx)("div",{className:"col-md-8 vaultTitle",children:Object(m.jsxs)(tt,{className:"VaultHeaderGroup",children:[Object(m.jsx)(et,{className:"name",color:"1",size:"1",children:this.vault.name}),Object(m.jsxs)(et,{className:"platform",color:"0",children:["Uses: ",this.vault.platform.name]})]})})]})}},{key:"render",value:function(){var t=this;if(!this.vault)return Object(m.jsx)(tt,{className:"Page_VaultDetails",children:Object(m.jsx)(Ft,{className:"Panel_Wait",children:Object(m.jsx)(et,{color:"2",children:"Please wait a moment..."})})});var e=this.props.show;return Object(m.jsx)(rt,{show:e,className:"ModalVaultDetails",onClose:function(){return t.close()},header:this.renderHeader(),children:Object(m.jsx)(tt,{className:"Page_VaultDetails",children:this.renderDetails()})})}}]),n}(H.a.Component),Gt=function(t){Object(p.a)(n,t);var e=Object(h.a)(n);function n(t){var a;return Object(u.a)(this,n),(a=e.call(this,t)).state={showDialog_deposit:!1,showDialog_withdraw:!1,showDialog_approve:!1,showDialog_profitCalculator:!1,showDialog_vaultDetails:!1,dialogVault:null},a}return Object(c.a)(n,[{key:"closeVaultDialog",value:function(){this.setState({showDialog_deposit:!1,showDialog_withdraw:!1,showDialog_approve:!1,showDialog_profitCalculator:!1,showDialog_vaultDetails:!1,dialogVault:null})}},{key:"showVaultDialog",value:function(t,e){this.setState({showDialog_deposit:"deposit"===t,showDialog_withdraw:"withdraw"===t,showDialog_approve:"approve"===t,showDialog_profitCalculator:"calculator"===t,showDialog_vaultDetails:"details"===t,dialogVault:e})}},{key:"render",value:function(){var t=this,e=this.state,n=e.showDialog_approve,a=e.showDialog_deposit,i=e.showDialog_withdraw,s=e.showDialog_profitCalculator,o=e.showDialog_vaultDetails,u=e.dialogVault;return i?Object(m.jsx)(ft,Object(r.a)({vault:u,show:i,onClose:function(){return t.closeVaultDialog()}},this.props)):a?Object(m.jsx)(jt,Object(r.a)({vault:u,show:a,onClose:function(){return t.closeVaultDialog()}},this.props)):n?Object(m.jsx)(Ot,Object(r.a)({vault:u,show:n,onClose:function(){return t.closeVaultDialog()}},this.props)):s?Object(m.jsx)(At,Object(r.a)({vault:u,show:s,onClose:function(){return t.closeVaultDialog()}},this.props)):o?Object(m.jsx)(Yt,Object(r.a)({vault:u,show:o,onClose:function(){return t.closeVaultDialog()}},this.props)):null}}]),n}(H.a.Component),Jt=function(t){Object(p.a)(n,t);var e=Object(h.a)(n);function n(t){var a;return Object(u.a)(this,n),(a=e.call(this,t)).renderNameContentGroup=function(t,e,n,a,i){var r=null;return void 0!==a&&(r=Object(m.jsx)(tt,{className:"groupValue2",children:a})),Object(m.jsxs)(tt,{className:"VaultInfoGroup ".concat(t),children:[Object(m.jsx)(tt,{className:"groupName",children:Object(m.jsxs)(et,{color:"1",children:[e,null!==i&&void 0!==i?i:Object(m.jsx)(m.Fragment,{})]})}),Object(m.jsx)(tt,{className:"groupValue",children:n}),r]})},a.state={updateRevision:0},a.id=t.id,a.refVaultModalManager=t.refVaultModalManager,a.vault=t.vault,a.stableToken=window.chefstableToken,a.refVaultView=H.a.createRef(),a.checkUpdate_token=a.checkUpdate_token.bind(Object(U.a)(a)),a.checkUpdate_vault=a.checkUpdate_vault.bind(Object(U.a)(a)),a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){document.addEventListener("token_userInfo",this.checkUpdate_token),document.addEventListener("vault_vaultInfo",this.checkUpdate_vault),document.addEventListener("vault_userInfo",this.checkUpdate_vault),this.refVaultView&&window.location.href.includes("vault_".concat(this.vault.id))&&this.refVaultView.current.scrollIntoView({block:"end",inline:"center"})}},{key:"componentWillUnmount",value:function(){document.removeEventListener("token_userInfo",this.checkUpdate_token),document.removeEventListener("vault_vaultInfo",this.checkUpdate_vault),document.removeEventListener("vault_userInfo",this.checkUpdate_vault)}},{key:"onClick_showCalculator",value:function(){this.refVaultModalManager.current.showVaultDialog("calculator",this.vault)}},{key:"onClick_compound",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(){return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.vault.compound();case 2:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"onClick_deposit",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(){return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.vault.initializedUser&&this.vault.isApproved){t.next=3;break}return this.refVaultModalManager.current.showVaultDialog("approve",this.vault),t.abrupt("return");case 3:this.refVaultModalManager.current.showVaultDialog("deposit",this.vault);case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"onClick_withdraw",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(){return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.refVaultModalManager.current.showVaultDialog("withdraw",this.vault);case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"checkUpdate_vault",value:function(t){x.checkEqualAddress(this.vault.address,t.detail.address)&&this.updateView()}},{key:"updateView",value:function(){var t=Object(r.a)({},this.state).updateRevision;this.setState({updateRevision:t+1})}},{key:"checkUpdate_token",value:function(t){x.checkEqualAddress(this.vault.depositToken.address,t.detail.address)&&this.updateView()}},{key:"renderNameValueGroup",value:function(t,e,n,a,i,r,s){var o=Object(m.jsxs)(et,{color:a?"0":"2",children:[n,s&&s.props.children&&Object(m.jsx)(Nt,{mobilePlacement:"bottom-end",children:s})]});return this.renderNameContentGroup(t,e,o,i,r)}},{key:"renderDepositWithdraw",value:function(){var t,e=this,n=(null===(t=this.vault.depositToken)||void 0===t?void 0:t.userBalance)||"0",a=this.vault.userDeposit||"0",i=Object(m.jsx)(it,{buttonStyle:"0"===n?"0":"1",onClick:function(){return e.onClick_deposit()},className:"VaultDepositButton ".concat("0"===n?"VaultButtonDisabled":""),children:"Deposit"}),r=Object(m.jsx)(it,{buttonStyle:"0"===a?"0":"1",onClick:function(){return e.onClick_withdraw()},className:"VaultWithdrawButton ".concat("0"===a?"VaultButtonDisabled":""),children:"Withdraw"});return Object(m.jsxs)(tt,{className:"depositWithdraw",children:[i,r]})}},{key:"renderCompound",value:function(){var t=this;return Object(m.jsx)(tt,{className:"compound",children:Object(m.jsxs)(it,{buttonStyle:"1",onClick:function(){return t.onClick_compound()},className:"VaultCompoundButton",children:["Compound",Object(m.jsx)("br",{}),"~"," ",x.formatFiatDisplay(this.vault.compoundRewardUSD,this.stableToken)]})})}},{key:"renderTotalDeposit",value:function(){return this.renderNameValueGroup("ttl","TTL",b.renderLoading(this.vault.initializedInfo,x.smartFormatTokens(this.vault.totalDeposit,this.vault.depositToken,!0)),this.vault.initializedInfo&&"0"===this.vault.totalDeposit)}},{key:"renderTotalDepositUSD",value:function(){return this.renderNameValueGroup("tvl","TVL",b.renderLoading(this.vault.initializedInfo&&this.vault.depositToken.initializedPrice,x.formatFiatDisplay(this.vault.totalDepositUSD,this.stableToken)),this.vault.initializedInfo&&"0"===this.vault.totalDeposit)}},{key:"renderUserDeposit",value:function(){var t;if("0"!==this.userDeposit||0!==this.vault.userProfitLoss){var e="",n="";this.vault.userProfitLoss>0?(e="profit",n="+"):this.vault.userProfitLoss<0&&(e="loss"),t=b.renderLoading(this.vault.initializedDB&&this.vault.initializedUser,Object(m.jsxs)(et,{size:"-1",color:"0",className:e,children:[n,b.smartFormatPercent(100*this.vault.userProfitLoss,!0)]}))}return this.renderNameValueGroup("userDeposit","deposit",b.renderLoading(this.vault.initializedUser,x.smartFormatTokensDisplay(this.vault.userDeposit,this.vault.depositToken,!0)),this.vault.initializedUser&&"0"===this.vault.userDeposit,t)}},{key:"renderVaultInfo",value:function(){return Object(m.jsx)(Bt,Object(r.a)({vault:this.vault,showContract:!1},this.props))}},{key:"renderDailyROI",value:function(){var t=this,e=!!this.vault.dailyLPFeeAPR&&this.vault.dailyLPFeeAPR>0;return this.renderNameValueGroup("dailyROI","daily ROI",b.renderLoading(this.vault.initializedDB,b.smartFormatPercent(100*this.vault.combinedDailyAPR,!0)),this.vault.initializedDB&&0===this.vault.dailyAPR,b.renderLoading(this.vault.initializedDB,Object(m.jsxs)(et,{size:"-1",color:"0",children:[b.smartFormatPercent(100*this.vault.combinedAPY,!0)," APY",e&&Object(m.jsx)(Nt,{children:Object(m.jsxs)(tt,{className:"AprBreakdown",children:[Object(m.jsxs)(tt,{className:"breakdownGroup",children:[Object(m.jsx)(tt,{children:"Vault APY"}),Object(m.jsx)(tt,{children:b.smartFormatPercent(100*this.vault.compoundedAPY,!0,3)})]}),Object(m.jsxs)(tt,{className:"breakdownGroup",children:[Object(m.jsx)(tt,{children:"Trading APR"}),Object(m.jsx)(tt,{children:b.smartFormatPercent(100*this.vault.lpFeeAPR,!0,3)})]}),Object(m.jsxs)(tt,{className:"TotalApr breakdownGroup",children:[Object(m.jsx)(tt,{children:"Total APY"}),Object(m.jsx)(tt,{children:b.smartFormatPercent(100*this.vault.combinedAPY,!0,3)})]})]})})]})),Object(m.jsx)(m.Fragment,{children:yt.calculator("svgLink",(function(){return t.onClick_showCalculator(t.vault)}))}),Object(m.jsx)(m.Fragment,{children:e&&Object(m.jsxs)(tt,{className:"AprBreakdown",children:[Object(m.jsxs)(tt,{className:"breakdownGroup",children:[Object(m.jsx)(tt,{children:"Vault Daily APR"}),Object(m.jsx)(tt,{children:b.smartFormatPercent(100*this.vault.dailyAPR,!0,3)})]}),Object(m.jsxs)(tt,{className:"breakdownGroup",children:[Object(m.jsx)(tt,{children:"Trading Daily APR"}),Object(m.jsx)(tt,{children:b.smartFormatPercent(100*this.vault.dailyLPFeeAPR,!0,3)})]}),Object(m.jsxs)(tt,{className:"TotalApr breakdownGroup",children:[Object(m.jsx)(tt,{children:"Total Daily APR"}),Object(m.jsx)(tt,{children:b.smartFormatPercent(100*this.vault.combinedDailyAPR,!0,3)})]})]})}))}},{key:"renderCompoundInfo",value:function(){var t="red",e=0;null!==this.vault.lastCompound&&((e=(new Date).getTime()/1e3-this.vault.lastCompound.getTime()/1e3)>=86400?t="red":e>=43200?t="yellow":e<43200&&(t="green"));return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("br",{}),Object(m.jsx)(tt,{className:"compoundInfo ".concat(t),title:b.getHMS(e,!0)})]})}},{key:"render",value:function(){var t="VaultView ".concat(this.props.className||"");return Object(m.jsxs)(tt,{id:"vault_".concat(this.vault.id),ref:this.refVaultView,className:t,children:[this.renderVaultInfo(),this.renderDailyROI(),this.renderTotalDepositUSD(),this.renderUserDeposit(),this.renderDepositWithdraw(),this.renderCompound()]})}}]),n}(H.a.Component),Kt=Jt,Xt=function(t){Object(p.a)(n,t);var e=Object(h.a)(n);function n(t){var a;return Object(u.a)(this,n),(a=e.call(this,t)).renderFilterResultEmpty=function(){return Object(m.jsx)(tt,{className:"VaultList",children:Object(m.jsx)(et,{className:"emptyFilter",children:a.vaultinator3000.vaultsFetched?Object(m.jsx)(m.Fragment,{children:"There are no results that match your current filter!"}):Object(m.jsx)(m.Fragment,{children:"Fetching vaults.."})})})},a.vaultinator3000=t.vaultinator3000,a.vaults=a.vaultinator3000.vaults,a.state={updateRevision:0,filter:{platformName:"",name:"",onlyDeposit:!1,vaultType:"",asset:""}},a.updateList=a.updateList.bind(Object(U.a)(a)),a.refVaultModalManager=H.a.createRef(),a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this.updateList(),document.addEventListener("chef_dataLoaded",this.updateList)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("chef_dataLoaded",this.updateList)}},{key:"setFilter",value:function(t){this.setState({filter:t})}},{key:"updateList",value:function(){var t=this.state.updateRevision;this.setState({updateRevision:t+1})}},{key:"filterVaults",value:function(){for(var t=[],e=this.state.filter,n=0;n<this.vaults.length;n+=1){var a=this.vaults[n];""!==e.platformName&&e.platformName!==a.platform.name||(""===e.name||a.name.includes(e.name.toUpperCase()))&&("Pool"===e.vaultType&&a.isFarm()||"Farm"===e.vaultType&&!a.isFarm()||"Stable"===e.vaultType&&!a.hasStable()||e.hideZeroBalance&&!a.userHasBalance()||e.onlyDeposit&&!a.userHasDeposit()||(""===e.asset||a.hasDepositAsset(e.asset))&&t.push(a))}return t}},{key:"render",value:function(){var t=this,e=this.filterVaults();if(0===e.length)return this.renderFilterResultEmpty();var n=e.map((function(e,n){var a=n%2===0;return Object(m.jsx)(H.a.Fragment,{children:Object(m.jsx)(Kt,Object(r.a)(Object(r.a)({},t.props),{},{refVaultModalManager:t.refVaultModalManager,id:e.id,className:a?"even":"odd",vault:e}))},e.id.toString())}));return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(Gt,{ref:this.refVaultModalManager,vaultinator3000:this.vaultinator3000}),Object(m.jsx)(tt,{className:"VaultList",children:n})]})}}]),n}(H.a.Component),Qt=null,$t=function(t){Object(p.a)(n,t);var e=Object(h.a)(n);function n(t){var a;return Object(u.a)(this,n),(a=e.call(this,t)).state={show:t.show||!1,title:"",text:"",onConfirm:null},Qt=Object(U.a)(a),a}return Object(c.a)(n,[{key:"onClick_confirm",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(){var e;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=this.state.onConfirm,this.setShow(!1),e&&e();case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"setShow",value:function(t){this.setState({show:t})}},{key:"render",value:function(){var t=this,e=this.state,n=e.title,a=e.show,i=e.text,r=Object(m.jsx)(et,{size:"1",children:n}),s=Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(it,{className:"ModalButton",onClick:function(){return t.setShow(!1)},children:"No"}),Object(m.jsx)(it,{buttonStyle:"1",className:"ModalButton",onClick:function(){return t.onClick_confirm()},children:"Yes"})]});return Object(m.jsx)(rt,{show:a,className:"ModalConfirm sizeNormal",onClose:function(){return t.setShow(!1)},header:r,footer:s,children:Object(m.jsx)(et,{color:"2",children:i})})}}],[{key:"showModal_Confirm",value:function(t,e,n){Qt.setShow(!0),Qt.setState({title:t,text:e,onConfirm:n})}}]),n}(H.a.Component),te=$t,ee=null,ne=function(t){Object(p.a)(n,t);var e=Object(h.a)(n);function n(t){var a;return Object(u.a)(this,n),(a=e.call(this,t)).vaultinator3000=t.vaultinator3000,a.state={show:t.show||!1,stage:0,data:null,txID:-1},ee=Object(U.a)(a),a}return Object(c.a)(n,[{key:"handleErrorData",value:function(t){var e,n=!1;if(4001===t.code)n=!0;return{message:t.message,reason:null===(e=t.data)||void 0===e?void 0:e.reason,autoClose:n}}},{key:"setShow",value:function(t){this.setState({show:t})}},{key:"getStageData",value:function(){var t=this.state,e=t.txID,n=t.stage,a=t.data,i=this.vaultinator3000.findTransaction(e),r=(null===i||void 0===i?void 0:i.description)||"";switch(n){case-1:var s=this.handleErrorData(a);return{title:"Failed",text:Object(m.jsxs)(m.Fragment,{children:["The transaction failed with error:",Object(m.jsx)("br",{}),s.message]}),description:r,icon:yt.error("svgError")};case 0:return{title:"Waiting for Confirmation",text:"Confirm transaction in your wallet",description:r,icon:yt.loading("svgLoading")};case 1:case 2:return{title:"Pending Transaction",text:"Waiting for transaction to be processed",description:Object(m.jsx)(m.Fragment,{children:r}),icon:yt.submitted("svgSubmitted")};case 3:return{title:"Complete",text:"Transaction successful",description:Object(m.jsx)(m.Fragment,{children:r}),icon:yt.success("svgSuccess")};default:return null}}},{key:"render",value:function(){var t=this,e=this.getStageData(),n=Object(m.jsx)(et,{size:"1",children:e.title}),a=Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(it,{className:"ModalButton",onClick:function(){return t.setShow(!1)},children:"dismiss"})});return Object(m.jsxs)(rt,{show:this.state.show,className:"ModalTransaction sizeNormal",onClose:function(){return t.setShow(!1)},header:n,footer:a,children:[e.icon,Object(m.jsx)(et,{color:"2",children:e.text}),Object(m.jsx)(et,{color:"1",size:"-1",children:e.description})]})}}],[{key:"showModal",value:function(t){ee.setState({stage:0,txID:t}),ee.setShow(!0)}},{key:"setTransactionStage",value:function(t,e,n){t===ee.state.txID&&ee.setState({stage:e,data:n})}}]),n}(H.a.Component),ae=null,ie=function(t){Object(p.a)(n,t);var e=Object(h.a)(n);function n(t){var a;return Object(u.a)(this,n),(a=e.call(this,t)).state={show:t.show||!1,title:"",text:"",buttonText:"",onClose:null},ae=Object(U.a)(a),a}return Object(c.a)(n,[{key:"onClick_close",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(){var e;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=this.state.onClose,this.setShow(!1),e&&e();case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"setShow",value:function(t){this.setState({show:t})}},{key:"render",value:function(){var t=this,e=this.state,n=e.title,a=e.buttonText,i=e.show,r=e.text,s=Object(m.jsx)(et,{size:"1",children:n}),o=Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(it,{className:"ModalButton",onClick:function(){return t.onClick_close()},children:a})});return Object(m.jsx)(rt,{show:i,className:"ModalMessage sizeNormal",onClose:function(){return t.setShow(!1)},header:s,footer:o,children:Object(m.jsx)(et,{color:"2",children:r})})}}],[{key:"showModal",value:function(t,e,n,a){ae.setShow(!0),ae.setState({title:t,text:e,buttonText:n||"OK",onClose:a||null})}}]),n}(H.a.Component),re=ie,se=function(t){Object(p.a)(n,t);var e=Object(h.a)(n);function n(t){var a;return Object(u.a)(this,n),(a=e.call(this,t)).convertTokenAmount=function(t,e,n){var a=window.chef.toBN(t.liquidityValue),i=window.chef.toBN(t.liquidityAmount),r=window.chef.toBN(e.liquidityValue),s=window.chef.toBN(e.liquidityAmount),o=window.chef.toBN(n||"0"),u=a.mul(o).div(i);return s.mul(u).div(r).toString(10)},a.state={updateRevision:0,id:t.id||"dialog_tokenInputConverted",onChange:t.onChange||null,token:t.token,tokenConvert:t.tokenConvert||window.chef.stableToken,showIcon:t.showIcon&&!0},a.checkUpdate_token=a.checkUpdate_token.bind(Object(U.a)(a)),a.ref_input=H.a.createRef(),a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){document.addEventListener("token_priceInfo",this.checkUpdate_token)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("token_priceInfo",this.checkUpdate_token)}},{key:"onChange",value:function(t){var e=this.state.onChange;this.update(),e&&e(t)}},{key:"getAsUint256",value:function(){var t=x.tokensToUint256String(this.ref_input.current.getValue());return window.chef.web3_data.eth.abi.encodeParameter("uint256",t)}},{key:"update",value:function(){var t=this.state.updateRevision;this.setState({updateRevision:t+1})}},{key:"checkUpdate_token",value:function(t){var e=this.state.token;x.checkEqualAddress(t.detail.address,e.address)&&this.update()}},{key:"render",value:function(){var t,e,n=this,a=["InputTokenAmountConverted"],i=this.state,r=i.token,s=i.tokenConvert,o=i.showIcon,u=i.id,c=this.props.label,l=null===(t=this.ref_input)||void 0===t||null===(e=t.current)||void 0===e?void 0:e.getValue(),d=this.convertTokenAmount(r,s||window.chef.stableToken,x.tokensToUint256String(l||"0")),p=Object(m.jsxs)(tt,{className:"converted",children:[x.smartFormatTokens(d,s,!0)," ",s.symbol]}),h=r.symbol;null!==r.token0&&(h="LP");var y=null;c&&(y=Object(m.jsx)(et,{size:"1",className:"Label",children:c}));var b=null;o&&(b=Object(m.jsx)(st,{token:r,height:"60",width:"60"}),a.push("Icon"));var v=0;return h.length>4&&(v=-1),h.length>8&&(v=-3),Object(m.jsx)(tt,{className:a.join(" "),children:Object(m.jsxs)(tt,{children:[p,Object(m.jsxs)(tt,{className:"inputContainer",children:[Object(m.jsx)(tt,{className:"LabelContainer",children:y}),b,Object(m.jsx)(ot,{id:u,ref:this.ref_input,onChange:function(t){return n.onChange(t)},type:"number",min:"0",placeholder:"0"}),Object(m.jsx)(tt,{className:"info",children:Object(m.jsx)(et,{size:v,children:h})})]}),Object(m.jsx)(tt,{className:"AddButton",children:Object(m.jsx)(lt,{token:r,mode:"text"})})]})})}}]),n}(H.a.Component),oe=function(t){Object(p.a)(n,t);var e=Object(h.a)(n);function n(t){var a;return Object(u.a)(this,n),(a=e.call(this,t)).state={onChange:t.onChange||null},a.refInput=H.a.createRef(),a}return Object(c.a)(n,[{key:"onChange",value:function(t){var e=this.state.onChange;null!==e&&e(t)}},{key:"isChecked",value:function(){return this.refInput.current.checked}},{key:"render",value:function(){var t=this,e=this.state,n=e.className,a=e.id,i=e.name,r=e.checked,s="CheckBox ".concat(n||"");return Object(m.jsx)("input",{id:a,ref:this.refInput,name:i,className:s,type:"checkbox",checked:r,onChange:function(e){return t.onChange(e)}})}}]),n}(H.a.Component),ue=null,ce=function(t){Object(p.a)(n,t);var e=Object(h.a)(n);function n(t){var a;return Object(u.a)(this,n),(a=e.call(this,t)).renderSettingsCol=function(t,e,n){return Object(m.jsxs)(tt,{className:"settingsCol ".concat(n||""),children:[Object(m.jsx)(et,{color:"2",children:t}),e]})},a.renderSettingsRow=function(t,e,n){return Object(m.jsxs)(tt,{className:"settingsRow ".concat(n||""),children:[Object(m.jsx)(et,{color:"2",children:t}),e]})},a.renderDust=function(){if(null===a.depositToken||!a.depositToken.isLPToken())return null;var t=a.vaultinator3000.findToken(a.depositToken.token0),e=a.vaultinator3000.findToken(a.depositToken.token1),n=a.state,i=n.autoConvertDust,r=n.minDustToken0,s=n.minDustToken1;return Object(m.jsxs)(tt,{children:[a.renderSettingsRow("Auto Convert Dust",Object(m.jsx)(oe,{ref:a.refCheckBoxAutoDust,checked:i,onChange:function(){return a.onChange_value()}})),Object(m.jsxs)(tt,{className:"row",children:[a.renderSettingsCol("Min Dust Token0",Object(m.jsx)(se,{ref:a.refInputMinDust0,token:t,value:r,onChange:function(){return a.onChange_value()}}),"col-6"),a.renderSettingsCol("Min Dust Token1",Object(m.jsx)(se,{ref:a.refInputMinDust1,token:e,value:s,onChange:function(){return a.onChange_value()}}),"col-6")]})]})},a.renderMinReward=function(){if(null===a.rewardToken)return null;var t=a.state,e=t.minAdditionalRewardToReward,n=t.autoCompoundBeforeDeposit,i=t.autoCompoundBeforeWithdraw,r=t.minRewardToDeposit,s=Object(m.jsx)(m.Fragment,{});return null!==a.additionalRewardToken&&(s=Object(m.jsx)(m.Fragment,{children:a.renderSettingsCol("Min Additional Reward",Object(m.jsx)(se,{ref:a.refInputMinAdditionalReward,token:a.additionalRewardToken,value:e,onChange:function(){return a.onChange_value()}}))})),Object(m.jsxs)(tt,{children:[Object(m.jsxs)(tt,{className:"row",children:[a.renderSettingsRow("Auto Compound (deposit)",Object(m.jsx)(oe,{ref:a.refCheckBoxAutoCompound_deposit,checked:n,onChange:function(){return a.onChange_value()}}),"col-6"),a.renderSettingsRow("Auto Compound (withdraw)",Object(m.jsx)(oe,{ref:a.refCheckBoxAutoCompound_withdraw,checked:i,onChange:function(){return a.onChange_value()}}),"col-6")]}),a.renderSettingsCol("Min Reward",Object(m.jsx)(se,{ref:a.refInputMinReward,token:a.rewardToken,value:r,onChange:function(){return a.onChange_value()}})),s]})},a.vaultinator3000=t.vaultinator3000,a.state={show:t.show||!1,autoConvertDust:!1,autoCompoundBeforeDeposit:!1,autoCompoundBeforeWithdraw:!1,minRewardToDeposit:"0",minAdditionalRewardToReward:"0",minDustToken0:"0",minDustToken1:"0"},a.vault=null,a.strategy=null,a.rewardToken=null,a.depositToken=null,a.additionalRewardToken=null,a.refCheckBoxAutoDust=H.a.createRef(),a.refCheckBoxAutoCompound_deposit=H.a.createRef(),a.refCheckBoxAutoCompound_withdraw=H.a.createRef(),a.refInputMinReward=H.a.createRef(),a.refInputMinAdditionalReward=H.a.createRef(),a.refInputMinDust0=H.a.createRef(),a.refInputMinDust1=H.a.createRef(),ue=Object(U.a)(a),a.checkUpdate_vaultStrategy=a.checkUpdate_vaultStrategy.bind(Object(U.a)(a)),a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){document.addEventListener("vaultStrategy_info",this.checkUpdate_vaultStrategy)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("vaultStrategy_info",this.checkUpdate_vaultStrategy)}},{key:"onClick_refresh",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(){return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.load();case 2:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"onClick_save",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(){var e,n,a,i,r,o,u,c;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.setShow(!1),null!==this.vault.strategy){t.next=3;break}return t.abrupt("return");case 3:if(e=this.state,n=e.autoConvertDust,a=e.autoCompoundBeforeDeposit,i=e.autoCompoundBeforeWithdraw,r=e.minRewardToDeposit,o=e.minAdditionalRewardToReward,u=e.minDustToken0,c=e.minDustToken1,n===this.strategy.autoConvertDust&&a===this.strategy.autoCompoundBeforeDeposit&&i===this.strategy.autoCompoundBeforeWithdraw){t.next=7;break}return t.next=7,this.vault.strategy.setAutoActions(n,a,i);case 7:if(r===this.strategy.minRewardToDeposit&&o===this.strategy.minAdditionalRewardToReward){t.next=10;break}return t.next=10,this.vault.strategy.setMinRewardAmount(r,o);case 10:if(u===this.strategy.minDustToken0&&c===this.strategy.minDustToken1){t.next=13;break}return t.next=13,this.vault.strategy.setMinDustAmount(u,c);case 13:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"onClick_upgrade",value:function(){this.vault.upgradeStrat()}},{key:"onChange_value",value:function(){null!==this.refCheckBoxAutoDust.current&&this.setState({autoConvertDust:this.refCheckBoxAutoDust.current.isChecked(),minDustToken0:this.vaultinator3000.toBN(this.refInputMinDust0.current.getAsUint256()).toString(10),minDustToken1:this.vaultinator3000.toBN(this.refInputMinDust1.current.getAsUint256()).toString(10)}),this.setState({autoCompoundBeforeDeposit:this.refCheckBoxAutoCompound_deposit.current.isChecked(),autoCompoundBeforeWithdraw:this.refCheckBoxAutoCompound_withdraw.current.isChecked(),minRewardToDeposit:this.vaultinator3000.toBN(this.refInputMinReward.current.getAsUint256()).toString(10)}),null!==this.refInputMinAdditionalReward.current&&this.setState({minAdditionalRewardToReward:this.vaultinator3000.toBN(this.refInputMinAdditionalReward.current.getAsUint256()).toString(10)})}},{key:"setShow",value:function(t){this.setState({show:t})}},{key:"checkUpdate_vaultStrategy",value:function(t){var e;x.checkEqualAddress(null===(e=this.vault.strategy)||void 0===e?void 0:e.address,t.detail.address)&&this.refresh()}},{key:"load",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(){var e,n=this;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.vault.getStrategy();case 2:(e=t.sent)&&e.reloadData().then((function(){return n.refresh()}));case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"refresh",value:function(){var t,e,n,a;null!==this.vault.strategy&&(this.strategy=null===(t=this.vault)||void 0===t?void 0:t.strategy,this.rewardToken=this.vaultinator3000.findToken(null===(e=this.vault)||void 0===e?void 0:e.rewardTokenAddress),this.depositToken=this.vaultinator3000.findToken(null===(n=this.vault)||void 0===n?void 0:n.depositTokenAddress),this.additionalRewardToken=this.vaultinator3000.findToken(null===(a=this.strategy)||void 0===a?void 0:a.rewardTokenAddress),this.setState({autoConvertDust:this.strategy.autoConvertDust,autoCompoundBeforeDeposit:this.strategy.autoCompoundBeforeDeposit,autoCompoundBeforeWithdraw:this.strategy.autoCompoundBeforeWithdraw,minRewardToDeposit:this.strategy.minRewardToDeposit,minAdditionalRewardToReward:this.strategy.minAdditionalRewardToReward,minDustToken0:this.strategy.minDustToken0,minDustToken1:this.strategy.minDustToken1}))}},{key:"renderButtonUpgradeStrategy",value:function(){var t=this,e=new Date(1e3*parseInt(this.vault.proposedTime,10)),n=Object(m.jsx)(m.Fragment,{}),a=e.getTime()/1e3-(new Date).getTime()/1e3;return a>0&&(n=Object(m.jsxs)(m.Fragment,{children:[" in ",b.getHMS(a)]})),Object(m.jsxs)(it,{onClick:function(){return t.onClick_upgrade()},children:["upgrade ",n]})}},{key:"render",value:function(){var t=this,e=Object(m.jsx)(m.Fragment,{});null!==this.vault&&this.vaultinator3000.toBN(this.vault.proposedStrategy)!==this.vaultinator3000.toBN(0)&&(e=this.renderButtonUpgradeStrategy());var n,a=Object(m.jsx)(et,{size:"1",children:"Settings:"}),i=Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(it,{buttonStyle:"1",className:"ModalButton",onClick:function(){return t.onClick_save()},children:"save"}),Object(m.jsx)(it,{buttonStyle:"1",className:"ModalButton",onClick:function(){return t.onClick_refresh()},children:"refresh"}),e]}),r=Object(m.jsx)(m.Fragment,{});null!==this.vaultinator3000.currentChain&&(r=Object(m.jsxs)(tt,{className:"settingsRow",children:[Object(m.jsx)(et,{color:"2",children:"Strategy:"}),Object(m.jsx)(Ct,{href:this.vaultinator3000.currentChain.linkExplorerContract.replace("{address}",null===(n=this.strategy)||void 0===n?void 0:n.address),target:"blank",children:yt.link("svgLink contract",null,"View Contract")})]}));return Object(m.jsx)(rt,{show:this.state.show,className:"ModalVaultStrategySettings sizeLarge",onClose:function(){return t.setShow(!1)},header:a,footer:i,children:Object(m.jsxs)(tt,{className:"settings",children:[r,this.renderMinReward(),this.renderDust()]})})}}],[{key:"showModal",value:function(t){ue.vault=t,ue.load(),ue.setShow(!0)}}]),n}(H.a.Component),le=ce,de=function(t){return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(te,Object(r.a)({},t)),Object(m.jsx)(ne,Object(r.a)({},t)),Object(m.jsx)(re,Object(r.a)({},t)),Object(m.jsx)(le,Object(r.a)({},t))]})},pe=function(t){Object(p.a)(n,t);var e=Object(h.a)(n);function n(t){var a;return Object(u.a)(this,n),(a=e.call(this,t)).refreshCount=0,a.template=null,a.walletInstalled=!1,a.chainID=0,a.web3_data=null,a.web3_user=null,a.account=null,a.currentChain=null,a.currentBlock=0,a.chains=[],a.depositTokens=[],a.depositAssets=[],a.user=null,a.stableToken=null,a.wrappedCoin=null,a.transactionCounter=1,a.transactions=[],a.dataVersion=(new Date).getTime()/1e3,a.defaultChain=t.defaultChain,a.oracle=new Q(Object(U.a)(a)),a.tokens=[],a.routers=[],a.userCoinBalance="0",a.userCoinBalanceUSD=0,a.avgGasPrice=0,a.interval_refresh=null,a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(){var e=this;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.initApp();case 2:this.interval_refresh=setInterval((function(){return e.refreshData()}),1e4);case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){null!==this.interval_refresh&&clearInterval(this.interval_refresh)}},{key:"refreshChainData",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(){return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.refreshData_tokens();case 2:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"refreshData",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(){var e=this;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null===this.web3_data){t.next=15;break}return t.t0=parseFloat,t.t1=this.web3_data.utils,t.next=5,this.web3_data.eth.getGasPrice();case 5:return t.t2=t.sent,t.t3=t.t1.fromWei.call(t.t1,t.t2,"gwei").toString(),this.avgGasPrice=(0,t.t0)(t.t3).toFixed(2),t.next=10,this.web3_data.eth.getBlockNumber();case 10:return this.currentBlock=t.sent,t.next=13,b.measureTime("TM: AppRefresh #".concat(this.refreshCount),Object(o.a)(Object(s.a)().mark((function t(){return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.refreshChainData();case 2:case"end":return t.stop()}}),t)}))));case 13:t.next=26;break;case 15:if(null===this.web3_user){t.next=26;break}return t.t4=parseFloat,t.t5=this.web3_user.utils,t.next=20,this.web3_user.eth.getGasPrice();case 20:return t.t6=t.sent,t.t7=t.t5.fromWei.call(t.t5,t.t6,"gwei").toString(),this.avgGasPrice=(0,t.t4)(t.t7).toFixed(2),t.next=25,this.web3_user.eth.getBlockNumber();case 25:this.currentBlock=t.sent;case 26:this.refreshCount+=1,document.dispatchEvent(new CustomEvent("app_reload"));case 28:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"refreshData_tokens",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(){var e,n,a=this;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.tokens.sort((function(t,e){var n=["Stable","LPStable","LPCoin","LPMirror","Alias","LP"],a=n.indexOf(t.oracleType),i=n.indexOf(e.oracleType);return a===i?t.address>e.address?1:-1:a>i?1:-1})),e=[],t.next=4,b.measureTime("TM: TokenInit ".concat(this.tokens.length),Object(o.a)(Object(s.a)().mark((function t(){return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,P.batchInit(a.tokens,a);case 2:e=t.sent;case 3:case"end":return t.stop()}}),t)}))));case 4:return n=e.filter((function(t){return!a.isSpecialToken(t)})),t.next=7,b.measureTime("TM: TokenPairInfo ".concat(n.length),Object(o.a)(Object(s.a)().mark((function t(){return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,P.batchLoadPairInfo(n,a);case 2:case"end":return t.stop()}}),t)}))));case 7:return t.next=9,b.measureTime("TM: OracleTokenPairs ".concat(n.length),Object(o.a)(Object(s.a)().mark((function t(){return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Q.batchLoadPricePairs(n,a);case 2:case"end":return t.stop()}}),t)}))));case 9:return t.next=11,b.measureTime("TM: TokenPrice ".concat(n.length),Object(o.a)(Object(s.a)().mark((function t(){return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,P.batchReloadPrice(n);case 2:case"end":return t.stop()}}),t)}))));case 11:if(null===this.account){t.next=19;break}return t.next=14,b.measureTime("TM: TokenUser ".concat(n.length),Object(o.a)(Object(s.a)().mark((function t(){var n;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.filter((function(t){return a.isSpecialToken(t)||a.depositTokens.includes(t)})),t.next=3,P.batchLoadUserData(n,a);case 3:case"end":return t.stop()}}),t)}))));case 14:if(null===this.currentChain){t.next=19;break}return t.next=17,this.web3_user.eth.getBalance(this.account);case 17:this.userCoinBalance=t.sent,this.userCoinBalanceUSD=this.wrappedCoin.getPriceUSDForAmount(this.userCoinBalance);case 19:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"isSpecialToken",value:function(t){var e,n;return t.address===(null===(e=window.chef.moonChef)||void 0===e||null===(n=e.moonToken)||void 0===n?void 0:n.address)}},{key:"selectWeb3Connection",value:function(t){return x.findWeb3Connection(this.selectWeb3ConnectionID(t)).web3}},{key:"selectWeb3ConnectionID",value:function(t){var e=t?"user":"data";return W.alwaysUseUserWeb3&&null!==this.web3_user&&(e="user"),e}},{key:"makeMultiCall",value:function(t){return x.makeMultiCall(this.selectWeb3ConnectionID(t))}},{key:"initWeb3",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(){return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(x.initWeb3Data(Z),this.web3_user=null,b.getStorage_bool(!1,"web3_disconnected",!1)){t.next=6;break}return t.next=5,x.createAndConnectWeb3Connection("user",-1);case 5:this.web3_user=t.sent;case 6:if(null!==this.web3_user){t.next=10;break}t.t0=b.getStorage_int(!1,"web3_selectedChain",this.defaultChain),t.next=13;break;case 10:return t.next=12,this.web3_user.eth.net.getId();case 12:t.t0=t.sent;case 13:return this.chainID=t.t0,t.prev=14,t.next=17,x.createAndConnectWeb3Connection("data",this.chainID);case 17:this.web3_data=t.sent,t.next=24;break;case 20:t.prev=20,t.t1=t.catch(14),console.error("Web3 [data] failed to connect"),this.web3_data=this.web3_user;case 24:if(!window.ethereum){t.next=31;break}return this.walletInstalled=!0,window.ethereum.on("accountsChanged",(function(){window.location.reload()})),window.ethereum.on("chainChanged",(function(){window.location.reload()})),window.ethereum.on("disconnect",(function(){window.location.reload()})),t.next=31,this.connectToWallet();case 31:document.dispatchEvent(new CustomEvent("chef_connectedToWeb3"));case 32:case"end":return t.stop()}}),t,this,[[14,20]])})));return function(){return t.apply(this,arguments)}}()},{key:"initChainData",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(){var e,n,a,i,r,o;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b.fetchJSON("".concat(this.baseUrl,"/data/").concat(this.currentChain.name,"/routers.json?v=").concat(this.dataVersion));case 2:for(e=t.sent,n=0;n<e.length;n+=1)a=e[n],this.routers.push(new K(a,this));return t.next=6,b.fetchJSON("".concat(this.baseUrl,"/data/").concat(this.currentChain.name,"/tokens.json?v=").concat(this.dataVersion));case 6:for(i=t.sent,r=0;r<i.length;r+=1)o=i[r],this.tokens.push(new P(o,this));this.stableToken=this.findToken(this.currentChain.stableCoin),this.wrappedCoin=this.findToken(this.currentChain.wrappedCoin);case 10:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"initApp",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(){return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.initWeb3();case 2:return t.next=4,b.fetchJSON("".concat(this.baseUrl,"/data/chains.json?v=").concat(this.dataVersion));case 4:if(this.chains=t.sent,this.currentChain=this.findChain(this.chainID),null!==this.currentChain){t.next=10;break}this.error("Invalid System",!0),t.next=12;break;case 10:return t.next=12,this.initChainData();case 12:return t.next=14,this.initComplete();case 14:document.dispatchEvent(new CustomEvent("chef_dataLoaded"));case 15:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"initComplete",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(){return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.refreshData();case 2:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"connectToWallet",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(e){var n;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(b.getStorage_bool(!1,"web3_disconnected",!1)){t.next=14;break}if(!e){t.next=6;break}return t.next=4,window.ethereum.request({method:"wallet_requestPermissions",params:[{eth_accounts:{}}]});case 4:t.next=14;break;case 6:return t.prev=6,t.next=9,window.ethereum.request({method:"eth_requestAccounts"});case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(6),b.setStorage(!1,"web3_disconnected",!0);case 14:if(null===this.web3_user){t.next=19;break}return t.next=17,this.web3_user.eth.getAccounts();case 17:(n=t.sent).length>0&&(this.account=n[0]);case 19:case"end":return t.stop()}}),t,this,[[6,11]])})));return function(e){return t.apply(this,arguments)}}()},{key:"error",value:function(t,e){void 0===e&&(e=!1);var n="[AppChef] ".concat(t);if(!e)throw n;console.error(n)}},{key:"addDepositAsset",value:function(t){null===t||this.depositAssets.includes(t)||this.isSpecialToken(t)||(this.depositAssets.push(t),this.depositAssets.sort((function(t,e){return t.symbol<e.symbol?-1:t.symbol>e.symbol?1:0})))}},{key:"addDepositToken",value:function(t){null===t||this.depositTokens.includes(t)||(this.depositTokens.push(t),t.isLPToken()?(this.addDepositAsset(this.findToken(t.token0)),this.addDepositAsset(this.findToken(t.token1))):this.addDepositAsset(t))}},{key:"findChain",value:function(t){var e=this.chains.find((function(e){return e.id===t}));return void 0===e?null:e}},{key:"findRouter",value:function(t){return t&&this.routers.find((function(e){return e.id===t||e.address.toLowerCase()===t.toLowerCase()}))||null}},{key:"findRouterForToken",value:function(t){return this.findRouter(t.router)}},{key:"findToken",value:function(t){return t?(t=t.toLowerCase(),this.tokens.find((function(e){return e.address.toLowerCase()===t||e.symbol.toLowerCase()===t}))||null):null}},{key:"findTransaction",value:function(t){return t?("string"===typeof t&&(t=t.toLowerCase()),this.transactions.find((function(e){return e.hash.toLowerCase()===t||e.id===t}))||null):null}},{key:"makeToast",value:function(t,e){void 0===e&&(e=!0);var n={position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!1,progress:void 0,theme:"dark"};e?q.b.success(t,n):q.b.error(t,n)}},{key:"trySend",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(e,n,a,i,r,o){var u,c=this;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u=this.transactionCounter,this.transactionCounter+=1,this.transactions.push({id:u,hash:"",stage:1,description:r||"",receipt:null,error:null}),ne.showModal(u),t.abrupt("return",x.trySend(e,n,a,i,(function(t){c.findTransaction(u).hash=t,ne.setTransactionStage(u,1,t)}),(function(t){c.findTransaction(u).receipt=t}),(function(t,e){var n=c.findTransaction(u);n.stage=3,n.receipt=e,ne.setTransactionStage(u,3,e),c.makeToast(Object(m.jsxs)(m.Fragment,{children:["Transaction complete!",Object(m.jsx)("br",{}),Object(m.jsx)(et,{size:"-1",children:n.description})]}),!0)}),(function(t){var e=c.findTransaction(u);e.stage=-1,e.error=t,ne.setTransactionStage(u,-1,t)}),o));case 5:case"end":return t.stop()}}),t,this)})));return function(e,n,a,i,r,s){return t.apply(this,arguments)}}()},{key:"toBN",value:function(t){return null===this.web3_data?this.web3_user.utils.toBN(t):this.web3_data.utils.toBN(t)}},{key:"render",value:function(){return Object(m.jsxs)(tt,{className:"Page_Vaults",children:[Object(m.jsx)(de,{vaultinator3000:this}),Object(m.jsx)(Xt,{ref:this.refVaultList,vaultinator3000:this})]})}}]),n}(H.a.Component),he=pe,ye=(n(1098),n(1099),function(t){Object(p.a)(n,t);var e=Object(h.a)(n);function n(t){var a;return Object(u.a)(this,n),(a=e.call(this,t)).moonConfig=null,a.platforms=[],a.user=null,a.config=t.config,a.vaultsFetched=!1,a.vaultChef=null,a.moonChef=null,a.vaults=[],a.userVotingPower=0,a.minAPR=0,a.maxAPR=0,a.totalDepositUSD=0,a.totalPendingUSD=0,a.userDepositUSD=0,a.userPendingUSD=0,a.roiDailyAPR=0,a.roiWeeklyAPR=0,a.roiMonthlyAPR=0,a.roiYearlyAPR=0,a.roiDailyAPY=0,a.roiWeeklyAPY=0,a.roiMonthlyAPY=0,a.roiYearlyAPY=0,a.avgDailyAPR=0,a.avgYearlyAPR=0,a.avgYearlyAPY=0,a.totalDailyROI=0,a.totalDailyUSD=0,a.totalDailyProtocolUSD=0,a.baseUrl="https://app.moon-vault.com",a.api_url="".concat(a.baseUrl,"/api.php"),a}return Object(c.a)(n,[{key:"refreshChainData",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(){return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return null===this.user||window.location.hostname.includes("localhost")||this.refreshUserData(),t.next=3,Object(l.a)(Object(d.a)(n.prototype),"refreshChainData",this).call(this);case 3:return t.next=5,this.refreshData_vaults();case 5:if(null===this.moonChef){t.next=8;break}return t.next=8,this.moonChef.reloadData();case 8:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"refreshData_vaults",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(){var e,n=this;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b.measureTime("TM: VaultInit ".concat(this.vaults.length),Object(o.a)(Object(s.a)().mark((function t(){return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,V.batchInit(n.vaults,n);case 2:e=t.sent;case 3:case"end":return t.stop()}}),t)}))),this.config.debugMode);case 2:return t.next=4,b.measureTime("TM: VaultData ".concat(e.length),Object(o.a)(Object(s.a)().mark((function t(){return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,V.batchLoadVaultInfo(e,n);case 2:case"end":return t.stop()}}),t)}))),this.config.debugMode);case 4:return t.next=6,b.measureTime("TM: VaultDB ".concat(e.length),Object(o.a)(Object(s.a)().mark((function t(){return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,V.batchReloadDBInfo(n);case 2:case"end":return t.stop()}}),t)}))),this.config.debugMode);case 6:if(null===this.account){t.next=9;break}return t.next=9,b.measureTime("TM: VaultUserData ".concat(e.length),Object(o.a)(Object(s.a)().mark((function t(){return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,V.batchLoadUserInfo(e,n);case 2:case"end":return t.stop()}}),t)}))),this.config.debugMode);case 9:this.calculateVaultStats();case 10:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"calculateVaultStats",value:function(){for(var t=0,e=0,n=this.toBN(0),a=this.toBN(0),i=this.toBN(0),r=this.toBN(0),s=0,o=0,u=0,c=0,l=0,d=0,p=0,h=0,y=this.toBN(0),m=0;m<this.vaults.length;m+=1){var b=this.vaults[m];e=Math.max(e,b.dailyAPR),t=0===t?b.dailyAPR:Math.min(t,b.dailyAPR),n=n.add(this.toBN(b.totalDepositUSD)),a=a.add(this.toBN(b.totalPendingUSD));var v=this.toBN(b.totalDepositUSD).mul(this.toBN(parseInt(b.dailyAPR*this.vaultChef.percentFactor,10))).div(this.toBN(this.vaultChef.percentFactor));y=y.add(v),i=i.add(this.toBN(b.userDepositUSD)),r=r.add(this.toBN(b.userPendingUSD)),s+=b.roiDailyAPR,o+=b.roiWeeklyAPR,u+=b.roiMonthlyAPR,c+=b.roiYearlyAPR,l+=b.roiDailyAPY,d+=b.roiWeeklyAPY,p+=b.roiMonthlyAPY,h+=b.roiYearlyAPY}this.maxAPR=e,this.minAPR=t,this.totalDepositUSD=n.toString(10),this.totalPendingUSD=a.toString(10),this.userDepositUSD=i.toString(10),this.userPendingUSD=r.toString(10),this.roiDailyAPR=s,this.roiWeeklyAPR=o,this.roiMonthlyAPR=u,this.roiYearlyAPR=c,this.roiDailyAPY=l,this.roiWeeklyAPY=d,this.roiMonthlyAPY=p,this.roiYearlyAPY=h;var f=parseFloat(x.fullFormatTokens(this.userDepositUSD,this.stableToken));if(this.avgDailyAPR=this.roiDailyAPR/(0===f?1:f),this.avgYearlyAPR=this.roiYearlyAPR/(0===f?1:f),this.avgYearlyAPY=this.roiYearlyAPY/(0===f?1:f),0===y.cmp(this.toBN(0)))this.totalDailyUSD="0",this.totalDailyProtocolUSD="0",this.totalDailyROI=0;else{var k=this.toBN(parseInt((this.vaultChef.nativeLiquidityFee+this.vaultChef.nativePoolFee)*this.vaultChef.percentFactor,10)),j=y.mul(this.toBN(this.vaultChef.percentFactor)).div(n).toString(10);this.totalDailyProtocolUSD=y.mul(k).div(this.toBN(this.vaultChef.percentFactor)).toString(10),this.totalDailyUSD=y.toString(10),this.totalDailyROI=parseFloat(j)/this.vaultChef.percentFactor}}},{key:"initChainData",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(){var e,a,i,o,u,c,p,h,y,m,v;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.vaultChef=new T(this.currentChain.vaultChef,this),t.prev=1,t.next=4,this.vaultChef.init();case 4:return t.next=6,this.vaultChef.reloadUserData();case 6:t.next=10;break;case 8:t.prev=8,t.t0=t.catch(1);case 10:return t.next=12,Object(l.a)(Object(d.a)(n.prototype),"initChainData",this).call(this);case 12:return t.next=14,b.fetchJSON("".concat(this.baseUrl,"/data/").concat(this.currentChain.name,"/vaults.json?v=").concat(this.dataVersion));case 14:e=t.sent,a=this.config.compatibleVaults,i=0;case 17:if(!(i<e.length)){t.next=37;break}o=e[i],u=Object(r.a)(Object(r.a)({},o),{},{vaults:[]}),c=[],p=!1,h=0;case 23:if(!(h<o.vaults.length)){t.next=33;break}if(y=o.vaults[h],a.includes(y.id)){t.next=27;break}return t.abrupt("continue",30);case 27:p=!0,m=new V(y,u,this),c.push(m);case 30:h+=1,t.next=23;break;case 33:if(p){for(u.vaults=c,v=0;v<c.length;v+=1)this.vaults.push(c[v]);this.platforms.push(u)}case 34:i+=1,t.next=17;break;case 37:this.vaultsFetched=!0;case 38:case"end":return t.stop()}}),t,this,[[1,8]])})));return function(){return t.apply(this,arguments)}}()},{key:"initApp",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(){return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b.fetchJSON("".concat(this.baseUrl,"/data/moonConfig.json?v=").concat(this.dataVersion));case 2:return this.moonConfig=t.sent,this.defaultChain=this.moonConfig.moonChain,t.next=6,Object(l.a)(Object(d.a)(n.prototype),"initApp",this).call(this);case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"initComplete",value:function(){var t=Object(o.a)(Object(s.a)().mark((function t(){return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.moonChef=new F(this),t.prev=1,t.next=4,this.moonChef.init();case 4:t.next=8;break;case 6:t.prev=6,t.t0=t.catch(1);case 8:return t.next=10,Object(l.a)(Object(d.a)(n.prototype),"initComplete",this).call(this);case 10:case"end":return t.stop()}}),t,this,[[1,6]])})));return function(){return t.apply(this,arguments)}}()},{key:"isSpecialToken",value:function(t){var e,n;return x.checkEqualAddress(t.address,null===(e=this.moonChef)||void 0===e||null===(n=e.moonToken)||void 0===n?void 0:n.address)}},{key:"findVault",value:function(t){return this.vaults.find((function(e){return e.id===t}))||null}},{key:"findVaultPlatform",value:function(t){return this.platforms.find((function(e){return e.name===t}))||null}}]),n}(he)),me=ye;e.default=function(){return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{className:"vaultsHeading",children:"Vaults"}),Object(m.jsx)(me,{config:{compatibleVaults:[23],defaultChain:56,cdnPath:"http://dev.moon-vault.com/",showBreakevenPanel:!1,debugMode:!1}}),Object(m.jsxs)(a.a,{container:!0,children:[Object(m.jsx)(a.a,{item:!0,lg:7,md:9,sm:8,xs:7}),Object(m.jsx)(a.a,{item:!0,lg:3,md:3,sm:4,xs:5,children:Object(m.jsx)("a",{href:"https://app.moon-vault.com/vaults",target:"_blank",rel:"noreferrer",children:Object(m.jsxs)("div",{className:"moonVaultLinkWrapper",children:["Powered by Moon Vault",Object(m.jsx)("img",{className:"moonVaultImage",src:i,alt:"Moon Vault Logo"})]})})}),Object(m.jsx)(a.a,{item:!0,lg:3})]}),Object(m.jsx)("div",{className:"gameFarmsHeading",children:"Game Farms"}),Object(m.jsx)("div",{className:"gameFarmsComingSoon",children:"Coming soon!"})]})}},852:function(t,e){},898:function(t,e){},900:function(t,e){},923:function(t,e){},925:function(t,e){},937:function(t,e){},938:function(t,e){},953:function(t,e){},965:function(t,e){},967:function(t,e){}}]);
//# sourceMappingURL=18.8d7dcc76.chunk.js.map